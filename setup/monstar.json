{
  "$schema": "https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "metadata": {
    "_generator": {
      "name": "bicep",
      "version": "0.32.4.45862",
      "templateHash": "14081937112172038774"
    }
  },
  "parameters": {
    "subscriptionId": {
      "type": "string"
    },
    "resourceGroupName": {
      "type": "string"
    },
    "createNewResourceGroup": {
      "type": "bool",
      "defaultValue": false
    },
    "location": {
      "type": "string"
    },
    "newLogAnalyticsWSName": {
      "type": "string",
      "defaultValue": ""
    },
    "createNewLogAnalyticsWS": {
      "type": "bool"
    },
    "existingLogAnalyticsWSId": {
      "type": "string",
      "defaultValue": ""
    },
    "grafanaLocation": {
      "type": "string",
      "defaultValue": ""
    },
    "grafanaName": {
      "type": "string",
      "defaultValue": ""
    },
    "newGrafana": {
      "type": "bool"
    },
    "storageAccountName": {
      "type": "string"
    },
    "createNewStorageAccount": {
      "type": "bool",
      "defaultValue": false
    },
    "instanceName": {
      "type": "string"
    },
    "deployGrafana": {
      "type": "bool"
    },
    "customerTags": {
      "type": "object"
    },
    "deployDiscovery": {
      "type": "bool",
      "defaultValue": false
    },
    "collectTelemetry": {
      "type": "bool",
      "defaultValue": true
    },
    "appInsightsLocation": {
      "type": "string"
    }
  },
  "variables": {
    "solutionTag": "MonitorStarterPacks",
    "solutionTagComponents": "MonitorStarterPacksComponents",
    "solutionVersion": "0.1",
    "tempTags": {
      "[format('{0}', variables('solutionTagComponents'))]": "BackendComponent",
      "solutionVersion": "[variables('solutionVersion')]",
      "instanceName": "[parameters('instanceName')]"
    },
    "Tags": "[if(equals(parameters('customerTags'), createObject()), variables('tempTags'), union(variables('tempTags'), parameters('customerTags').All))]",
    "functionName": "[format('AMP-{0}-{1}-Function', parameters('instanceName'), split(parameters('subscriptionId'), '-')[0])]",
    "logicAppName": "[format('AMP-{0}-LogicApp', parameters('instanceName'))]",
    "ImageGalleryName": "[format('AMP{0}Gallery', parameters('instanceName'))]"
  },
  "resources": [
    {
      "condition": "[parameters('createNewResourceGroup')]",
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2022-09-01",
      "name": "[format('RGMonitoringPacks-{0}-{1}', parameters('location'), parameters('instanceName'))]",
      "subscriptionId": "[parameters('subscriptionId')]",
      "location": "[deployment().location]",
      "properties": {
        "expressionEvaluationOptions": {
          "scope": "inner"
        },
        "mode": "Incremental",
        "parameters": {
          "resourceGroupName": {
            "value": "[parameters('resourceGroupName')]"
          },
          "location": {
            "value": "[parameters('location')]"
          },
          "Tags": {
            "value": "[variables('Tags')]"
          }
        },
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "metadata": {
            "_generator": {
              "name": "bicep",
              "version": "0.32.4.45862",
              "templateHash": "17175818948770477909"
            }
          },
          "parameters": {
            "resourceGroupName": {
              "type": "string"
            },
            "location": {
              "type": "string"
            },
            "Tags": {
              "type": "object"
            }
          },
          "resources": [
            {
              "type": "Microsoft.Resources/resourceGroups",
              "apiVersion": "2023-07-01",
              "name": "[parameters('resourceGroupName')]",
              "location": "[parameters('location')]",
              "tags": "[parameters('Tags')]"
            }
          ],
          "outputs": {
            "newResourceGroupId": {
              "type": "string",
              "value": "[subscriptionResourceId('Microsoft.Resources/resourceGroups', parameters('resourceGroupName'))]"
            }
          }
        }
      }
    },
    {
      "condition": "[parameters('createNewStorageAccount')]",
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2022-09-01",
      "name": "[format('STOmonitoringPacks-{0}-{1}', parameters('location'), parameters('instanceName'))]",
      "subscriptionId": "[parameters('subscriptionId')]",
      "resourceGroup": "[parameters('resourceGroupName')]",
      "properties": {
        "expressionEvaluationOptions": {
          "scope": "inner"
        },
        "mode": "Incremental",
        "parameters": {
          "location": {
            "value": "[parameters('location')]"
          },
          "Tags": {
            "value": "[variables('Tags')]"
          },
          "storageAccountName": {
            "value": "[parameters('storageAccountName')]"
          }
        },
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "metadata": {
            "_generator": {
              "name": "bicep",
              "version": "0.32.4.45862",
              "templateHash": "17027540109173456102"
            }
          },
          "parameters": {
            "storageAccountName": {
              "type": "string"
            },
            "location": {
              "type": "string"
            },
            "Tags": {
              "type": "object"
            }
          },
          "resources": [
            {
              "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
              "apiVersion": "2023-01-01",
              "name": "[format('{0}/{1}/{2}', parameters('storageAccountName'), 'default', 'discovery')]",
              "properties": {
                "immutableStorageWithVersioning": {
                  "enabled": false
                },
                "denyEncryptionScopeOverride": false,
                "defaultEncryptionScope": "$account-encryption-key",
                "publicAccess": "None"
              },
              "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccountName'), 'default')]"
              ]
            },
            {
              "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
              "apiVersion": "2023-01-01",
              "name": "[format('{0}/{1}/{2}', parameters('storageAccountName'), 'default', 'applications')]",
              "properties": {
                "immutableStorageWithVersioning": {
                  "enabled": false
                },
                "denyEncryptionScopeOverride": false,
                "defaultEncryptionScope": "$account-encryption-key",
                "publicAccess": "None"
              },
              "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccountName'), 'default')]"
              ]
            },
            {
              "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
              "apiVersion": "2023-01-01",
              "name": "[format('{0}/{1}/{2}', parameters('storageAccountName'), 'default', 'amba')]",
              "properties": {
                "immutableStorageWithVersioning": {
                  "enabled": false
                },
                "denyEncryptionScopeOverride": false,
                "defaultEncryptionScope": "$account-encryption-key",
                "publicAccess": "None"
              },
              "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccountName'), 'default')]"
              ]
            },
            {
              "type": "Microsoft.Storage/storageAccounts/blobServices",
              "apiVersion": "2023-01-01",
              "name": "[format('{0}/{1}', parameters('storageAccountName'), 'default')]",
              "properties": {
                "cors": {
                  "corsRules": []
                },
                "deleteRetentionPolicy": {
                  "enabled": false
                }
              },
              "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccountName'))]"
              ]
            },
            {
              "type": "Microsoft.Storage/storageAccounts",
              "apiVersion": "2023-01-01",
              "name": "[parameters('storageAccountName')]",
              "location": "[parameters('location')]",
              "tags": "[parameters('Tags')]",
              "sku": {
                "name": "Standard_LRS"
              },
              "kind": "StorageV2",
              "properties": {
                "accessTier": "Hot",
                "allowBlobPublicAccess": false,
                "allowSharedKeyAccess": true,
                "supportsHttpsTrafficOnly": true
              }
            }
          ],
          "outputs": {
            "storageAccountName": {
              "type": "string",
              "value": "[parameters('storageAccountName')]"
            },
            "storageAccountResourceId": {
              "type": "string",
              "value": "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccountName'))]"
            }
          }
        }
      },
      "dependsOn": [
        "[subscriptionResourceId(parameters('subscriptionId'), 'Microsoft.Resources/deployments', format('RGMonitoringPacks-{0}-{1}', parameters('location'), parameters('instanceName')))]"
      ]
    },
    {
      "condition": "[not(parameters('createNewStorageAccount'))]",
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2022-09-01",
      "name": "[format('existingstorage-depl-{0}-{1}', parameters('location'), parameters('instanceName'))]",
      "subscriptionId": "[parameters('subscriptionId')]",
      "resourceGroup": "[parameters('resourceGroupName')]",
      "properties": {
        "expressionEvaluationOptions": {
          "scope": "inner"
        },
        "mode": "Incremental",
        "parameters": {
          "storageAccountName": {
            "value": "[parameters('storageAccountName')]"
          }
        },
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "metadata": {
            "_generator": {
              "name": "bicep",
              "version": "0.32.4.45862",
              "templateHash": "17947763426648198191"
            }
          },
          "parameters": {
            "storageAccountName": {
              "type": "string"
            }
          },
          "resources": [
            {
              "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
              "apiVersion": "2023-01-01",
              "name": "[format('{0}/{1}/{2}', parameters('storageAccountName'), 'default', 'discovery')]",
              "properties": {
                "immutableStorageWithVersioning": {
                  "enabled": false
                },
                "denyEncryptionScopeOverride": false,
                "defaultEncryptionScope": "$account-encryption-key",
                "publicAccess": "None"
              },
              "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccountName'), 'default')]"
              ]
            },
            {
              "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
              "apiVersion": "2023-01-01",
              "name": "[format('{0}/{1}/{2}', parameters('storageAccountName'), 'default', 'amba')]",
              "properties": {
                "immutableStorageWithVersioning": {
                  "enabled": false
                },
                "denyEncryptionScopeOverride": false,
                "defaultEncryptionScope": "$account-encryption-key",
                "publicAccess": "None"
              },
              "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccountName'), 'default')]"
              ]
            },
            {
              "type": "Microsoft.Storage/storageAccounts/blobServices",
              "apiVersion": "2023-01-01",
              "name": "[format('{0}/{1}', parameters('storageAccountName'), 'default')]",
              "properties": {
                "cors": {
                  "corsRules": []
                },
                "deleteRetentionPolicy": {
                  "enabled": false
                }
              }
            }
          ],
          "outputs": {
            "storageAccountName": {
              "type": "string",
              "value": "[parameters('storageAccountName')]"
            },
            "storageAccountResourceId": {
              "type": "string",
              "value": "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccountName'))]"
            }
          }
        }
      }
    },
    {
      "condition": "[parameters('createNewLogAnalyticsWS')]",
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2022-09-01",
      "name": "[format('logAnalytics-Deployment-{0}-{1}', parameters('location'), parameters('instanceName'))]",
      "subscriptionId": "[parameters('subscriptionId')]",
      "resourceGroup": "[parameters('resourceGroupName')]",
      "properties": {
        "expressionEvaluationOptions": {
          "scope": "inner"
        },
        "mode": "Incremental",
        "parameters": {
          "location": {
            "value": "[parameters('location')]"
          },
          "logAnalyticsWorkspaceName": {
            "value": "[parameters('newLogAnalyticsWSName')]"
          },
          "Tags": {
            "value": "[variables('Tags')]"
          }
        },
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "metadata": {
            "_generator": {
              "name": "bicep",
              "version": "0.32.4.45862",
              "templateHash": "13376729168955437095"
            }
          },
          "parameters": {
            "logAnalyticsWorkspaceName": {
              "type": "string"
            },
            "location": {
              "type": "string"
            },
            "Tags": {
              "type": "object"
            }
          },
          "resources": [
            {
              "type": "Microsoft.OperationalInsights/workspaces",
              "apiVersion": "2022-10-01",
              "name": "[parameters('logAnalyticsWorkspaceName')]",
              "location": "[parameters('location')]",
              "tags": "[parameters('Tags')]",
              "properties": {
                "sku": {
                  "name": "PerGB2018"
                }
              }
            }
          ],
          "outputs": {
            "customerId": {
              "type": "string",
              "value": "[reference(resourceId('Microsoft.OperationalInsights/workspaces', parameters('logAnalyticsWorkspaceName')), '2022-10-01').customerId]"
            },
            "lawresourceid": {
              "type": "string",
              "value": "[resourceId('Microsoft.OperationalInsights/workspaces', parameters('logAnalyticsWorkspaceName'))]"
            }
          }
        }
      },
      "dependsOn": [
        "[subscriptionResourceId(parameters('subscriptionId'), 'Microsoft.Resources/deployments', format('RGMonitoringPacks-{0}-{1}', parameters('location'), parameters('instanceName')))]"
      ]
    },
    {
      "condition": "[parameters('deployDiscovery')]",
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2022-09-01",
      "name": "[format('DeployDiscovery-{0}-{1}', parameters('location'), parameters('instanceName'))]",
      "location": "[deployment().location]",
      "properties": {
        "expressionEvaluationOptions": {
          "scope": "inner"
        },
        "mode": "Incremental",
        "parameters": {
          "location": {
            "value": "[parameters('location')]"
          },
          "resourceGroupName": {
            "value": "[parameters('resourceGroupName')]"
          },
          "solutionTag": {
            "value": "[variables('solutionTag')]"
          },
          "subscriptionId": {
            "value": "[parameters('subscriptionId')]"
          },
          "dceId": {
            "value": "[reference(subscriptionResourceId('Microsoft.Resources/deployments', format('MonitoringPacks-backend-{0}', parameters('instanceName'))), '2022-09-01').outputs.dceId.value]"
          },
          "imageGalleryName": {
            "value": "[variables('ImageGalleryName')]"
          },
          "lawResourceId": "[if(parameters('createNewLogAnalyticsWS'), createObject('value', reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('logAnalytics-Deployment-{0}-{1}', parameters('location'), parameters('instanceName'))), '2022-09-01').outputs.lawresourceid.value), createObject('value', parameters('existingLogAnalyticsWSId')))]",
          "storageAccountname": {
            "value": "[parameters('storageAccountName')]"
          },
          "tableName": {
            "value": "Discovery"
          },
          "resultstableName": {
            "value": "DiscoveryResults"
          },
          "customerTags": {
            "value": "[parameters('customerTags')]"
          },
          "instanceName": {
            "value": "[parameters('instanceName')]"
          },
          "solutionVersion": {
            "value": "[variables('solutionVersion')]"
          },
          "functionName": {
            "value": "[variables('functionName')]"
          }
        },
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "metadata": {
            "_generator": {
              "name": "bicep",
              "version": "0.32.4.45862",
              "templateHash": "5214200015656535912"
            }
          },
          "parameters": {
            "location": {
              "type": "string"
            },
            "solutionTag": {
              "type": "string"
            },
            "subscriptionId": {
              "type": "string"
            },
            "resourceGroupName": {
              "type": "string"
            },
            "storageAccountname": {
              "type": "string"
            },
            "imageGalleryName": {
              "type": "string"
            },
            "lawResourceId": {
              "type": "string"
            },
            "tableName": {
              "type": "string"
            },
            "resultstableName": {
              "type": "string"
            },
            "dceId": {
              "type": "string"
            },
            "customerTags": {
              "type": "object"
            },
            "instanceName": {
              "type": "string"
            },
            "solutionVersion": {
              "type": "string"
            },
            "functionName": {
              "type": "string"
            }
          },
          "variables": {
            "solutionTagComponents": "MonitorStarterPacksComponents",
            "tempTags": {
              "[format('{0}', variables('solutionTagComponents'))]": "BackendComponent",
              "solutionVersion": "[parameters('solutionVersion')]",
              "instanceName": "[parameters('instanceName')]"
            },
            "Tags": "[if(equals(parameters('customerTags'), createObject()), variables('tempTags'), union(variables('tempTags'), parameters('customerTags').All))]",
            "tableNameToUse": "[format('{0}_CL', parameters('tableName'))]",
            "resultstableNameToUse": "[format('{0}_CL', parameters('resultstableName'))]",
            "lawFriendlyName": "[split(parameters('lawResourceId'), '/')[8]]"
          },
          "resources": [
            {
              "type": "Microsoft.Resources/deployments",
              "apiVersion": "2022-09-01",
              "name": "[format('{0}-{1}-{2}', variables('tableNameToUse'), parameters('instanceName'), parameters('location'))]",
              "subscriptionId": "[parameters('subscriptionId')]",
              "resourceGroup": "[parameters('resourceGroupName')]",
              "properties": {
                "expressionEvaluationOptions": {
                  "scope": "inner"
                },
                "mode": "Incremental",
                "parameters": {
                  "parentname": {
                    "value": "[variables('lawFriendlyName')]"
                  },
                  "tableName": {
                    "value": "[variables('tableNameToUse')]"
                  },
                  "retentionDays": {
                    "value": 31
                  }
                },
                "template": {
                  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                  "contentVersion": "1.0.0.0",
                  "metadata": {
                    "_generator": {
                      "name": "bicep",
                      "version": "0.32.4.45862",
                      "templateHash": "2081426938105913058"
                    }
                  },
                  "parameters": {
                    "parentname": {
                      "type": "string"
                    },
                    "tableName": {
                      "type": "string"
                    },
                    "retentionDays": {
                      "type": "int",
                      "defaultValue": 31
                    }
                  },
                  "resources": [
                    {
                      "type": "Microsoft.OperationalInsights/workspaces/tables",
                      "apiVersion": "2022-10-01",
                      "name": "[format('{0}/{1}', parameters('parentname'), parameters('tableName'))]",
                      "properties": {
                        "totalRetentionInDays": "[parameters('retentionDays')]",
                        "plan": "Analytics",
                        "schema": {
                          "name": "[parameters('tableName')]",
                          "columns": [
                            {
                              "name": "TimeGenerated",
                              "type": "datetime"
                            },
                            {
                              "name": "RawData",
                              "type": "string"
                            }
                          ]
                        },
                        "retentionInDays": "[parameters('retentionDays')]"
                      }
                    }
                  ]
                }
              }
            },
            {
              "type": "Microsoft.Resources/deployments",
              "apiVersion": "2022-09-01",
              "name": "[format('results{0}-{1}-{2}', variables('tableNameToUse'), parameters('instanceName'), parameters('location'))]",
              "subscriptionId": "[parameters('subscriptionId')]",
              "resourceGroup": "[parameters('resourceGroupName')]",
              "properties": {
                "expressionEvaluationOptions": {
                  "scope": "inner"
                },
                "mode": "Incremental",
                "parameters": {
                  "parentname": {
                    "value": "[variables('lawFriendlyName')]"
                  },
                  "tableName": {
                    "value": "[variables('resultstableNameToUse')]"
                  },
                  "retentionDays": {
                    "value": 31
                  }
                },
                "template": {
                  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                  "contentVersion": "1.0.0.0",
                  "metadata": {
                    "_generator": {
                      "name": "bicep",
                      "version": "0.32.4.45862",
                      "templateHash": "1255332294702827265"
                    }
                  },
                  "parameters": {
                    "parentname": {
                      "type": "string"
                    },
                    "tableName": {
                      "type": "string"
                    },
                    "retentionDays": {
                      "type": "int",
                      "defaultValue": 31
                    }
                  },
                  "resources": [
                    {
                      "type": "Microsoft.OperationalInsights/workspaces/tables",
                      "apiVersion": "2022-10-01",
                      "name": "[format('{0}/{1}', parameters('parentname'), parameters('tableName'))]",
                      "properties": {
                        "totalRetentionInDays": "[parameters('retentionDays')]",
                        "plan": "Analytics",
                        "schema": {
                          "name": "[parameters('tableName')]",
                          "columns": [
                            {
                              "name": "TimeGenerated",
                              "type": "datetime"
                            },
                            {
                              "name": "Tag",
                              "type": "string"
                            },
                            {
                              "name": "ResourceId",
                              "type": "string"
                            },
                            {
                              "name": "OS",
                              "type": "string"
                            },
                            {
                              "name": "Location",
                              "type": "string"
                            }
                          ]
                        },
                        "retentionInDays": "[parameters('retentionDays')]"
                      }
                    }
                  ]
                }
              }
            },
            {
              "type": "Microsoft.Resources/deployments",
              "apiVersion": "2022-09-01",
              "name": "[format('DiscoveryResults-{0}-{1}', parameters('instanceName'), parameters('location'))]",
              "subscriptionId": "[parameters('subscriptionId')]",
              "resourceGroup": "[parameters('resourceGroupName')]",
              "properties": {
                "expressionEvaluationOptions": {
                  "scope": "inner"
                },
                "mode": "Incremental",
                "parameters": {
                  "location": {
                    "value": "[parameters('location')]"
                  },
                  "workspaceResourceId": {
                    "value": "[parameters('lawResourceId')]"
                  },
                  "Tags": {
                    "value": "[variables('Tags')]"
                  },
                  "ruleName": {
                    "value": "[format('discoveryResults-{0}', variables('lawFriendlyName'))]"
                  },
                  "dceId": {
                    "value": "[parameters('dceId')]"
                  },
                  "tableName": {
                    "value": "[variables('resultstableNameToUse')]"
                  }
                },
                "template": {
                  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                  "contentVersion": "1.0.0.0",
                  "metadata": {
                    "_generator": {
                      "name": "bicep",
                      "version": "0.32.4.45862",
                      "templateHash": "8830504372643311254"
                    }
                  },
                  "parameters": {
                    "location": {
                      "type": "string"
                    },
                    "workspaceResourceId": {
                      "type": "string"
                    },
                    "Tags": {
                      "type": "object"
                    },
                    "ruleName": {
                      "type": "string"
                    },
                    "dceId": {
                      "type": "string"
                    },
                    "tableName": {
                      "type": "string"
                    }
                  },
                  "variables": {
                    "streamname": "[format('Custom-{0}', parameters('tableName'))]",
                    "wsfriendlyname": "[split(parameters('workspaceResourceId'), '/')[8]]"
                  },
                  "resources": [
                    {
                      "type": "Microsoft.Insights/dataCollectionRules",
                      "apiVersion": "2023-03-11",
                      "name": "[format('{0}-discovery', parameters('ruleName'))]",
                      "location": "[parameters('location')]",
                      "tags": "[parameters('Tags')]",
                      "properties": {
                        "description": "Data collection rule for workload discovery.",
                        "dataCollectionEndpointId": "[parameters('dceId')]",
                        "streamDeclarations": {
                          "[format('{0}', variables('streamname'))]": {
                            "columns": [
                              {
                                "name": "TimeGenerated",
                                "type": "datetime"
                              },
                              {
                                "name": "Tag",
                                "type": "string"
                              },
                              {
                                "name": "ResourceId",
                                "type": "string"
                              },
                              {
                                "name": "OS",
                                "type": "string"
                              },
                              {
                                "name": "Location",
                                "type": "string"
                              }
                            ]
                          }
                        },
                        "destinations": {
                          "logAnalytics": [
                            {
                              "workspaceResourceId": "[parameters('workspaceResourceId')]",
                              "name": "[variables('wsfriendlyname')]"
                            }
                          ]
                        },
                        "dataFlows": [
                          {
                            "streams": [
                              "[format('{0}', variables('streamname'))]"
                            ],
                            "destinations": [
                              "[variables('wsfriendlyname')]"
                            ],
                            "transformKql": "source | project TimeGenerated, Tag, ResourceId, OS, Location",
                            "outputStream": "[variables('streamname')]"
                          }
                        ]
                      }
                    }
                  ],
                  "outputs": {
                    "RuleId": {
                      "type": "string",
                      "value": "[resourceId('Microsoft.Insights/dataCollectionRules', format('{0}-discovery', parameters('ruleName')))]"
                    },
                    "dcrImmutableId": {
                      "type": "string",
                      "value": "[reference(resourceId('Microsoft.Insights/dataCollectionRules', format('{0}-discovery', parameters('ruleName'))), '2023-03-11').immutableId]"
                    },
                    "streamName": {
                      "type": "string",
                      "value": "[variables('streamname')]"
                    },
                    "tableName": {
                      "type": "string",
                      "value": "[format('{0}-discovery', parameters('ruleName'))]"
                    }
                  }
                }
              },
              "dependsOn": [
                "[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('results{0}-{1}-{2}', variables('tableNameToUse'), parameters('instanceName'), parameters('location')))]"
              ]
            },
            {
              "type": "Microsoft.Resources/deployments",
              "apiVersion": "2022-09-01",
              "name": "[format('updateSiteConfig-{0}-{1}', parameters('instanceName'), parameters('location'))]",
              "resourceGroup": "[parameters('resourceGroupName')]",
              "properties": {
                "expressionEvaluationOptions": {
                  "scope": "inner"
                },
                "mode": "Incremental",
                "parameters": {
                  "functionName": {
                    "value": "[parameters('functionName')]"
                  },
                  "appSettings": {
                    "value": {
                      "discoveryDCRImmutableId": "[reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('DiscoveryResults-{0}-{1}', parameters('instanceName'), parameters('location'))), '2022-09-01').outputs.dcrImmutableId.value]",
                      "DiscoveryResultsTableName": "[variables('resultstableNameToUse')]"
                    }
                  },
                  "currentAppSettings": {
                    "value": "[list(resourceId(parameters('subscriptionId'), parameters('resourceGroupName'), 'Microsoft.Web/sites/config', parameters('functionName'), 'appsettings'), '2024-04-01').properties]"
                  }
                },
                "template": {
                  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                  "contentVersion": "1.0.0.0",
                  "metadata": {
                    "_generator": {
                      "name": "bicep",
                      "version": "0.32.4.45862",
                      "templateHash": "14660183399238099724"
                    }
                  },
                  "parameters": {
                    "functionName": {
                      "type": "string",
                      "metadata": {
                        "description": "The name of the function app."
                      }
                    },
                    "appSettings": {
                      "type": "object",
                      "metadata": {
                        "description": "The new application settings to be added or updated."
                      }
                    },
                    "currentAppSettings": {
                      "type": "object"
                    }
                  },
                  "resources": [
                    {
                      "type": "Microsoft.Web/sites/config",
                      "apiVersion": "2022-03-01",
                      "name": "[format('{0}/{1}', parameters('functionName'), 'appsettings')]",
                      "properties": "[union(parameters('currentAppSettings'), parameters('appSettings'))]"
                    }
                  ]
                }
              },
              "dependsOn": [
                "[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('DiscoveryResults-{0}-{1}', parameters('instanceName'), parameters('location')))]"
              ]
            }
          ]
        }
      },
      "dependsOn": [
        "[subscriptionResourceId('Microsoft.Resources/deployments', format('MonitoringPacks-backend-{0}', parameters('instanceName')))]",
        "[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('logAnalytics-Deployment-{0}-{1}', parameters('location'), parameters('instanceName')))]"
      ]
    },
    {
      "condition": "[and(parameters('newGrafana'), parameters('deployGrafana'))]",
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2022-09-01",
      "name": "[format('azureManagedGrafana-{0}', parameters('instanceName'))]",
      "subscriptionId": "[parameters('subscriptionId')]",
      "resourceGroup": "[parameters('resourceGroupName')]",
      "properties": {
        "expressionEvaluationOptions": {
          "scope": "inner"
        },
        "mode": "Incremental",
        "parameters": {
          "Tags": {
            "value": "[variables('Tags')]"
          },
          "location": {
            "value": "[parameters('grafanaLocation')]"
          },
          "grafanaName": {
            "value": "[parameters('grafanaName')]"
          },
          "solutionTag": {
            "value": "[variables('solutionTag')]"
          },
          "instanceName": {
            "value": "[parameters('instanceName')]"
          }
        },
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "metadata": {
            "_generator": {
              "name": "bicep",
              "version": "0.32.4.45862",
              "templateHash": "17298094867159064977"
            }
          },
          "parameters": {
            "grafanaName": {
              "type": "string"
            },
            "location": {
              "type": "string"
            },
            "Tags": {
              "type": "object"
            },
            "solutionTag": {
              "type": "string"
            },
            "instanceName": {
              "type": "string"
            }
          },
          "variables": {
            "ReaderRoleId": "acdd72a7-3385-48ef-bd42-f606fba81ae7",
            "LogAnalyticsContribuorRoleId": "92aaf0da-9dab-42b6-94a3-d43ce8d16293",
            "MonitoringContributorRoleId": "749f88d5-cbae-40b8-bcfc-e573ddc772fa"
          },
          "resources": [
            {
              "type": "Microsoft.Dashboard/grafana",
              "apiVersion": "2022-08-01",
              "name": "[parameters('grafanaName')]",
              "tags": "[parameters('Tags')]",
              "sku": {
                "name": "Standard"
              },
              "identity": {
                "type": "SystemAssigned"
              },
              "location": "[parameters('location')]"
            },
            {
              "type": "Microsoft.Resources/deployments",
              "apiVersion": "2022-09-01",
              "name": "[format('AMGRReadP_{0}_{1}', parameters('grafanaName'), parameters('instanceName'))]",
              "subscriptionId": "[subscription().subscriptionId]",
              "location": "[resourceGroup().location]",
              "properties": {
                "expressionEvaluationOptions": {
                  "scope": "inner"
                },
                "mode": "Incremental",
                "parameters": {
                  "principalId": {
                    "value": "[reference(resourceId('Microsoft.Dashboard/grafana', parameters('grafanaName')), '2022-08-01', 'full').identity.principalId]"
                  },
                  "resourcename": {
                    "value": "[parameters('grafanaName')]"
                  },
                  "roleDefinitionId": {
                    "value": "[variables('ReaderRoleId')]"
                  },
                  "roleShortName": {
                    "value": "Reader"
                  },
                  "solutionTag": {
                    "value": "[parameters('solutionTag')]"
                  },
                  "instanceName": {
                    "value": "[parameters('instanceName')]"
                  }
                },
                "template": {
                  "$schema": "https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#",
                  "contentVersion": "1.0.0.0",
                  "metadata": {
                    "_generator": {
                      "name": "bicep",
                      "version": "0.32.4.45862",
                      "templateHash": "12046791720435112264"
                    }
                  },
                  "parameters": {
                    "resourcename": {
                      "type": "string"
                    },
                    "solutionTag": {
                      "type": "string"
                    },
                    "principalId": {
                      "type": "string"
                    },
                    "roleDefinitionId": {
                      "type": "string"
                    },
                    "roleShortName": {
                      "type": "string"
                    },
                    "utcValue": {
                      "type": "string",
                      "defaultValue": "[utcNow()]"
                    },
                    "instanceName": {
                      "type": "string"
                    }
                  },
                  "variables": {
                    "roleIdtoUse": "[subscriptionResourceId('Microsoft.Authorization/roleDefinitions', parameters('roleDefinitionId'))]"
                  },
                  "resources": [
                    {
                      "type": "Microsoft.Authorization/roleAssignments",
                      "apiVersion": "2022-04-01",
                      "name": "[guid(subscription().id, parameters('principalId'), parameters('roleDefinitionId'), parameters('instanceName'))]",
                      "properties": {
                        "description": "[format('{0}-{1}-{2}-{3}', parameters('solutionTag'), parameters('roleShortName'), parameters('resourcename'), parameters('utcValue'))]",
                        "principalId": "[parameters('principalId')]",
                        "principalType": "ServicePrincipal",
                        "roleDefinitionId": "[variables('roleIdtoUse')]"
                      }
                    }
                  ],
                  "outputs": {
                    "roleassignmentname": {
                      "type": "string",
                      "value": "[guid(subscription().id, parameters('principalId'), parameters('roleDefinitionId'), parameters('instanceName'))]"
                    }
                  }
                }
              },
              "dependsOn": [
                "[resourceId('Microsoft.Dashboard/grafana', parameters('grafanaName'))]"
              ]
            },
            {
              "type": "Microsoft.Resources/deployments",
              "apiVersion": "2022-09-01",
              "name": "[format('AMGLAWP-{0}_{1}', parameters('grafanaName'), parameters('instanceName'))]",
              "properties": {
                "expressionEvaluationOptions": {
                  "scope": "inner"
                },
                "mode": "Incremental",
                "parameters": {
                  "principalId": {
                    "value": "[reference(resourceId('Microsoft.Dashboard/grafana', parameters('grafanaName')), '2022-08-01', 'full').identity.principalId]"
                  },
                  "resourcename": {
                    "value": "[parameters('grafanaName')]"
                  },
                  "roleDefinitionId": {
                    "value": "[variables('LogAnalyticsContribuorRoleId')]"
                  },
                  "roleShortName": {
                    "value": "Log Analytics Contributor"
                  },
                  "solutionTag": {
                    "value": "[parameters('solutionTag')]"
                  }
                },
                "template": {
                  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                  "contentVersion": "1.0.0.0",
                  "metadata": {
                    "_generator": {
                      "name": "bicep",
                      "version": "0.32.4.45862",
                      "templateHash": "18441567381332934980"
                    }
                  },
                  "parameters": {
                    "resourcename": {
                      "type": "string"
                    },
                    "solutionTag": {
                      "type": "string"
                    },
                    "principalId": {
                      "type": "string"
                    },
                    "roleDefinitionId": {
                      "type": "string"
                    },
                    "roleShortName": {
                      "type": "string"
                    },
                    "utcValue": {
                      "type": "string",
                      "defaultValue": "[utcNow()]"
                    }
                  },
                  "variables": {
                    "roleIdtoUse": "[subscriptionResourceId('Microsoft.Authorization/roleDefinitions', parameters('roleDefinitionId'))]"
                  },
                  "resources": [
                    {
                      "type": "Microsoft.Authorization/roleAssignments",
                      "apiVersion": "2022-04-01",
                      "name": "[guid(subscription().id, parameters('principalId'), parameters('roleDefinitionId'))]",
                      "properties": {
                        "description": "[format('{0}-{1}-{2}-{3}', parameters('solutionTag'), parameters('roleShortName'), parameters('resourcename'), parameters('utcValue'))]",
                        "principalId": "[parameters('principalId')]",
                        "principalType": "ServicePrincipal",
                        "roleDefinitionId": "[variables('roleIdtoUse')]"
                      }
                    }
                  ],
                  "outputs": {
                    "roleassignmentname": {
                      "type": "string",
                      "value": "[guid(subscription().id, parameters('principalId'), parameters('roleDefinitionId'))]"
                    }
                  }
                }
              },
              "dependsOn": [
                "[resourceId('Microsoft.Dashboard/grafana', parameters('grafanaName'))]"
              ]
            },
            {
              "type": "Microsoft.Resources/deployments",
              "apiVersion": "2022-09-01",
              "name": "[format('AMGMonP_{0}_{1}', parameters('grafanaName'), parameters('instanceName'))]",
              "properties": {
                "expressionEvaluationOptions": {
                  "scope": "inner"
                },
                "mode": "Incremental",
                "parameters": {
                  "principalId": {
                    "value": "[reference(resourceId('Microsoft.Dashboard/grafana', parameters('grafanaName')), '2022-08-01', 'full').identity.principalId]"
                  },
                  "resourcename": {
                    "value": "[parameters('grafanaName')]"
                  },
                  "roleDefinitionId": {
                    "value": "[variables('MonitoringContributorRoleId')]"
                  },
                  "roleShortName": {
                    "value": "Monitor Contributor Role"
                  },
                  "solutionTag": {
                    "value": "[parameters('solutionTag')]"
                  }
                },
                "template": {
                  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                  "contentVersion": "1.0.0.0",
                  "metadata": {
                    "_generator": {
                      "name": "bicep",
                      "version": "0.32.4.45862",
                      "templateHash": "18441567381332934980"
                    }
                  },
                  "parameters": {
                    "resourcename": {
                      "type": "string"
                    },
                    "solutionTag": {
                      "type": "string"
                    },
                    "principalId": {
                      "type": "string"
                    },
                    "roleDefinitionId": {
                      "type": "string"
                    },
                    "roleShortName": {
                      "type": "string"
                    },
                    "utcValue": {
                      "type": "string",
                      "defaultValue": "[utcNow()]"
                    }
                  },
                  "variables": {
                    "roleIdtoUse": "[subscriptionResourceId('Microsoft.Authorization/roleDefinitions', parameters('roleDefinitionId'))]"
                  },
                  "resources": [
                    {
                      "type": "Microsoft.Authorization/roleAssignments",
                      "apiVersion": "2022-04-01",
                      "name": "[guid(subscription().id, parameters('principalId'), parameters('roleDefinitionId'))]",
                      "properties": {
                        "description": "[format('{0}-{1}-{2}-{3}', parameters('solutionTag'), parameters('roleShortName'), parameters('resourcename'), parameters('utcValue'))]",
                        "principalId": "[parameters('principalId')]",
                        "principalType": "ServicePrincipal",
                        "roleDefinitionId": "[variables('roleIdtoUse')]"
                      }
                    }
                  ],
                  "outputs": {
                    "roleassignmentname": {
                      "type": "string",
                      "value": "[guid(subscription().id, parameters('principalId'), parameters('roleDefinitionId'))]"
                    }
                  }
                }
              },
              "dependsOn": [
                "[resourceId('Microsoft.Dashboard/grafana', parameters('grafanaName'))]"
              ]
            }
          ],
          "outputs": {
            "grafanaId": {
              "type": "string",
              "value": "[resourceId('Microsoft.Dashboard/grafana', parameters('grafanaName'))]"
            }
          }
        }
      },
      "dependsOn": [
        "[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('logAnalytics-Deployment-{0}-{1}', parameters('location'), parameters('instanceName')))]",
        "[subscriptionResourceId(parameters('subscriptionId'), 'Microsoft.Resources/deployments', format('RGMonitoringPacks-{0}-{1}', parameters('location'), parameters('instanceName')))]"
      ]
    },
    {
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2022-09-01",
      "name": "[format('MonitoringPacks-backend-{0}', parameters('instanceName'))]",
      "location": "[deployment().location]",
      "properties": {
        "expressionEvaluationOptions": {
          "scope": "inner"
        },
        "mode": "Incremental",
        "parameters": {
          "appInsightsLocation": {
            "value": "[parameters('appInsightsLocation')]"
          },
          "functionname": {
            "value": "[variables('functionName')]"
          },
          "lawresourceid": "[if(parameters('createNewLogAnalyticsWS'), createObject('value', reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('logAnalytics-Deployment-{0}-{1}', parameters('location'), parameters('instanceName'))), '2022-09-01').outputs.lawresourceid.value), createObject('value', parameters('existingLogAnalyticsWSId')))]",
          "location": {
            "value": "[parameters('location')]"
          },
          "resourceGroupName": {
            "value": "[parameters('resourceGroupName')]"
          },
          "Tags": {
            "value": "[variables('Tags')]"
          },
          "storageAccountName": {
            "value": "[parameters('storageAccountName')]"
          },
          "subscriptionId": {
            "value": "[parameters('subscriptionId')]"
          },
          "solutionTag": {
            "value": "[variables('solutionTag')]"
          },
          "imageGalleryName": {
            "value": "[variables('ImageGalleryName')]"
          },
          "logicappname": {
            "value": "[variables('logicAppName')]"
          },
          "instanceName": {
            "value": "[parameters('instanceName')]"
          },
          "collectTelemetry": {
            "value": "[parameters('collectTelemetry')]"
          }
        },
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "metadata": {
            "_generator": {
              "name": "bicep",
              "version": "0.32.4.45862",
              "templateHash": "6430998950794822895"
            }
          },
          "parameters": {
            "functionname": {
              "type": "string",
              "metadata": {
                "description": "The name for the function app that you wish to create"
              }
            },
            "logicappname": {
              "type": "string"
            },
            "instanceName": {
              "type": "string"
            },
            "location": {
              "type": "string"
            },
            "storageAccountName": {
              "type": "string"
            },
            "solutionTag": {
              "type": "string"
            },
            "lawresourceid": {
              "type": "string"
            },
            "appInsightsLocation": {
              "type": "string"
            },
            "Tags": {
              "type": "object",
              "metadata": {
                "description": "UTC timestamp used to create distinct deployment scripts for each deployment"
              }
            },
            "subscriptionId": {
              "type": "string"
            },
            "resourceGroupName": {
              "type": "string"
            },
            "imageGalleryName": {
              "type": "string"
            },
            "collectTelemetry": {
              "type": "bool"
            }
          },
          "variables": {
            "$fxv#0": "{\r\n  \"customerUsageAttribution\": {\r\n    \"SolutionIdentifier\": \"pid-be73d263-1f29-42ad-adf2-253234454db6\"\r\n  }\r\n}",
            "packPolicyRoleDefinitionIds": [
              "b24988ac-6180-42a0-ab88-20f7382dd24c"
            ],
            "backendFunctionRoleDefinitionIds": [
              "4a9ae827-6dc8-4573-8ac7-8239d42aa03f",
              "9980e02c-c2be-4d73-94e8-173b1dc7cf3c",
              "48b40c6e-82e0-4eb3-90d5-19e40f49b624",
              "acdd72a7-3385-48ef-bd42-f606fba81ae7",
              "92aaf0da-9dab-42b6-94a3-d43ce8d16293",
              "749f88d5-cbae-40b8-bcfc-e573ddc772fa",
              "36243c78-bf99-498c-9df9-86d9f8d28608",
              "f1a07417-d97a-45cb-824c-7a7467783830",
              "ba92f5b4-2d11-453d-a403-e96b0029c9fe",
              "3913510d-42f4-4e42-8a64-420c390055eb"
            ],
            "logicappRequiredRoleassignments": [
              "4633458b-17de-408a-b874-0445c86b69e6"
            ],
            "telemetryInfo": "[json(variables('$fxv#0'))]"
          },
          "resources": [
            {
              "condition": "[parameters('collectTelemetry')]",
              "type": "Microsoft.Resources/deployments",
              "apiVersion": "2022-09-01",
              "name": "[variables('telemetryInfo').customerUsageAttribution.SolutionIdentifier]",
              "subscriptionId": "[parameters('subscriptionId')]",
              "resourceGroup": "[parameters('resourceGroupName')]",
              "properties": {
                "expressionEvaluationOptions": {
                  "scope": "inner"
                },
                "mode": "Incremental",
                "parameters": {},
                "template": {
                  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                  "contentVersion": "1.0.0.0",
                  "metadata": {
                    "_generator": {
                      "name": "bicep",
                      "version": "0.32.4.45862",
                      "templateHash": "16208364426447542075"
                    }
                  },
                  "resources": []
                }
              }
            },
            {
              "type": "Microsoft.Resources/deployments",
              "apiVersion": "2022-09-01",
              "name": "[parameters('imageGalleryName')]",
              "subscriptionId": "[parameters('subscriptionId')]",
              "resourceGroup": "[parameters('resourceGroupName')]",
              "properties": {
                "expressionEvaluationOptions": {
                  "scope": "inner"
                },
                "mode": "Incremental",
                "parameters": {
                  "galleryname": {
                    "value": "[parameters('imageGalleryName')]"
                  },
                  "location": {
                    "value": "[parameters('location')]"
                  },
                  "tags": {
                    "value": "[parameters('Tags')]"
                  }
                },
                "template": {
                  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                  "contentVersion": "1.0.0.0",
                  "metadata": {
                    "_generator": {
                      "name": "bicep",
                      "version": "0.32.4.45862",
                      "templateHash": "2475307255965847113"
                    }
                  },
                  "parameters": {
                    "location": {
                      "type": "string"
                    },
                    "galleryname": {
                      "type": "string"
                    },
                    "tags": {
                      "type": "object"
                    }
                  },
                  "resources": [
                    {
                      "type": "Microsoft.Compute/galleries",
                      "apiVersion": "2022-03-03",
                      "name": "[parameters('galleryname')]",
                      "location": "[parameters('location')]",
                      "tags": "[parameters('tags')]",
                      "properties": {
                        "description": "Monitoring gallery"
                      }
                    }
                  ]
                }
              }
            },
            {
              "type": "Microsoft.Resources/deployments",
              "apiVersion": "2022-09-01",
              "name": "[parameters('functionname')]",
              "subscriptionId": "[parameters('subscriptionId')]",
              "resourceGroup": "[parameters('resourceGroupName')]",
              "properties": {
                "expressionEvaluationOptions": {
                  "scope": "inner"
                },
                "mode": "Incremental",
                "parameters": {
                  "packsURL": {
                    "value": "[reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', 'PacksDefStorage'), '2022-09-01').outputs.fileURL.value]"
                  },
                  "appInsightsLocation": {
                    "value": "[parameters('appInsightsLocation')]"
                  },
                  "functionname": {
                    "value": "[parameters('functionname')]"
                  },
                  "lawresourceid": {
                    "value": "[parameters('lawresourceid')]"
                  },
                  "location": {
                    "value": "[parameters('location')]"
                  },
                  "Tags": {
                    "value": "[parameters('Tags')]"
                  },
                  "storageAccountName": {
                    "value": "[parameters('storageAccountName')]"
                  },
                  "userManagedIdentity": {
                    "value": "[reference(subscriptionResourceId('Microsoft.Resources/deployments', format('AMP-{0}-UMI-AzFun-{1}', parameters('instanceName'), parameters('location'))), '2022-09-01').outputs.userManagedIdentityResourceId.value]"
                  },
                  "userManagedIdentityClientId": {
                    "value": "[reference(subscriptionResourceId('Microsoft.Resources/deployments', format('AMP-{0}-UMI-AzFun-{1}', parameters('instanceName'), parameters('location'))), '2022-09-01').outputs.userManagedIdentityClientId.value]"
                  },
                  "packsUserManagedId": {
                    "value": "[reference(subscriptionResourceId('Microsoft.Resources/deployments', format('AMP-{0}-UMI-Packs-{1}', parameters('instanceName'), parameters('location'))), '2022-09-01').outputs.userManagedIdentityResourceId.value]"
                  },
                  "solutionTag": {
                    "value": "[parameters('solutionTag')]"
                  },
                  "instanceName": {
                    "value": "[parameters('instanceName')]"
                  },
                  "imageGalleryName": {
                    "value": "[parameters('imageGalleryName')]"
                  }
                },
                "template": {
                  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                  "contentVersion": "1.0.0.0",
                  "metadata": {
                    "_generator": {
                      "name": "bicep",
                      "version": "0.32.4.45862",
                      "templateHash": "4897661658886966256"
                    }
                  },
                  "parameters": {
                    "functionname": {
                      "type": "string"
                    },
                    "location": {
                      "type": "string"
                    },
                    "Tags": {
                      "type": "object"
                    },
                    "userManagedIdentity": {
                      "type": "string"
                    },
                    "userManagedIdentityClientId": {
                      "type": "string"
                    },
                    "packsUserManagedId": {
                      "type": "string"
                    },
                    "storageAccountName": {
                      "type": "string"
                    },
                    "filename": {
                      "type": "string",
                      "defaultValue": "discovery.zip"
                    },
                    "sasExpiry": {
                      "type": "string",
                      "defaultValue": "[dateTimeAdd(utcNow(), 'PT2H')]"
                    },
                    "lawresourceid": {
                      "type": "string"
                    },
                    "appInsightsLocation": {
                      "type": "string"
                    },
                    "imageGalleryName": {
                      "type": "string"
                    },
                    "packsURL": {
                      "type": "string"
                    },
                    "apiManagementKey": {
                      "type": "string",
                      "defaultValue": "[base64(newGuid())]"
                    },
                    "solutionTag": {
                      "type": "string"
                    },
                    "instanceName": {
                      "type": "string"
                    }
                  },
                  "variables": {
                    "$fxv#0": "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",
                    "discoveryContainerName": "discovery",
                    "tempfilename": "[format('{0}.tmp', parameters('filename'))]",
                    "ambaJsonURL": "https://azure.github.io/azure-monitor-baseline-alerts/amba-alerts.json",
                    "packsModulesRootURL": "https://raw.githubusercontent.com/FehseCorp/AzureMonitorStarterPacks/refs/heads/V3-SubDep",
                    "sasConfig": {
                      "signedResourceTypes": "sco",
                      "signedPermission": "r",
                      "signedServices": "b",
                      "signedExpiry": "[parameters('sasExpiry')]",
                      "signedProtocol": "https",
                      "keyToSign": "key2"
                    },
                    "keyName": "monitoringKey"
                  },
                  "resources": [
                    {
                      "type": "Microsoft.Resources/deploymentScripts",
                      "apiVersion": "2020-10-01",
                      "name": "[format('deployscript-Function-{0}', parameters('instanceName'))]",
                      "tags": "[parameters('Tags')]",
                      "location": "[parameters('location')]",
                      "kind": "AzureCLI",
                      "properties": {
                        "azCliVersion": "2.42.0",
                        "timeout": "PT5M",
                        "retentionInterval": "PT1H",
                        "environmentVariables": [
                          {
                            "name": "AZURE_STORAGE_ACCOUNT",
                            "value": "[parameters('storageAccountName')]"
                          },
                          {
                            "name": "AZURE_STORAGE_KEY",
                            "secureValue": "[listKeys(resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccountName')), '2023-01-01').keys[0].value]"
                          },
                          {
                            "name": "CONTENT",
                            "value": "[variables('$fxv#0')]"
                          }
                        ],
                        "scriptContent": "[format('echo \"$CONTENT\" > {0} && cat {1} | base64 -d > {2} && az storage blob upload -f {3} -c {4} -n {5} --overwrite true', variables('tempfilename'), variables('tempfilename'), parameters('filename'), parameters('filename'), variables('discoveryContainerName'), parameters('filename'))]"
                      },
                      "dependsOn": [
                        "[resourceId('Microsoft.Web/sites/config', parameters('functionname'), 'appsettings')]"
                      ]
                    },
                    {
                      "type": "Microsoft.Web/serverfarms",
                      "apiVersion": "2021-03-01",
                      "name": "[format('{0}-farm', parameters('functionname'))]",
                      "location": "[parameters('location')]",
                      "tags": "[parameters('Tags')]",
                      "sku": {
                        "name": "Y1",
                        "tier": "Dynamic",
                        "size": "Y1",
                        "family": "Y",
                        "capacity": 0
                      },
                      "kind": "functioapp",
                      "properties": {
                        "perSiteScaling": false,
                        "elasticScaleEnabled": false,
                        "maximumElasticWorkerCount": 1,
                        "isSpot": false,
                        "reserved": false,
                        "isXenon": false,
                        "hyperV": false,
                        "targetWorkerCount": 0,
                        "targetWorkerSizeId": 0,
                        "zoneRedundant": false
                      }
                    },
                    {
                      "type": "Microsoft.Web/sites",
                      "apiVersion": "2024-04-01",
                      "name": "[parameters('functionname')]",
                      "location": "[parameters('location')]",
                      "kind": "functionapp",
                      "tags": "[parameters('Tags')]",
                      "identity": {
                        "type": "UserAssigned",
                        "userAssignedIdentities": {
                          "[format('{0}', parameters('userManagedIdentity'))]": {}
                        }
                      },
                      "properties": {
                        "enabled": true,
                        "hostNameSslStates": [
                          {
                            "name": "[format('{0}.azurewebsites.net', parameters('functionname'))]",
                            "sslState": "Disabled",
                            "hostType": "Standard"
                          },
                          {
                            "name": "[format('{0}.azurewebsites.net', parameters('functionname'))]",
                            "sslState": "Disabled",
                            "hostType": "Repository"
                          }
                        ],
                        "serverFarmId": "[resourceId('Microsoft.Web/serverfarms', format('{0}-farm', parameters('functionname')))]",
                        "reserved": false,
                        "isXenon": false,
                        "hyperV": false,
                        "siteConfig": {
                          "numberOfWorkers": 1,
                          "acrUseManagedIdentityCreds": false,
                          "alwaysOn": false,
                          "ipSecurityRestrictions": [
                            {
                              "ipAddress": "Any",
                              "action": "Allow",
                              "priority": 1,
                              "name": "Allow all",
                              "description": "Allow all access"
                            }
                          ],
                          "scmIpSecurityRestrictions": [
                            {
                              "ipAddress": "Any",
                              "action": "Allow",
                              "priority": 1,
                              "name": "Allow all",
                              "description": "Allow all access"
                            }
                          ],
                          "http20Enabled": false,
                          "functionAppScaleLimit": 200,
                          "minimumElasticInstanceCount": 0,
                          "minTlsVersion": "1.2",
                          "cors": {
                            "allowedOrigins": [
                              "https://portal.azure.com"
                            ],
                            "supportCredentials": true
                          }
                        },
                        "scmSiteAlsoStopped": false,
                        "clientAffinityEnabled": false,
                        "clientCertEnabled": false,
                        "clientCertMode": "Required",
                        "hostNamesDisabled": false,
                        "containerSize": 1536,
                        "dailyMemoryTimeQuota": 0,
                        "httpsOnly": true,
                        "redundancyMode": "None",
                        "storageAccountRequired": false,
                        "keyVaultReferenceIdentity": "SystemAssigned"
                      },
                      "dependsOn": [
                        "[resourceId('Microsoft.Web/serverfarms', format('{0}-farm', parameters('functionname')))]"
                      ]
                    },
                    {
                      "type": "Microsoft.Web/sites/config",
                      "apiVersion": "2021-03-01",
                      "name": "[format('{0}/{1}', parameters('functionname'), 'appsettings')]",
                      "properties": {
                        "MSI_CLIENT_ID": "[parameters('userManagedIdentityClientId')]",
                        "PacksUserManagedId": "[parameters('packsUserManagedId')]",
                        "InstanceName": "[parameters('instanceName')]",
                        "AMBAJsonURL": "[variables('ambaJsonURL')]",
                        "PacksURL": "[parameters('packsURL')]",
                        "PacksModulesRootURL": "[variables('packsModulesRootURL')]",
                        "storageAccountName": "[parameters('storageAccountName')]",
                        "ResourceGroup": "[resourceGroup().name]",
                        "SolutionTag": "[parameters('solutionTag')]",
                        "galleryName": "[parameters('imageGalleryName')]",
                        "WEBSITE_CONTENTAZUREFILECONNECTIONSTRING": "[format('DefaultEndpointsProtocol=https;AccountName={0};AccountKey={1};EndpointSuffix={2}', parameters('storageAccountName'), listKeys(resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccountName')), '2023-01-01').keys[0].value, environment().suffixes.storage)]",
                        "AzureWebJobsStorage": "[format('DefaultEndpointsProtocol=https;AccountName={0};AccountKey={1};EndpointSuffix={2}', parameters('storageAccountName'), listKeys(resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccountName')), '2023-01-01').keys[0].value, environment().suffixes.storage)]",
                        "WEBSITE_CONTENTSHARE": "[parameters('storageAccountName')]",
                        "FUNCTIONS_WORKER_RUNTIME": "powershell",
                        "FUNCTIONS_EXTENSION_VERSION": "~4",
                        "APPINSIGHTS_INSTRUMENTATIONKEY": "[reference(resourceId('Microsoft.Insights/components', parameters('functionname')), '2020-02-02-preview').InstrumentationKey]",
                        "APPLICATIONINSIGHTS_CONNECTION_STRING": "[format('InstrumentationKey={0}', reference(resourceId('Microsoft.Insights/components', parameters('functionname')), '2020-02-02-preview').InstrumentationKey)]",
                        "ApplicationInsightsAgent_EXTENSION_VERSION": "~2"
                      },
                      "dependsOn": [
                        "[resourceId('Microsoft.Insights/components', parameters('functionname'))]",
                        "[resourceId('Microsoft.Web/sites', parameters('functionname'))]"
                      ]
                    },
                    {
                      "type": "Microsoft.Web/sites/extensions",
                      "apiVersion": "2021-02-01",
                      "name": "[format('{0}/{1}', parameters('functionname'), 'MSDeploy')]",
                      "properties": {
                        "packageUri": "[format('{0}{1}/{2}?{3}', reference(resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccountName')), '2023-01-01').primaryEndpoints.blob, variables('discoveryContainerName'), parameters('filename'), listAccountSAS(resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccountName')), '2023-01-01', variables('sasConfig')).accountSasToken)]"
                      },
                      "dependsOn": [
                        "[resourceId('Microsoft.Web/sites', parameters('functionname'))]",
                        "[resourceId('Microsoft.Resources/deploymentScripts', format('deployscript-Function-{0}', parameters('instanceName')))]"
                      ]
                    },
                    {
                      "type": "Microsoft.Insights/components",
                      "apiVersion": "2020-02-02",
                      "name": "[parameters('functionname')]",
                      "tags": "[parameters('Tags')]",
                      "location": "[parameters('appInsightsLocation')]",
                      "kind": "web",
                      "properties": {
                        "Application_Type": "web",
                        "publicNetworkAccessForIngestion": "Enabled",
                        "publicNetworkAccessForQuery": "Enabled",
                        "WorkspaceResourceId": "[parameters('lawresourceid')]"
                      }
                    },
                    {
                      "type": "Microsoft.Web/sites/host/functionKeys",
                      "apiVersion": "2022-03-01",
                      "name": "[format('{0}/default/{1}', parameters('functionname'), variables('keyName'))]",
                      "tags": "[parameters('Tags')]",
                      "properties": {
                        "name": "[variables('keyName')]",
                        "value": "[parameters('apiManagementKey')]"
                      },
                      "dependsOn": [
                        "[resourceId('Microsoft.Web/sites/config', parameters('functionname'), 'appsettings')]"
                      ]
                    }
                  ]
                }
              },
              "dependsOn": [
                "[subscriptionResourceId('Microsoft.Resources/deployments', format('AMP-{0}-UMI-AzFun-{1}', parameters('instanceName'), parameters('location')))]",
                "[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', parameters('imageGalleryName'))]",
                "[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', 'PacksDefStorage')]",
                "[subscriptionResourceId('Microsoft.Resources/deployments', format('AMP-{0}-UMI-Packs-{1}', parameters('instanceName'), parameters('location')))]"
              ]
            },
            {
              "type": "Microsoft.Resources/deployments",
              "apiVersion": "2022-09-01",
              "name": "[parameters('logicappname')]",
              "subscriptionId": "[parameters('subscriptionId')]",
              "resourceGroup": "[parameters('resourceGroupName')]",
              "properties": {
                "expressionEvaluationOptions": {
                  "scope": "inner"
                },
                "mode": "Incremental",
                "parameters": {
                  "functioname": {
                    "value": "[parameters('functionname')]"
                  },
                  "logicAppName": {
                    "value": "[parameters('logicappname')]"
                  },
                  "location": {
                    "value": "[parameters('location')]"
                  },
                  "Tags": {
                    "value": "[parameters('Tags')]"
                  },
                  "keyvaultid": {
                    "value": "[reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('amp-{0}-kv-{1}', parameters('instanceName'), substring(uniqueString(parameters('subscriptionId'), parameters('resourceGroupName'), 'keyvault'), 0, 6))), '2022-09-01').outputs.kvResourceId.value]"
                  },
                  "subscriptionId": {
                    "value": "[parameters('subscriptionId')]"
                  }
                },
                "template": {
                  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                  "contentVersion": "1.0.0.0",
                  "metadata": {
                    "_generator": {
                      "name": "bicep",
                      "version": "0.32.4.45862",
                      "templateHash": "14479473838979323047"
                    }
                  },
                  "parameters": {
                    "functioname": {
                      "type": "string"
                    },
                    "Tags": {
                      "type": "object"
                    },
                    "location": {
                      "type": "string"
                    },
                    "keyvaultid": {
                      "type": "string"
                    },
                    "subscriptionId": {
                      "type": "string"
                    },
                    "logicAppName": {
                      "type": "string"
                    }
                  },
                  "variables": {
                    "keyVaultName": "[split(parameters('keyvaultid'), '/')[8]]"
                  },
                  "resources": [
                    {
                      "type": "Microsoft.Logic/workflows",
                      "apiVersion": "2019-05-01",
                      "name": "[parameters('logicAppName')]",
                      "tags": "[parameters('Tags')]",
                      "location": "[parameters('location')]",
                      "identity": {
                        "type": "SystemAssigned"
                      },
                      "properties": {
                        "state": "Enabled",
                        "definition": {
                          "$schema": "https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2016-06-01/workflowdefinition.json#",
                          "contentVersion": "1.0.0.0",
                          "parameters": {
                            "$connections": {
                              "defaultValue": {},
                              "type": "Object"
                            }
                          },
                          "triggers": {
                            "manual": {
                              "type": "Request",
                              "kind": "Http",
                              "inputs": {}
                            }
                          },
                          "actions": {
                            "Get_Secret": {
                              "runAfter": {
                                "Parse_JSON": [
                                  "Succeeded"
                                ]
                              },
                              "type": "ApiConnection",
                              "inputs": {
                                "host": {
                                  "connection": {
                                    "name": "@parameters('$connections')['keyvault']['connectionId']"
                                  }
                                },
                                "method": "get",
                                "path": "/secrets/@{encodeURIComponent('FunctionKey')}/value"
                              }
                            },
                            "Parse_JSON": {
                              "runAfter": {},
                              "type": "ParseJson",
                              "inputs": {
                                "content": "@triggerBody()",
                                "schema": {
                                  "properties": {
                                    "function": {
                                      "type": "string"
                                    },
                                    "functionBody": {
                                      "properties": {},
                                      "type": "object"
                                    }
                                  },
                                  "type": "object"
                                }
                              }
                            },
                            "Switch": {
                              "runAfter": {
                                "Get_Secret": [
                                  "Succeeded"
                                ]
                              },
                              "cases": {
                                "Case": {
                                  "case": "tagmgmt",
                                  "actions": {
                                    "tagmgmt": {
                                      "runAfter": {},
                                      "type": "Function",
                                      "inputs": {
                                        "body": "@body('Parse_JSON')?['functionBody']",
                                        "Headers": {
                                          "x-functions-key": "[listKeys(resourceId('Microsoft.Web/sites/host', parameters('functioname'), 'default'), '2022-09-01').functionKeys.monitoringKey]"
                                        },
                                        "function": {
                                          "id": "[format('{0}/functions/tagmgmt', resourceId('Microsoft.Web/sites', parameters('functioname')))]"
                                        },
                                        "headers": {
                                          "x-functions-key": "@body('Get_secret')?['value']"
                                        }
                                      }
                                    }
                                  }
                                },
                                "Case_2": {
                                  "case": "alertmgmt",
                                  "actions": {
                                    "alertConfigMgmt": {
                                      "runAfter": {},
                                      "type": "Function",
                                      "inputs": {
                                        "body": "@body('Parse_JSON')?['functionBody']",
                                        "function": {
                                          "id": "[format('{0}/functions/alertConfigMgmt', resourceId('Microsoft.Web/sites', parameters('functioname')))]"
                                        },
                                        "headers": {
                                          "x-functions-key": "@body('Get_secret')?['value']"
                                        }
                                      }
                                    }
                                  }
                                },
                                "Case_4": {
                                  "case": "agentMgmt",
                                  "actions": {
                                    "agentMgmt": {
                                      "runAfter": {},
                                      "type": "Function",
                                      "inputs": {
                                        "body": "@body('Parse_JSON')?['functionBody']",
                                        "function": {
                                          "id": "[format('{0}/functions/agentmgmt', resourceId('Microsoft.Web/sites', parameters('functioname')))]"
                                        },
                                        "headers": {
                                          "x-functions-key": "@body('Get_secret')?['value']"
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "default": {
                                "actions": {}
                              },
                              "expression": "@body('Parse_JSON')?['Function']",
                              "type": "Switch"
                            }
                          },
                          "outputs": {}
                        },
                        "parameters": {
                          "$connections": {
                            "value": {
                              "keyvault": {
                                "connectionId": "[resourceId('Microsoft.Web/connections', 'keyvault')]",
                                "connectionName": "keyvault",
                                "connectionProperties": {
                                  "authentication": {
                                    "type": "ManagedServiceIdentity"
                                  }
                                },
                                "id": "[format('/subscriptions/{0}/providers/Microsoft.Web/locations/eastus/managedApis/keyvault', parameters('subscriptionId'))]"
                              }
                            }
                          }
                        }
                      },
                      "dependsOn": [
                        "[resourceId('Microsoft.Web/connections', 'keyvault')]"
                      ]
                    },
                    {
                      "type": "Microsoft.Web/connections",
                      "apiVersion": "2018-07-01-preview",
                      "name": "keyvault",
                      "properties": {
                        "displayName": "KeyVault",
                        "authenticatedUser": {},
                        "overallStatus": "Ready",
                        "statuses": [
                          {
                            "status": "Ready"
                          }
                        ],
                        "connectionState": "Enabled",
                        "parameterValueSet": {
                          "name": "oauthMI",
                          "values": {
                            "vaultName": {
                              "value": "[variables('keyVaultName')]"
                            }
                          }
                        },
                        "customParameterValues": {},
                        "createdTime": "2023-10-12T20:52:26.0864876Z",
                        "changedTime": "2023-10-12T20:52:26.0864876Z",
                        "api": {
                          "name": "keyvault",
                          "displayName": "Azure Key Vault",
                          "description": "Azure Key Vault is a service to securely store and access secrets.",
                          "iconUri": "https://connectoricons-prod.azureedge.net/releases/v1.0.1656/1.0.1656.3432/keyvault/icon.png",
                          "brandColor": "#0079d6",
                          "category": "Standard",
                          "id": "[format('/subscriptions/{0}/providers/Microsoft.Web/locations/{1}/managedApis/keyvault', parameters('subscriptionId'), parameters('location'))]",
                          "type": "Microsoft.Web/locations/managedApis"
                        },
                        "testLinks": [],
                        "testRequests": []
                      },
                      "location": "[parameters('location')]"
                    }
                  ],
                  "outputs": {
                    "logicAppPrincipalId": {
                      "type": "string",
                      "value": "[reference(resourceId('Microsoft.Logic/workflows', parameters('logicAppName')), '2019-05-01', 'full').identity.principalId]"
                    }
                  }
                }
              },
              "dependsOn": [
                "[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', parameters('functionname'))]",
                "[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('amp-{0}-kv-{1}', parameters('instanceName'), substring(uniqueString(parameters('subscriptionId'), parameters('resourceGroupName'), 'keyvault'), 0, 6)))]"
              ]
            },
            {
              "type": "Microsoft.Resources/deployments",
              "apiVersion": "2022-09-01",
              "name": "workbook2deployment",
              "subscriptionId": "[parameters('subscriptionId')]",
              "resourceGroup": "[parameters('resourceGroupName')]",
              "properties": {
                "expressionEvaluationOptions": {
                  "scope": "inner"
                },
                "mode": "Incremental",
                "parameters": {
                  "lawresourceid": {
                    "value": "[parameters('lawresourceid')]"
                  },
                  "location": {
                    "value": "[parameters('location')]"
                  },
                  "Tags": {
                    "value": "[parameters('Tags')]"
                  }
                },
                "template": {
                  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                  "contentVersion": "1.0.0.0",
                  "metadata": {
                    "_generator": {
                      "name": "bicep",
                      "version": "0.32.4.45862",
                      "templateHash": "12009821592751778541"
                    }
                  },
                  "parameters": {
                    "Tags": {
                      "type": "object"
                    },
                    "location": {
                      "type": "string"
                    },
                    "lawresourceid": {
                      "type": "string"
                    }
                  },
                  "variables": {
                    "$fxv#0": {
                      "version": "Notebook/1.0",
                      "items": [
                        {
                          "type": 1,
                          "content": {
                            "json": "# Azure Monitor Starter Packs - Extended Admin Centre - V3.0 (Beta)\n\n\n"
                          },
                          "customWidth": "50",
                          "name": "textTitle"
                        },
                        {
                          "type": 9,
                          "content": {
                            "version": "KqlParameterItem/1.0",
                            "parameters": [
                              {
                                "id": "741661c9-5e51-44bc-8e8e-bfc6396f2646",
                                "version": "KqlParameterItem/1.0",
                                "name": "showHelp",
                                "label": "Show Help Info",
                                "type": 10,
                                "isRequired": true,
                                "typeSettings": {
                                  "additionalResourceOptions": [],
                                  "showDefault": false
                                },
                                "jsonData": "[[\n    { \"value\":\"yes\", \"label\":\"Yes\",\"default\": \"yes\" },\n    { \"value\":\"no\", \"label\":\"No\" }\n]",
                                "timeContext": {
                                  "durationMs": 86400000
                                },
                                "value": "no"
                              },
                              {
                                "version": "KqlParameterItem/1.0",
                                "name": "showHidden",
                                "label": "Show Hidden Items",
                                "type": 10,
                                "isRequired": true,
                                "typeSettings": {
                                  "additionalResourceOptions": [],
                                  "showDefault": false
                                },
                                "jsonData": "[[\n    { \"value\":\"yes\", \"label\":\"Yes\",\"default\": \"yes\" },\n    { \"value\":\"no\", \"label\":\"No\" }\n]",
                                "timeContext": {
                                  "durationMs": 86400000
                                },
                                "value": "no",
                                "id": "f538abc2-3e09-45aa-a81e-b966a64e0703"
                              }
                            ],
                            "style": "above",
                            "queryType": 0,
                            "resourceType": "microsoft.operationalinsights/workspaces"
                          },
                          "customWidth": "50",
                          "name": "showHelpparameter"
                        },
                        {
                          "type": 11,
                          "content": {
                            "version": "LinkItem/1.0",
                            "style": "tabs",
                            "links": [
                              {
                                "id": "a9a63932-4a11-4fe1-938c-02619e609193",
                                "cellValue": "tabSelection",
                                "linkTarget": "parameter",
                                "linkLabel": "Getting Started",
                                "subTarget": "gettingstarted",
                                "style": "link"
                              },
                              {
                                "id": "4f0ca437-37b0-42f6-a150-e994338f5185",
                                "cellValue": "tabSelection",
                                "linkTarget": "parameter",
                                "linkLabel": "Status",
                                "subTarget": "status",
                                "style": "link"
                              },
                              {
                                "id": "15f0fa97-4286-48d6-9dea-26a956197d26",
                                "cellValue": "tabSelection",
                                "linkTarget": "parameter",
                                "linkLabel": "Servers",
                                "subTarget": "discovery",
                                "style": "link"
                              },
                              {
                                "id": "c5269422-e723-43b6-b923-8bf44fd49320",
                                "cellValue": "tabSelection",
                                "linkTarget": "parameter",
                                "linkLabel": "Services",
                                "subTarget": "paas",
                                "style": "link"
                              },
                              {
                                "id": "7499a88f-a536-41d7-9b58-9ebae1b5290e",
                                "cellValue": "tabSelection",
                                "linkTarget": "parameter",
                                "linkLabel": "Alert Rules",
                                "subTarget": "alertmanagement",
                                "style": "link"
                              },
                              {
                                "id": "c2a67d72-dd46-44ea-adba-b9d70915c607",
                                "cellValue": "tabSelection",
                                "linkTarget": "parameter",
                                "linkLabel": "Packs",
                                "subTarget": "rulemanagement",
                                "style": "link"
                              },
                              {
                                "id": "d8f7936d-170f-430d-af7d-ac22115a9e38",
                                "cellValue": "tabSelection",
                                "linkTarget": "parameter",
                                "linkLabel": "Agents",
                                "subTarget": "agentmgmt",
                                "style": "link"
                              },
                              {
                                "id": "afec2944-3bd3-4bd3-8afa-6dc39d0b623a",
                                "cellValue": "tabSelection",
                                "linkTarget": "parameter",
                                "linkLabel": "Discovery(Prototype)",
                                "subTarget": "autodiscovery",
                                "style": "link"
                              },
                              {
                                "id": "e1f636a4-1593-49ef-bf35-abf708e2be48",
                                "cellValue": "tabSelection",
                                "linkTarget": "parameter",
                                "linkLabel": "Configuration",
                                "subTarget": "backend",
                                "style": "link"
                              },
                              {
                                "id": "295ed7b4-8237-409a-87d2-1efd439bea97",
                                "cellValue": "tabSelection",
                                "linkTarget": "parameter",
                                "linkLabel": "Logs",
                                "subTarget": "logs",
                                "style": "link"
                              }
                            ]
                          },
                          "customWidth": "75",
                          "name": "mainLinksTab"
                        },
                        {
                          "type": 12,
                          "content": {
                            "version": "NotebookGroup/1.0",
                            "groupType": "editable",
                            "loadType": "always",
                            "items": [
                              {
                                "type": 1,
                                "content": {
                                  "json": "## General Parameters\n\n### Subscriptions\n\nSelect the Subscriptions that will be used in the Configuration\n\n### Logic App\n\nSelect the logic app to be used. Typically the shoulbe a single one but if more instances exist, select the one for the instance you want to use.\n\n### Function Apps\n\nSelect the Backend Function to be used. Typically the shoulbe a single one but if more instances exist, select the one for the instance you want to use.\n\n### Config Function Key\n\nThis field will be automatically populated once the function is selected.\n\n### Workspace\n\nSelect the Log Analytics Workspace to be used for this instance.\n\n### Azure Managed Grafana\n\nSelect the Azure Managed Grafana if you have deployed one along with the solution.",
                                  "style": "info"
                                },
                                "conditionalVisibility": {
                                  "parameterName": "showHelp",
                                  "comparison": "isEqualTo",
                                  "value": "yes"
                                },
                                "name": "text - Configuration "
                              },
                              {
                                "type": 9,
                                "content": {
                                  "version": "KqlParameterItem/1.0",
                                  "parameters": [
                                    {
                                      "id": "04f4ebcc-705a-4c79-a15a-bcba40d8dd51",
                                      "version": "KqlParameterItem/1.0",
                                      "name": "instanceName",
                                      "label": "Instance",
                                      "type": 2,
                                      "isRequired": true,
                                      "isGlobal": true,
                                      "query": "resources\r\n| where type =~ 'microsoft.web/sites' and ['kind'] =~ 'functionapp'\r\n| where isnotempty(tags.MonitorStarterPacksComponents)\r\n| project instanceNames=tags.instanceName",
                                      "crossComponentResources": [
                                        "value::tenant"
                                      ],
                                      "typeSettings": {
                                        "additionalResourceOptions": [],
                                        "showDefault": false
                                      },
                                      "timeContext": {
                                        "durationMs": 86400000
                                      },
                                      "queryType": 1,
                                      "resourceType": "microsoft.resources/tenants",
                                      "value": null
                                    },
                                    {
                                      "id": "7a778b2c-619d-4f82-bd1c-810f853af6fd",
                                      "version": "KqlParameterItem/1.0",
                                      "name": "Subscriptions",
                                      "type": 6,
                                      "isRequired": true,
                                      "isGlobal": true,
                                      "multiSelect": true,
                                      "quote": "'",
                                      "delimiter": ",",
                                      "typeSettings": {
                                        "additionalResourceOptions": [
                                          "value::all"
                                        ],
                                        "includeAll": false,
                                        "showDefault": false
                                      },
                                      "timeContext": {
                                        "durationMs": 86400000
                                      },
                                      "value": [
                                        ""
                                      ]
                                    },
                                    {
                                      "id": "16d48fd3-189f-4604-9582-da7cf5c93d7c",
                                      "version": "KqlParameterItem/1.0",
                                      "name": "FunctionApps",
                                      "label": "Function Apps",
                                      "type": 5,
                                      "description": "Select the function to provide the access key.",
                                      "isRequired": true,
                                      "isGlobal": true,
                                      "query": "resources\n| where type =~ 'microsoft.web/sites' and ['kind'] =~ 'functionapp'\n| where isnotempty(tags.MonitorStarterPacksComponents)\n| where tags.instanceName == '{instanceName}'\n| project id,name",
                                      "typeSettings": {
                                        "additionalResourceOptions": [],
                                        "showDefault": false
                                      },
                                      "queryType": 1,
                                      "resourceType": "microsoft.resourcegraph/resources",
                                      "value": ""
                                    },
                                    {
                                      "id": "c9fbafc9-2806-4c24-8d34-18f7cae66299",
                                      "version": "KqlParameterItem/1.0",
                                      "name": "configKey",
                                      "label": "Config Function Key",
                                      "type": 1,
                                      "description": "The function key is fetched automatically from the function selected on the left.",
                                      "isRequired": true,
                                      "isGlobal": true,
                                      "query": "{\"version\":\"ARMEndpoint/1.0\",\"data\":null,\"headers\":[],\"method\":\"POST\",\"path\":\"{FunctionApps}/functions/config/listkeys?api-version=2022-03-01\",\"urlParams\":[],\"batchDisabled\":false,\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.default\",\"columns\":[]}}]}",
                                      "typeSettings": {
                                        "isPassword": true
                                      },
                                      "queryType": 12
                                    },
                                    {
                                      "id": "4552c35d-c26c-4cbf-a4cf-b2e57ff7ee78",
                                      "version": "KqlParameterItem/1.0",
                                      "name": "Workspace",
                                      "label": "WorkSpace",
                                      "type": 5,
                                      "isRequired": true,
                                      "isGlobal": true,
                                      "query": "resources\n| where type == \"microsoft.operationalinsights/workspaces\"\n| where tags.instanceName =~ '{instanceName}'\n| project id",
                                      "crossComponentResources": [
                                        "value::all"
                                      ],
                                      "typeSettings": {
                                        "additionalResourceOptions": [],
                                        "showDefault": false
                                      },
                                      "queryType": 1,
                                      "value": ""
                                    },
                                    {
                                      "id": "1efb8bbe-532a-491b-b3c4-55f1402ee280",
                                      "version": "KqlParameterItem/1.0",
                                      "name": "logicAppResource",
                                      "label": "Logic App",
                                      "type": 5,
                                      "isRequired": true,
                                      "query": "resources\n| where type == \"microsoft.logic/workflows\" \n| where isnotempty(tags.MonitorStarterPacksComponents)\n| where tags.instanceName =~ '{instanceName}'\n| project Id=id, Name=name",
                                      "crossComponentResources": [
                                        "value::tenant"
                                      ],
                                      "typeSettings": {
                                        "resourceTypeFilter": {
                                          "microsoft.logic/workflows": true
                                        },
                                        "additionalResourceOptions": [],
                                        "showDefault": false
                                      },
                                      "timeContext": {
                                        "durationMs": 86400000
                                      },
                                      "queryType": 1,
                                      "resourceType": "microsoft.resources/tenants",
                                      "value": ""
                                    },
                                    {
                                      "id": "ea93902e-9856-4bd4-998d-ea88378907a7",
                                      "version": "KqlParameterItem/1.0",
                                      "name": "GrafanaInstance",
                                      "label": "Azure Managed Grafana",
                                      "type": 2,
                                      "description": "Select an Azure Managed Grafana instance, if available.",
                                      "isGlobal": true,
                                      "query": "resources\n| where type =~ \"microsoft.dashboard/grafana\"\n| where isnotempty(tags.monitorStarterPacksComponents) or isnotempty(tags.MonitorStarterPacksComponents)\n| where tags.instanceName == '{instanceName}'\n| project id, label=properties.endpoint",
                                      "typeSettings": {
                                        "additionalResourceOptions": [],
                                        "showDefault": false
                                      },
                                      "timeContext": {
                                        "durationMs": 86400000
                                      },
                                      "queryType": 1,
                                      "resourceType": "microsoft.resourcegraph/resources",
                                      "value": ""
                                    },
                                    {
                                      "id": "7961f447-f72b-401d-a26b-283a44e45b2e",
                                      "version": "KqlParameterItem/1.0",
                                      "name": "DefaultAG",
                                      "label": "Default Action Group",
                                      "type": 5,
                                      "isRequired": true,
                                      "query": "resources\r\n| where type == \"microsoft.insights/actiongroups\"\r\n| where properties.enabled == 'true'\r\n| project id",
                                      "crossComponentResources": [
                                        "value::tenant"
                                      ],
                                      "typeSettings": {
                                        "additionalResourceOptions": []
                                      },
                                      "timeContext": {
                                        "durationMs": 86400000
                                      },
                                      "queryType": 1,
                                      "resourceType": "microsoft.resources/tenants",
                                      "value": ""
                                    }
                                  ],
                                  "style": "above",
                                  "queryType": 1,
                                  "resourceType": "microsoft.resourcegraph/resources"
                                },
                                "customWidth": "100",
                                "conditionalVisibility": {
                                  "parameterName": "tabSelection",
                                  "comparison": "isEqualTo",
                                  "value": "backend"
                                },
                                "name": "generalParams"
                              },
                              {
                                "type": 9,
                                "content": {
                                  "version": "KqlParameterItem/1.0",
                                  "parameters": [
                                    {
                                      "id": "03340268-1ac8-4d74-a76e-bc37a4bdd45c",
                                      "version": "KqlParameterItem/1.0",
                                      "name": "appInsightsName",
                                      "label": "",
                                      "type": 1,
                                      "isRequired": true,
                                      "query": "resources\n| where type == \"microsoft.insights/components\"\n| where name == \"{FunctionApps:name}\"\n| project id",
                                      "queryType": 1,
                                      "resourceType": "microsoft.resourcegraph/resources"
                                    }
                                  ],
                                  "style": "above",
                                  "queryType": 1,
                                  "resourceType": "microsoft.resourcegraph/resources"
                                },
                                "conditionalVisibility": {
                                  "parameterName": "showHidden",
                                  "comparison": "isEqualTo",
                                  "value": "yes"
                                },
                                "name": "parameters - 5"
                              },
                              {
                                "type": 11,
                                "content": {
                                  "version": "LinkItem/1.0",
                                  "style": "tabs",
                                  "links": [
                                    {
                                      "id": "f5b4b4b6-c5d7-4941-b807-8a61df48a0f4",
                                      "cellValue": "configTab",
                                      "linkTarget": "parameter",
                                      "linkLabel": "Resource List",
                                      "subTarget": "resources",
                                      "style": "link"
                                    }
                                  ]
                                },
                                "name": "links - 4"
                              },
                              {
                                "type": 3,
                                "content": {
                                  "version": "KqlItem/1.0",
                                  "query": "resources\n| where (isnotempty(tags.MonitorStarterPacks) or isnotempty(tags.MonitorStarterPacksComponents)) and (tags.instanceName == '{instanceName}')\n|union ( \npolicyresources | where isnotempty(properties.metadata.MonitorStarterPacks))\n| summarize count() by type, tostring(tags.instanceName)\n| sort by count_ desc ",
                                  "size": 0,
                                  "title": "Monitoring Packs resources and Components",
                                  "queryType": 1,
                                  "resourceType": "microsoft.resources/tenants",
                                  "crossComponentResources": [
                                    "value::tenant"
                                  ],
                                  "gridSettings": {
                                    "filter": true
                                  }
                                },
                                "conditionalVisibility": {
                                  "parameterName": "configTab",
                                  "comparison": "isEqualTo",
                                  "value": "resources"
                                },
                                "name": "Installed Components",
                                "styleSettings": {
                                  "showBorder": true
                                }
                              }
                            ],
                            "exportParameters": true
                          },
                          "conditionalVisibility": {
                            "parameterName": "tabSelection",
                            "comparison": "isEqualTo",
                            "value": "backend"
                          },
                          "name": "ConfigStatusGroup"
                        },
                        {
                          "type": 3,
                          "content": {
                            "version": "KqlItem/1.0",
                            "query": "{\"version\":\"CustomEndpoint/1.0\",\"data\":null,\"headers\":[{\"key\":\"x-functions-key\",\"value\":\"{configKey}\"}],\"method\":\"GET\",\"url\":\"https://{FunctionApps:name}.azurewebsites.net/api/config?Action=getSupportedServices\",\"contentType\":\"text/plain\",\"urlParams\":[{\"key\":\"\",\"value\":\"\"}],\"transformers\":null}",
                            "size": 0,
                            "queryType": 10
                          },
                          "conditionalVisibility": {
                            "parameterName": "showHidden",
                            "comparison": "isEqualTo",
                            "value": "yes"
                          },
                          "name": "queryServiceTags - Global"
                        },
                        {
                          "type": 1,
                          "content": {
                            "json": "# Getting Started\n\n## Instance: <span style=\"color: #0000FF\"> {instanceName} </span>\n\nWelcome to the Azure Monitoring Packs. This workbook was designed to help you configuring the solution. Here you can:\n- Enable/Disable monitoring packs for one or more VMs or services. You may also disable all the monitoring for a specific server or service. This will remove the tags and the rule associations. For services, right now, the alerts wont be deleted by themselves.\n- Enable/Disable Alerts in bulk. You can also assign a different Action group to one or more alerts or delete the rules**\n- Check policy status and start remediation if required. By clicking in a policy, you can also assign that policy to another scope.\n- Check Monitor pack associations.\n- Review discovered applications (VMs only)\n- Manage agent configuration (install/remove)\n\n## Link to your managed [Grafana]({GrafanaInstance:label}) instance, if you enabled it. Make sure to property set permissions before attemping to access it.\n\n## <span style=\"color: #FF0000\">If this is the first time using this solution, please configure the parameters in the ***Configuration*** tab and save the workbook for proper functionality.</span>\n\n\n## Please check the Monitoring Packs repository for updates. [Azure MONitor STARter Packs](http://github.com/Azure/AzureMonitorStarterPacks)\n## Also check the Azure Monitor Baseline Alerts ([AMBA](http://aka.ms/amba)) website for the details on the alerts.\n\n\n\n\n\n"
                          },
                          "conditionalVisibility": {
                            "parameterName": "tabSelection",
                            "comparison": "isEqualTo",
                            "value": "gettingstarted"
                          },
                          "name": "textGetStarted"
                        },
                        {
                          "type": 12,
                          "content": {
                            "version": "NotebookGroup/1.0",
                            "groupType": "editable",
                            "items": [
                              {
                                "type": 11,
                                "content": {
                                  "version": "LinkItem/1.0",
                                  "style": "tabs",
                                  "links": [
                                    {
                                      "id": "04e679ee-16ae-46f6-a85b-d47751c0bcca",
                                      "cellValue": "dashTab",
                                      "linkTarget": "parameter",
                                      "linkLabel": "Active Alerts",
                                      "subTarget": "alerts",
                                      "preText": "",
                                      "style": "link"
                                    },
                                    {
                                      "id": "a4b4c83e-fce7-48e2-95ce-acf12c050eaa",
                                      "cellValue": "dashTab",
                                      "linkTarget": "parameter",
                                      "linkLabel": "IaaS Summary",
                                      "subTarget": "iaas",
                                      "style": "link"
                                    },
                                    {
                                      "id": "4e01b5fe-51d5-4ba4-9d3c-6f5b5ef2d93c",
                                      "cellValue": "dashTab",
                                      "linkTarget": "parameter",
                                      "linkLabel": "Services Summary",
                                      "subTarget": "paas",
                                      "style": "link"
                                    }
                                  ]
                                },
                                "name": "links - 3 - Copy"
                              },
                              {
                                "type": 12,
                                "content": {
                                  "version": "NotebookGroup/1.0",
                                  "groupType": "editable",
                                  "items": [
                                    {
                                      "type": 1,
                                      "content": {
                                        "json": "## Active Alerts List\n\nThis tab shows all Monitoring Packs related alerts that are currently active.",
                                        "style": "info"
                                      },
                                      "conditionalVisibility": {
                                        "parameterName": "showHelp",
                                        "comparison": "isEqualTo",
                                        "value": "yes"
                                      },
                                      "name": "text - Summary - Active Alerts"
                                    },
                                    {
                                      "type": 9,
                                      "content": {
                                        "version": "KqlParameterItem/1.0",
                                        "crossComponentResources": [
                                          "value::tenant"
                                        ],
                                        "parameters": [
                                          {
                                            "id": "6fa5185a-2f1d-4fbd-8ce7-9050d66312a6",
                                            "version": "KqlParameterItem/1.0",
                                            "name": "alertsInstance",
                                            "label": "Instance",
                                            "type": 2,
                                            "isRequired": true,
                                            "multiSelect": true,
                                            "quote": "'",
                                            "delimiter": ",",
                                            "query": "resources\r\n| where type =~ 'microsoft.web/sites' and ['kind'] =~ 'functionapp'\r\n| where isnotempty(tags.MonitorStarterPacksComponents)\r\n| project instanceNames=tags.instanceName",
                                            "crossComponentResources": [
                                              "value::tenant"
                                            ],
                                            "typeSettings": {
                                              "additionalResourceOptions": [],
                                              "showDefault": false
                                            },
                                            "queryType": 1,
                                            "resourceType": "microsoft.resources/tenants",
                                            "value": null
                                          }
                                        ],
                                        "style": "above",
                                        "queryType": 1,
                                        "resourceType": "microsoft.resources/tenants"
                                      },
                                      "name": "parameters - 6"
                                    },
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "alertsmanagementresources\n| where ['type'] == 'microsoft.alertsmanagement/alerts'\n| project ['Alert Id']=id,resourceId=properties.context.context.resourceId, alertRule=tolower(tostring(properties.essentials.alertRule)), status=properties.context.status,severity=properties.context.context.severity\n| where isnotempty(alertRule)\n| join (resources\n| where type == \"microsoft.insights/scheduledqueryrules\" or type ==\"microsoft.insights/metricalerts\" or type == 'microsoft.insights/activitylogalerts'\n| where isnotempty(tags.MonitorStarterPacks) and tags.instanceName in ({alertsInstance})\n| extend alertRule=tolower(tostring(['id']))) on alertRule\n| project id, ['Alert Name']=name,['Details']=['Alert Id'], Status=status, Resource=resourceId, Sev=severity\n| where Status=='Activated'\n",
                                        "size": 0,
                                        "title": "Active Alerts",
                                        "exportedParameters": [
                                          {
                                            "fieldName": "Details",
                                            "parameterName": "selectedAlertId",
                                            "parameterType": 5
                                          }
                                        ],
                                        "queryType": 1,
                                        "resourceType": "microsoft.resources/tenants",
                                        "crossComponentResources": [
                                          "value::tenant"
                                        ],
                                        "gridSettings": {
                                          "formatters": [
                                            {
                                              "columnMatch": "Details",
                                              "formatter": 7,
                                              "formatOptions": {
                                                "linkTarget": "OpenBlade",
                                                "linkLabel": "Details",
                                                "linkIsContextBlade": true,
                                                "bladeOpenContext": {
                                                  "bladeName": "AlertDetails.ReactView",
                                                  "extensionName": "Microsoft_Azure_Monitoring_Alerts",
                                                  "bladeJsonParameters": "{\n    \"alertId\": \"{selectedAlertId}\",\n    \"invokedFrom\": \"CopyLinkFeature\"\n}"
                                                }
                                              }
                                            },
                                            {
                                              "columnMatch": "Status",
                                              "formatter": 18,
                                              "formatOptions": {
                                                "thresholdsOptions": "icons",
                                                "thresholdsGrid": [
                                                  {
                                                    "operator": "==",
                                                    "thresholdValue": "Activated",
                                                    "representation": "up",
                                                    "text": "{0}{1}"
                                                  },
                                                  {
                                                    "operator": "Default",
                                                    "thresholdValue": null,
                                                    "representation": "success",
                                                    "text": "{0}{1}"
                                                  }
                                                ]
                                              }
                                            },
                                            {
                                              "columnMatch": "Resource",
                                              "formatter": 13,
                                              "formatOptions": {
                                                "linkTarget": "Resource",
                                                "linkIsContextBlade": true,
                                                "showIcon": true
                                              }
                                            },
                                            {
                                              "columnMatch": "Sev",
                                              "formatter": 18,
                                              "formatOptions": {
                                                "thresholdsOptions": "icons",
                                                "thresholdsGrid": [
                                                  {
                                                    "operator": "==",
                                                    "thresholdValue": "1",
                                                    "representation": "Sev1",
                                                    "text": "{0}{1}"
                                                  },
                                                  {
                                                    "operator": "==",
                                                    "thresholdValue": "2",
                                                    "representation": "Sev2",
                                                    "text": "{0}{1}"
                                                  },
                                                  {
                                                    "operator": "==",
                                                    "thresholdValue": "3",
                                                    "representation": "Sev3",
                                                    "text": "{0}{1}"
                                                  },
                                                  {
                                                    "operator": "==",
                                                    "thresholdValue": "4",
                                                    "representation": "Sev4",
                                                    "text": "{0}{1}"
                                                  },
                                                  {
                                                    "operator": "==",
                                                    "thresholdValue": "0",
                                                    "representation": "Sev0",
                                                    "text": "{0}{1}"
                                                  },
                                                  {
                                                    "operator": "Default",
                                                    "thresholdValue": null,
                                                    "representation": "unknown",
                                                    "text": "{0}{1}"
                                                  }
                                                ]
                                              }
                                            },
                                            {
                                              "columnMatch": "Alert Id",
                                              "formatter": 7,
                                              "formatOptions": {
                                                "linkTarget": "Resource",
                                                "linkLabel": "Details",
                                                "linkIsContextBlade": true
                                              }
                                            },
                                            {
                                              "columnMatch": "Target",
                                              "formatter": 13,
                                              "formatOptions": {
                                                "linkTarget": null,
                                                "showIcon": true
                                              }
                                            }
                                          ]
                                        }
                                      },
                                      "customWidth": "66",
                                      "name": "activeAlertsquery"
                                    },
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "alertsmanagementresources\n| where ['type'] == 'microsoft.alertsmanagement/alerts'\n| project ['Alert Id']=id,resourceId=properties.context.context.resourceId, alertRule=tolower(tostring(properties.essentials.alertRule)), status=properties.context.status\n| where isnotempty(alertRule)\n| join (resources\n| where type == \"microsoft.insights/scheduledqueryrules\" or type ==\"microsoft.insights/metricalerts\" or type == 'microsoft.insights/activitylogalerts'\n| where isnotempty(tags.MonitorStarterPacks) and tags.instanceName in ({alertsInstance})\n| extend alertRule=tolower(tostring(['id']))) on alertRule\n| summarize count() by AlertType=type\n\n",
                                        "size": 0,
                                        "queryType": 1,
                                        "resourceType": "microsoft.resources/tenants",
                                        "crossComponentResources": [
                                          "value::tenant"
                                        ],
                                        "visualization": "piechart"
                                      },
                                      "customWidth": "33",
                                      "name": "activeAlertsQueryPie"
                                    }
                                  ]
                                },
                                "conditionalVisibility": {
                                  "parameterName": "dashTab",
                                  "comparison": "isEqualTo",
                                  "value": "alerts"
                                },
                                "name": "groupDashAlerts"
                              },
                              {
                                "type": 12,
                                "content": {
                                  "version": "NotebookGroup/1.0",
                                  "groupType": "editable",
                                  "items": [
                                    {
                                      "type": 1,
                                      "content": {
                                        "json": "## IaaS Information\n\nThe summary below shows details related to the IaaS Monitoring packs.",
                                        "style": "info"
                                      },
                                      "conditionalVisibility": {
                                        "parameterName": "showHelp",
                                        "comparison": "isEqualTo",
                                        "value": "yes"
                                      },
                                      "name": "text - Summary - IaaS"
                                    },
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "resources | where type =~ 'microsoft.hybridcompute/machines' or type =~ 'microsoft.compute/virtualmachines'\n| extend MonitorStatus=iff(isnotempty(tostring(tags.MonitorStarterPacks)),'Monitored','Not Monitored')\n| summarize count() by MonitorStatus",
                                        "size": 1,
                                        "title": "Monitoring Status (Tags)",
                                        "queryType": 1,
                                        "resourceType": "microsoft.resources/tenants",
                                        "crossComponentResources": [
                                          "value::tenant"
                                        ],
                                        "visualization": "piechart",
                                        "chartSettings": {
                                          "seriesLabelSettings": [
                                            {
                                              "seriesName": "Monitored",
                                              "color": "green"
                                            },
                                            {
                                              "seriesName": "Not Monitored",
                                              "color": "orange"
                                            }
                                          ]
                                        }
                                      },
                                      "customWidth": "33",
                                      "name": "Monitoring Status Tags",
                                      "styleSettings": {
                                        "showBorder": true
                                      }
                                    },
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "Resources\n| where type == 'microsoft.compute/virtualmachines'\n| extend\n    JoinID = toupper(id)\n| join kind=leftouter(\n    Resources\n    | where ( type == 'microsoft.compute/virtualmachines/extensions') and name in ('AzureMonitorLinuxAgent', 'AzureMonitorWindowsAgent')\n    | extend\n        VMId = toupper(substring(id, 0, indexof(id, '/extensions'))),\n        ExtensionName = name\n) on $left.JoinID == $right.VMId\n| union (Resources\n| where type == 'microsoft.hybridcompute/machines'\n| extend\n    JoinID = toupper(id)\n| join kind=leftouter(\n    Resources\n    | where type == 'microsoft.hybridcompute/machines/extensions' and name in ('AzureMonitorLinuxAgent', 'AzureMonitorWindowsAgent')\n    | extend\n        VMId = toupper(substring(id, 0, indexof(id, '/extensions'))),\n        ExtensionName = name\n) on $left.JoinID == $right.VMId)\n| summarize count() by AgentInstalled=iff(isempty(ExtensionName),\"No\",\"Yes\")",
                                        "size": 1,
                                        "title": "Agent Install Status",
                                        "queryType": 1,
                                        "resourceType": "microsoft.resources/tenants",
                                        "crossComponentResources": [
                                          "value::tenant"
                                        ],
                                        "visualization": "piechart",
                                        "chartSettings": {
                                          "seriesLabelSettings": [
                                            {
                                              "seriesName": "Yes",
                                              "label": "AMA Installed",
                                              "color": "green"
                                            },
                                            {
                                              "seriesName": "No",
                                              "label": "No AMA",
                                              "color": "red"
                                            }
                                          ]
                                        }
                                      },
                                      "customWidth": "33",
                                      "name": "agentInstallStatus",
                                      "styleSettings": {
                                        "showBorder": true
                                      }
                                    },
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "insightsresources\n| where type == \"microsoft.insights/datacollectionruleassociations\"\n| extend resourceId=split(id,'/providers/Microsoft.Insights/')[0]\n| where isnotnull(properties.dataCollectionRuleId)\n| project rulename=tostring(split(properties.dataCollectionRuleId,\"/\")[8]),resourceName=tostring(split(resourceId,\"/\")[8]),resourceId//ruleId=properties.dataCollectionRuleId\n| join (resources\n| where type == \"microsoft.insights/datacollectionrules\"\n| extend MPs=tostring(['tags'].MonitorStarterPacks)\n| where isnotempty(MPs) //or properties.dataSources.performanceCounters[0].name == 'VMInsightsPerfCounters'\n| summarize by Pack=MPs,rulename=tostring(name)) on rulename\n| project-away rulename,rulename1,resourceId\n| summarize Associated=count() by Pack\n| sort by Pack asc",
                                        "size": 1,
                                        "title": "Servers/Pack (Association)",
                                        "queryType": 1,
                                        "resourceType": "microsoft.resources/tenants",
                                        "crossComponentResources": [
                                          "value::tenant"
                                        ],
                                        "visualization": "piechart",
                                        "tileSettings": {
                                          "showBorder": false,
                                          "titleContent": {
                                            "columnMatch": "Pack",
                                            "formatter": 1
                                          },
                                          "leftContent": {
                                            "columnMatch": "Associated",
                                            "formatter": 12,
                                            "formatOptions": {
                                              "palette": "auto"
                                            },
                                            "numberFormat": {
                                              "unit": 17,
                                              "options": {
                                                "maximumSignificantDigits": 3,
                                                "maximumFractionDigits": 2
                                              }
                                            }
                                          }
                                        },
                                        "mapSettings": {
                                          "locInfo": "LatLong",
                                          "sizeSettings": "Associated",
                                          "sizeAggregation": "Sum",
                                          "legendMetric": "Associated",
                                          "legendAggregation": "Sum",
                                          "itemColorSettings": {
                                            "type": "heatmap",
                                            "colorAggregation": "Sum",
                                            "nodeColorField": "Associated",
                                            "heatmapPalette": "greenRed"
                                          }
                                        }
                                      },
                                      "customWidth": "33",
                                      "name": "AssociatedResourceStatsperTag - Copy - Copy",
                                      "styleSettings": {
                                        "showBorder": true
                                      }
                                    },
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "insightsresources\n| where type == \"microsoft.insights/datacollectionruleassociations\"\n| extend resourceId=split(id,'/providers/Microsoft.Insights/')[0]\n| where isnotnull(properties.dataCollectionRuleId)\n| project rulename=tostring(split(properties.dataCollectionRuleId,\"/\")[8]),resourceName=tostring(split(resourceId,\"/\")[8]),resourceId//ruleId=properties.dataCollectionRuleId\n| join (resources\n| where type == \"microsoft.insights/datacollectionrules\"\n| extend MPs=tostring(['tags'].MonitorStarterPacks)\n| where isnotempty(MPs) //or properties.dataSources.performanceCounters[0].name == 'VMInsightsPerfCounters'\n| summarize by Pack=MPs,rulename=tostring(name)) on rulename\n| project-away rulename,rulename1,resourceId\n| summarize Tagged=count() by Pack\n| sort by Pack asc\n\n\n",
                                        "size": 1,
                                        "title": "Tagged Resources per Tag",
                                        "queryType": 1,
                                        "resourceType": "microsoft.resources/tenants",
                                        "crossComponentResources": [
                                          "value::tenant"
                                        ],
                                        "visualization": "tiles",
                                        "tileSettings": {
                                          "showBorder": false,
                                          "titleContent": {
                                            "columnMatch": "Pack",
                                            "formatter": 1
                                          },
                                          "leftContent": {
                                            "columnMatch": "Tagged",
                                            "formatter": 12,
                                            "formatOptions": {
                                              "palette": "auto"
                                            },
                                            "numberFormat": {
                                              "unit": 17,
                                              "options": {
                                                "maximumSignificantDigits": 3,
                                                "maximumFractionDigits": 2
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "customWidth": "33",
                                      "name": "taggedResourceStatsperTag",
                                      "styleSettings": {
                                        "showBorder": true
                                      }
                                    },
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "insightsresources\n| where type == \"microsoft.insights/datacollectionruleassociations\"\n| extend resourceId=split(id,'/providers/Microsoft.Insights/')[0]\n| where isnotnull(properties.dataCollectionRuleId)\n| project rulename=tostring(split(properties.dataCollectionRuleId,\"/\")[8]),resourceName=tostring(split(resourceId,\"/\")[8]),resourceId//ruleId=properties.dataCollectionRuleId\n| join (resources\n| where type == \"microsoft.insights/datacollectionrules\"\n| extend MPs=tostring(['tags'].MonitorStarterPacks)\n| where isnotempty(MPs) //or properties.dataSources.performanceCounters[0].name == 'VMInsightsPerfCounters'\n| summarize by Pack=MPs,rulename=tostring(name)) on rulename\n| project-away rulename,rulename1,resourceId\n| summarize Associated=count() by Pack\n| sort by Pack asc",
                                        "size": 1,
                                        "title": "Associated Servers per Pack",
                                        "queryType": 1,
                                        "resourceType": "microsoft.resources/tenants",
                                        "crossComponentResources": [
                                          "value::tenant"
                                        ],
                                        "visualization": "tiles",
                                        "tileSettings": {
                                          "showBorder": false,
                                          "titleContent": {
                                            "columnMatch": "Pack",
                                            "formatter": 1
                                          },
                                          "leftContent": {
                                            "columnMatch": "Associated",
                                            "formatter": 12,
                                            "formatOptions": {
                                              "palette": "auto"
                                            },
                                            "numberFormat": {
                                              "unit": 17,
                                              "options": {
                                                "maximumSignificantDigits": 3,
                                                "maximumFractionDigits": 2
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "customWidth": "33",
                                      "name": "AssociatedResourceStatsperTag - Copy",
                                      "styleSettings": {
                                        "showBorder": true
                                      }
                                    }
                                  ]
                                },
                                "conditionalVisibility": {
                                  "parameterName": "dashTab",
                                  "comparison": "isEqualTo",
                                  "value": "iaas"
                                },
                                "name": "groupDashboardIaaS"
                              },
                              {
                                "type": 3,
                                "content": {
                                  "version": "KqlItem/1.0",
                                  "query": "{\"version\":\"CustomEndpoint/1.0\",\"data\":null,\"headers\":[{\"key\":\"x-functions-key\",\"value\":\"{configKey}\"}],\"method\":\"GET\",\"url\":\"https://{FunctionApps:name}.azurewebsites.net/api/config?Action=getSupportedServices&Type=PaaS\",\"contentType\":\"text/plain\",\"urlParams\":[{\"key\":\"\",\"value\":\"\"}],\"transformers\":null}",
                                  "size": 0,
                                  "queryType": 10
                                },
                                "conditionalVisibilities": [
                                  {
                                    "parameterName": "dashTab",
                                    "comparison": "isEqualTo",
                                    "value": "paas"
                                  },
                                  {
                                    "parameterName": "showHidden",
                                    "comparison": "isEqualTo",
                                    "value": "yes"
                                  }
                                ],
                                "name": "queryServiceTags"
                              },
                              {
                                "type": 3,
                                "content": {
                                  "version": "KqlItem/1.0",
                                  "query": "{\"version\":\"CustomEndpoint/1.0\",\"data\":null,\"headers\":[{\"key\":\"x-functions-key\",\"value\":\"{configKey}\"}],\"method\":\"GET\",\"url\":\"https://{FunctionApps:name}.azurewebsites.net/api/config?Action=getSupportedServices&Type=Platform\",\"contentType\":\"text/plain\",\"urlParams\":[{\"key\":\"\",\"value\":\"\"}],\"transformers\":null}",
                                  "size": 0,
                                  "queryType": 10
                                },
                                "conditionalVisibilities": [
                                  {
                                    "parameterName": "dashTab",
                                    "comparison": "isEqualTo",
                                    "value": "paas"
                                  },
                                  {
                                    "parameterName": "showHidden",
                                    "comparison": "isEqualTo",
                                    "value": "yes"
                                  }
                                ],
                                "name": "queryServiceTags - Platform"
                              },
                              {
                                "type": 3,
                                "content": {
                                  "version": "KqlItem/1.0",
                                  "query": "resources\n| where tolower(type) in (\"microsoft.insights/metricalerts\")\n| where isnotempty(tags.MonitorStarterPacks)\n| project nameSpace=tolower(strcat(tostring(split(properties.scopes[0],\"/\")[-3]),\"/\",tostring(split(properties.scopes[0],\"/\")[-2]))),Target=split(properties.scopes[0],\"/\")[-1]\n| union (resources\n| where tolower(type) in (\"microsoft.insights/activitylogalerts\")\n| where isnotempty(tags.MonitorStarterPacks)\n| project nameSpace=tolower(strcat(tostring(split(properties.scopes[0],\"/\")[-3]),\"/\",tostring(split(properties.scopes[0],\"/\")[-2]))),Target=split(properties.scopes[0],\"/\")[-1])\n| distinct tostring(Target),nameSpace\n| summarize Total=count() by nameSpace",
                                  "size": 0,
                                  "queryType": 1,
                                  "resourceType": "microsoft.resources/tenants",
                                  "crossComponentResources": [
                                    "value::tenant"
                                  ],
                                  "visualization": "piechart"
                                },
                                "conditionalVisibility": {
                                  "parameterName": "dashTab",
                                  "comparison": "isEqualTo",
                                  "value": "paas"
                                },
                                "name": "query - resourcestomerge - nonIaaS"
                              }
                            ]
                          },
                          "conditionalVisibility": {
                            "parameterName": "tabSelection",
                            "comparison": "isEqualTo",
                            "value": "status"
                          },
                          "name": "dashboardgroup"
                        },
                        {
                          "type": 1,
                          "content": {
                            "json": "## Server Monitoring Setup\n\nSelect servers on the right to assign a pack. Once the backend is done with the assigning, the server will show on the left side grid.\n\nOn the left side grid, the monitoring can be updated to add more packs, as well as to remove a specific pack or remove any monitoring altogether from the server.",
                            "style": "info"
                          },
                          "conditionalVisibilities": [
                            {
                              "parameterName": "tabSelection",
                              "comparison": "isEqualTo",
                              "value": "discovery"
                            },
                            {
                              "parameterName": "showHelp",
                              "comparison": "isEqualTo",
                              "value": "yes"
                            }
                          ],
                          "name": "serversMonitoringHelptext"
                        },
                        {
                          "type": 12,
                          "content": {
                            "version": "NotebookGroup/1.0",
                            "groupType": "editable",
                            "title": "Servers - {instanceName} instance",
                            "items": [
                              {
                                "type": 1,
                                "content": {
                                  "json": "When Monitoring is first enabled, the Azure Monitoring Agent will also be installed to the selected servers.",
                                  "style": "info"
                                },
                                "name": "text - 3"
                              },
                              {
                                "type": 3,
                                "content": {
                                  "version": "KqlItem/1.0",
                                  "query": "insightsresources\n| where type == \"microsoft.insights/datacollectionruleassociations\"\n| extend resourceId=split(id,'/providers/Microsoft.Insights/')[0]\n| where isnotnull(properties.dataCollectionRuleId)\n| project rulename=tostring(split(properties.dataCollectionRuleId,\"/\")[8]),resourceName=tostring(split(resourceId,\"/\")[8]),resourceId=tolower(tostring(resourceId))//ruleId=properties.dataCollectionRuleId\n| join kind= inner  (\nresources\n| where type == \"microsoft.insights/datacollectionrules\"\n| extend MPs=tostring(['tags'].MonitorStarterPacks)\n| where isnotempty(MPs) //or properties.dataSources.performanceCounters[0].name == 'VMInsightsPerfCounters'\n| where MPs !in~ ('WinDisc', 'LxDisc')\n| summarize by Pack=MPs,rulename=tostring(name)) on rulename\n| summarize by resourceId, Pack\n| summarize Packs=tostring(make_list(Pack)) by resourceId\n| project Packs2=tostring(Packs), resourceId",
                                  "size": 0,
                                  "queryType": 1,
                                  "resourceType": "microsoft.resources/tenants",
                                  "crossComponentResources": [
                                    "value::tenant"
                                  ],
                                  "gridSettings": {
                                    "formatters": [
                                      {
                                        "columnMatch": "Packs",
                                        "formatter": 1
                                      }
                                    ]
                                  }
                                },
                                "conditionalVisibility": {
                                  "parameterName": "showHidden",
                                  "comparison": "isEqualTo",
                                  "value": "yes"
                                },
                                "showPin": false,
                                "name": "query - associatedVMs"
                              },
                              {
                                "type": 3,
                                "content": {
                                  "version": "KqlItem/1.0",
                                  "query": "resources | where type =~ 'microsoft.hybridcompute/machines' \n| extend MP=tolower(tags.MonitorStarterPacks), instanceName=tolower(tags.instanceName)\n| where isnotempty(MP) and instanceName == '{instanceName}' \n| project Resource=id,['Resource Group']=resourceGroup,Packs=tags.MonitorStarterPacks, OS=properties.osType, subscriptionId, Location=location\n| union (resources | where type =~ 'microsoft.compute/virtualmachines' \n| extend MP=tolower(tags.MonitorStarterPacks), instanceName=tolower(tags.instanceName)\n| where isnotempty(MP) and instanceName == '{instanceName}' and (tolower(tags.Vendor) != 'databricks')\n| project Resource=id,['Resource Group']=resourceGroup,Packs=tags.MonitorStarterPacks, OS=properties.storageProfile.osDisk.osType, subscriptionId, Location=location)\n",
                                  "size": 0,
                                  "queryType": 1,
                                  "resourceType": "microsoft.resources/tenants",
                                  "crossComponentResources": [
                                    "value::tenant"
                                  ],
                                  "gridSettings": {
                                    "formatters": [
                                      {
                                        "columnMatch": "Packs",
                                        "formatter": 1
                                      },
                                      {
                                        "columnMatch": "OS",
                                        "formatter": 1
                                      },
                                      {
                                        "columnMatch": "Subscription",
                                        "formatter": 13,
                                        "formatOptions": {
                                          "linkTarget": null,
                                          "showIcon": true
                                        }
                                      }
                                    ]
                                  }
                                },
                                "conditionalVisibility": {
                                  "parameterName": "showHidden",
                                  "comparison": "isEqualTo",
                                  "value": "yes"
                                },
                                "showPin": false,
                                "name": "query - taggedVMs"
                              },
                              {
                                "type": 12,
                                "content": {
                                  "version": "NotebookGroup/1.0",
                                  "groupType": "editable",
                                  "items": [
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "{\"version\":\"Merge/1.0\",\"merges\":[{\"id\":\"964f21b6-ee11-43c6-a6e2-4119d566812c\",\"mergeType\":\"leftouter\",\"leftTable\":\"query - taggedVMs\",\"rightTable\":\"query - associatedVMs\",\"leftColumn\":\"Resource\",\"rightColumn\":\"resourceId\"}],\"projectRename\":[{\"originalName\":\"[query - associatedVMs].Packs2\",\"mergedName\":\"Associations\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - associatedVMs].MPs\",\"mergedName\":\"MPs\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - taggedVMs].Resource\",\"mergedName\":\"Resource\",\"fromId\":\"964f21b6-ee11-43c6-a6e2-4119d566812c\"},{\"originalName\":\"[query - taggedVMs].Resource Group\",\"mergedName\":\"Resource Group\",\"fromId\":\"964f21b6-ee11-43c6-a6e2-4119d566812c\"},{\"originalName\":\"[query - taggedVMs].Packs\",\"mergedName\":\"Packs\",\"fromId\":\"964f21b6-ee11-43c6-a6e2-4119d566812c\"},{\"originalName\":\"[query - taggedVMs].OS\",\"mergedName\":\"OS\",\"fromId\":\"964f21b6-ee11-43c6-a6e2-4119d566812c\"},{\"originalName\":\"[query - taggedVMs].Location\",\"mergedName\":\"Location\",\"fromId\":\"964f21b6-ee11-43c6-a6e2-4119d566812c\"},{\"originalName\":\"[query - taggedVMs].Subscription\",\"mergedName\":\"Subscription\",\"fromId\":\"964f21b6-ee11-43c6-a6e2-4119d566812c\"},{\"originalName\":\"[query - associatedVMs].resourceId\",\"mergedName\":\"resourceId\",\"fromId\":\"964f21b6-ee11-43c6-a6e2-4119d566812c\"},{\"originalName\":\"[query - taggedVMs].subscriptionId\",\"mergedName\":\"subscriptionId\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - taggedVMs].instanceName\",\"mergedName\":\"instanceName\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - taggedVMs].MP\",\"mergedName\":\"MP\",\"fromId\":\"unknown\"}]}",
                                        "size": 0,
                                        "title": "Monitored Machines",
                                        "exportMultipleValues": true,
                                        "exportedParameters": [
                                          {
                                            "fieldName": "",
                                            "parameterName": "taggedVMs",
                                            "parameterType": 1,
                                            "quote": ""
                                          }
                                        ],
                                        "showExportToExcel": true,
                                        "queryType": 7,
                                        "visualization": "table",
                                        "gridSettings": {
                                          "formatters": [
                                            {
                                              "columnMatch": "Associations",
                                              "formatter": 18,
                                              "formatOptions": {
                                                "linkColumn": "Associations",
                                                "linkTarget": "CellDetails",
                                                "linkIsContextBlade": true,
                                                "thresholdsOptions": "icons",
                                                "thresholdsGrid": [
                                                  {
                                                    "operator": "is Empty",
                                                    "representation": "cancelled",
                                                    "text": "",
                                                    "tooltipFormat": {
                                                      "tooltip": "{0}{1}"
                                                    }
                                                  },
                                                  {
                                                    "operator": "Default",
                                                    "thresholdValue": null,
                                                    "representation": "success",
                                                    "text": "",
                                                    "tooltipFormat": {
                                                      "tooltip": "{0}{1}"
                                                    }
                                                  }
                                                ]
                                              },
                                              "tooltipFormat": {
                                                "tooltip": "Click to see associations."
                                              }
                                            },
                                            {
                                              "columnMatch": "resourceId",
                                              "formatter": 5
                                            },
                                            {
                                              "columnMatch": "subscriptionId",
                                              "formatter": 15,
                                              "formatOptions": {
                                                "linkTarget": null,
                                                "showIcon": true
                                              }
                                            },
                                            {
                                              "columnMatch": "Associated Packs",
                                              "formatter": 18,
                                              "formatOptions": {
                                                "thresholdsOptions": "icons",
                                                "thresholdsGrid": [
                                                  {
                                                    "operator": "is Empty",
                                                    "representation": "2",
                                                    "text": "{0}{1}"
                                                  },
                                                  {
                                                    "operator": "Default",
                                                    "thresholdValue": null,
                                                    "representation": "success",
                                                    "text": "{0}{1}"
                                                  }
                                                ]
                                              }
                                            }
                                          ],
                                          "filter": true
                                        }
                                      },
                                      "showPin": false,
                                      "name": "query-mergeVMs",
                                      "styleSettings": {
                                        "showBorder": true
                                      }
                                    },
                                    {
                                      "type": 9,
                                      "content": {
                                        "version": "KqlParameterItem/1.0",
                                        "parameters": [
                                          {
                                            "id": "2415a274-9657-4eb6-9179-92c0cdb31728",
                                            "version": "KqlParameterItem/1.0",
                                            "name": "PackTagsLeft",
                                            "label": "Add/Remove",
                                            "type": 2,
                                            "isGlobal": true,
                                            "multiSelect": true,
                                            "quote": "",
                                            "delimiter": ",",
                                            "query": "{\"version\":\"CustomEndpoint/1.0\",\"data\":null,\"headers\":[{\"key\":\"x-functions-key\",\"value\":\"{configKey}\"}],\"method\":\"GET\",\"url\":\"https://{FunctionApps:name}.azurewebsites.net/api/config\",\"contentType\":\"text/plain\",\"urlParams\":[{\"key\":\"Action\",\"value\":\"getavailableIaaSPacks\"}],\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.*\",\"columns\":[]}}]}",
                                            "typeSettings": {
                                              "additionalResourceOptions": [],
                                              "showDefault": false
                                            },
                                            "queryType": 10
                                          }
                                        ],
                                        "style": "pills",
                                        "queryType": 10
                                      },
                                      "customWidth": "25",
                                      "conditionalVisibility": {
                                        "parameterName": "taggedVMs",
                                        "comparison": "isNotEqualTo"
                                      },
                                      "name": "param-IaaS-tagged"
                                    },
                                    {
                                      "type": 11,
                                      "content": {
                                        "version": "LinkItem/1.0",
                                        "style": "paragraph",
                                        "links": [
                                          {
                                            "id": "36b65f94-1c3d-4e7a-b771-677a2081d288",
                                            "cellValue": "",
                                            "linkTarget": "ArmAction",
                                            "linkLabel": "Remove Monitoring for {PackTagsLeft} Pack(s)",
                                            "preText": "",
                                            "style": "primary",
                                            "linkIsContextBlade": true,
                                            "armActionContext": {
                                              "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                              "headers": [],
                                              "params": [
                                                {
                                                  "key": "action",
                                                  "value": "removeTag"
                                                }
                                              ],
                                              "body": "{ \n  \"function\": \"packmgmt\",\n  \"functionBody\" : {\n    \"Action\":\"RemoveTag\",\n    \"Resources\": [{taggedVMs}],\n    \"Pack\": \"{PackTagsLeft}\",\n    \"PackType\": \"IaaS\",\n    \"WorkspaceId\": \"{Workspace}\",\n    \"DefaultAG\": \"{DefaultAG}\"\n  }\n}",
                                              "httpMethod": "POST",
                                              "title": "Remove Monitoring",
                                              "description": "# Please confirm the change.\n\nRemove Monitoring for {PackTagsLeft} Pack(s) \n\nServers:\n\n{taggedVMs}",
                                              "runLabel": "Confirm"
                                            }
                                          },
                                          {
                                            "id": "550df977-06a8-4c40-9cd3-aba6286ebcdf",
                                            "linkTarget": "ArmAction",
                                            "linkLabel": "Add Monitoring for {PackTagsLeft} Pack(s)",
                                            "style": "primary",
                                            "linkIsContextBlade": true,
                                            "armActionContext": {
                                              "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                              "headers": [],
                                              "params": [],
                                              "body": "{ \n  \"function\": \"packmgmt\",\n  \"functionBody\" : {\n    \"Action\":\"AddPack\",\n    \"Resources\": [{taggedVMs}],\n    \"Pack\": \"{PackTagsLeft}\",\n    \"PackType\": \"IaaS\",\n    \"WorkspaceId\": \"{Workspace}\",\n    \"DefaultAG\": \"{DefaultAG}\"\n  }\n}",
                                              "httpMethod": "POST",
                                              "title": "Add Monitoring",
                                              "description": "# Please confirm the change.\n\nAdd Monitoring for {PackTagsLeft} Pack(s)",
                                              "actionName": "AddMonitoringPack",
                                              "runLabel": "Confirm"
                                            }
                                          },
                                          {
                                            "id": "3b1af630-47ab-43e9-a5b2-d2f2e21880d0",
                                            "linkTarget": "ArmAction",
                                            "linkLabel": "Remove All Monitoring for VM",
                                            "style": "primary",
                                            "linkIsContextBlade": true,
                                            "armActionContext": {
                                              "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                              "headers": [],
                                              "params": [],
                                              "body": "{ \n  \"function\": \"packmgmt\",\n  \"functionBody\" : {\n    \"Action\":\"RemoveTag\",\n    \"Resources\": [{taggedVMs}],\n    \"Pack\": \"All\",\n    \"PackType\": \"IaaS\"\n  }\n}",
                                              "httpMethod": "POST",
                                              "title": "Remove All Monitoring",
                                              "description": "# Please confirm the change.\n\nRemove All Monitoring for {PackTagsLeft} Pack(s)",
                                              "actionName": "RemoveAllMonitoring",
                                              "runLabel": "Confirm"
                                            }
                                          }
                                        ]
                                      },
                                      "customWidth": "75",
                                      "conditionalVisibility": {
                                        "parameterName": "taggedVMs",
                                        "comparison": "isNotEqualTo"
                                      },
                                      "name": "links - 1"
                                    }
                                  ],
                                  "exportParameters": true
                                },
                                "customWidth": "50",
                                "conditionalVisibility": {
                                  "parameterName": "tabSelection",
                                  "comparison": "isEqualTo",
                                  "value": "discovery"
                                },
                                "name": "TaggedGroup"
                              },
                              {
                                "type": 12,
                                "content": {
                                  "version": "NotebookGroup/1.0",
                                  "groupType": "editable",
                                  "items": [
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "resources | where type =~ 'microsoft.hybridcompute/machines' | where isempty(tolower(tags.MonitorStarterPacks))\n| project Resource=id,['Resource Group']=resourceGroup, OS=properties.osType, subscriptionId, Location=location\n| union (resources | where type =~ 'microsoft.compute/virtualmachines' \n| where isempty(tolower(tags.MonitorStarterPacks)) \n| project Resource=id,['Resource Group']=resourceGroup, OS=properties.storageProfile.osDisk.osType, subscriptionId, Location=location)\n| union (resources | where type =~ 'microsoft.compute/virtualmachinescalesets' and properties.orchestrationMode == 'Uniform'\n| where isempty(tolower(tags.MonitorStarterPacks)) \n| project Resource=id,['Resource Group']=resourceGroup, OS=properties.virtualMachineProfile.storageProfile.osDisk.osType, subscriptionId, Location=location)\n| join kind= leftouter  (\n    resourcecontainers| where type =~ 'microsoft.resources/subscriptions'\n    | project Subscription=name,subscriptionId\n    ) \non subscriptionId| project-away subscriptionId, subscriptionId1",
                                        "size": 0,
                                        "title": "Non-monitored Machines",
                                        "noDataMessage": "No unmonitored servers. Good job!",
                                        "showRefreshButton": true,
                                        "exportMultipleValues": true,
                                        "exportedParameters": [
                                          {
                                            "parameterName": "vmstotag",
                                            "parameterType": 1,
                                            "quote": ""
                                          }
                                        ],
                                        "showExportToExcel": true,
                                        "exportToExcelOptions": "all",
                                        "queryType": 1,
                                        "resourceType": "microsoft.resourcegraph/resources",
                                        "crossComponentResources": [
                                          "{Subscriptions}"
                                        ],
                                        "visualization": "table",
                                        "gridSettings": {
                                          "formatters": [
                                            {
                                              "columnMatch": "OS",
                                              "formatter": 1
                                            }
                                          ],
                                          "filter": true,
                                          "sortBy": [
                                            {
                                              "itemKey": "$gen_link_Resource_0",
                                              "sortOrder": 1
                                            }
                                          ]
                                        },
                                        "sortBy": [
                                          {
                                            "itemKey": "$gen_link_Resource_0",
                                            "sortOrder": 1
                                          }
                                        ]
                                      },
                                      "name": "Non Monitores Servers",
                                      "styleSettings": {
                                        "margin": "400",
                                        "padding": "400",
                                        "showBorder": true
                                      }
                                    },
                                    {
                                      "type": 9,
                                      "content": {
                                        "version": "KqlParameterItem/1.0",
                                        "parameters": [
                                          {
                                            "id": "8a177eab-edac-41cc-84f9-a5b7de931bea",
                                            "version": "KqlParameterItem/1.0",
                                            "name": "PackTags",
                                            "label": "Add Pack(s)",
                                            "type": 2,
                                            "isGlobal": true,
                                            "multiSelect": true,
                                            "quote": "",
                                            "delimiter": ",",
                                            "query": "{\"version\":\"CustomEndpoint/1.0\",\"data\":null,\"headers\":[{\"key\":\"x-functions-key\",\"value\":\"{configKey}\"}],\"method\":\"GET\",\"url\":\"https://{FunctionApps:name}.azurewebsites.net/api/config\",\"contentType\":\"text/plain\",\"urlParams\":[{\"key\":\"Action\",\"value\":\"getavailableIaaSPacks\"}],\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.*\",\"columns\":[]}}]}",
                                            "typeSettings": {
                                              "additionalResourceOptions": [],
                                              "showDefault": false
                                            },
                                            "timeContext": {
                                              "durationMs": 86400000
                                            },
                                            "queryType": 10,
                                            "value": [
                                              "VMI"
                                            ]
                                          }
                                        ],
                                        "style": "pills",
                                        "queryType": 10
                                      },
                                      "customWidth": "50",
                                      "conditionalVisibility": {
                                        "parameterName": "vmstotag",
                                        "comparison": "isNotEqualTo"
                                      },
                                      "name": "param-IaaS-vmstotag"
                                    },
                                    {
                                      "type": 11,
                                      "content": {
                                        "version": "LinkItem/1.0",
                                        "style": "paragraph",
                                        "links": [
                                          {
                                            "id": "91fb0fed-0e4f-41ce-9024-98a3cc4432a7",
                                            "linkTarget": "ArmAction",
                                            "linkLabel": "Enable Monitoring for {PackTags} Pack",
                                            "preText": "",
                                            "style": "primary",
                                            "linkIsContextBlade": true,
                                            "armActionContext": {
                                              "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                              "headers": [],
                                              "params": [
                                                {
                                                  "key": "action",
                                                  "value": "addTag"
                                                }
                                              ],
                                              "body": "{ \n  \"function\": \"packmgmt\",\n  \"functionBody\" : {\n    \"Action\":\"AddPack\",\n    \"Resources\": [{vmstotag}],\n    \"Pack\": \"{PackTags}\",\n    \"PackType\": \"IaaS\",\n    \"WorkspaceId\" : \"{Workspace}\",\n    \"DefaultAG\" : \"{DefaultAG}\"\n  }\n}",
                                              "httpMethod": "POST",
                                              "title": "Enable Monitoring Packs",
                                              "description": "# This will enable the pack for the following servers:\n{vmstotag}\n\nby adding the {PackTags} Pack(s) to the resource(s).\n\nWorkspace: {Workspace}\n\nAction Group: {DefaultAG}",
                                              "actionName": "EnableMonitoring",
                                              "runLabel": "Confirm"
                                            }
                                          }
                                        ]
                                      },
                                      "customWidth": "50",
                                      "conditionalVisibility": {
                                        "parameterName": "vmstotag",
                                        "comparison": "isNotEqualTo"
                                      },
                                      "name": "links - 1 - Copy"
                                    }
                                  ],
                                  "exportParameters": true
                                },
                                "customWidth": "50",
                                "conditionalVisibility": {
                                  "parameterName": "tabSelection",
                                  "comparison": "isEqualTo",
                                  "value": "discovery"
                                },
                                "name": "NonTaggedGroup"
                              }
                            ]
                          },
                          "conditionalVisibility": {
                            "parameterName": "tabSelection",
                            "comparison": "isEqualTo",
                            "value": "discovery"
                          },
                          "name": "Servers",
                          "styleSettings": {
                            "showBorder": true
                          }
                        },
                        {
                          "type": 12,
                          "content": {
                            "version": "NotebookGroup/1.0",
                            "groupType": "editable",
                            "title": "Azure Services - {instanceName} instance",
                            "items": [
                              {
                                "type": 1,
                                "content": {
                                  "json": "## Services Monitoring Setup\n\nSelect service on the right to assign a pack. Once the backend is done with the assigning, the service will show on the left side grid.\n\nOn the left side grid, the monitoring can be updated to remove a specific pack from the service.",
                                  "style": "info"
                                },
                                "conditionalVisibility": {
                                  "parameterName": "showHelp",
                                  "comparison": "isEqualTo",
                                  "value": "yes"
                                },
                                "name": "text - Monitoring - PaaS"
                              },
                              {
                                "type": 12,
                                "content": {
                                  "version": "NotebookGroup/1.0",
                                  "groupType": "editable",
                                  "items": [
                                    {
                                      "type": 9,
                                      "content": {
                                        "version": "KqlParameterItem/1.0",
                                        "parameters": [
                                          {
                                            "id": "69e06557-55cc-490c-86d2-892d7817b729",
                                            "version": "KqlParameterItem/1.0",
                                            "name": "SelectPaasType",
                                            "label": "Select Service Type(s)",
                                            "type": 7,
                                            "multiSelect": true,
                                            "quote": "'",
                                            "delimiter": ",",
                                            "query": "{\"version\":\"CustomEndpoint/1.0\",\"data\":null,\"headers\":[{\"key\":\"x-functions-key\",\"value\":\"{configKey}\"}],\"method\":\"GET\",\"url\":\"https://{FunctionApps:name}.azurewebsites.net/api/config?Action=getSupportedServices\",\"contentType\":\"text/plain\",\"urlParams\":[],\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.*\",\"columns\":[]}}]}",
                                            "typeSettings": {
                                              "additionalResourceOptions": [
                                                "value::all"
                                              ],
                                              "showDefault": false
                                            },
                                            "timeContext": {
                                              "durationMs": 86400000
                                            },
                                            "queryType": 10,
                                            "value": [
                                              "value::all"
                                            ]
                                          }
                                        ],
                                        "style": "above",
                                        "queryType": 10
                                      },
                                      "name": "parameters - service type tagged"
                                    },
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "{\"version\":\"CustomEndpoint/1.0\",\"data\":null,\"headers\":[{\"key\":\"x-functions-key\",\"value\":\"{configKey}\"}],\"method\":\"GET\",\"url\":\"https://{FunctionApps:name}.azurewebsites.net/api/config?Action=getMonitoredPaaS\",\"contentType\":\"text/plain\",\"urlParams\":[{\"key\":\"resourceFilter\",\"value\":\"{SelectPaasType}\"}],\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.*\",\"columns\":[{\"path\":\"$.Resource\",\"columnid\":\"Resource\"},{\"path\":\"$.type\",\"columnid\":\"Type\"},{\"path\":\"$.tag\",\"columnid\":\"tag\"},{\"path\":\"$.AlertRules\",\"columnid\":\"AlertRules\"},{\"path\":\"$.resourceGroup\",\"columnid\":\"resourceGroup\"},{\"path\":\"$.kind\",\"columnid\":\"kind\"}]}}]}",
                                        "size": 0,
                                        "title": "Monitored Services",
                                        "exportMultipleValues": true,
                                        "exportedParameters": [
                                          {
                                            "parameterName": "taggedPaaS",
                                            "parameterType": 1,
                                            "quote": ""
                                          },
                                          {
                                            "fieldName": "tag",
                                            "parameterName": "PaaSLeftTagsOnly",
                                            "parameterType": 1,
                                            "quote": ""
                                          }
                                        ],
                                        "showExportToExcel": true,
                                        "exportToExcelOptions": "all",
                                        "queryType": 10,
                                        "gridSettings": {
                                          "formatters": [
                                            {
                                              "columnMatch": "AlertRules",
                                              "formatter": 18,
                                              "formatOptions": {
                                                "thresholdsOptions": "icons",
                                                "thresholdsGrid": [
                                                  {
                                                    "operator": ">",
                                                    "thresholdValue": "0",
                                                    "representation": "success",
                                                    "text": "{0}{1}"
                                                  },
                                                  {
                                                    "operator": "is Empty",
                                                    "representation": "2",
                                                    "text": "{0}{1}"
                                                  },
                                                  {
                                                    "operator": "Default",
                                                    "thresholdValue": null,
                                                    "representation": "warning",
                                                    "text": "{0}{1}"
                                                  }
                                                ]
                                              },
                                              "tooltipFormat": {
                                                "tooltip": "Total number of alerts created by the policies. It can take a while for the alert rules to be created. If still a warning after a day, please check logs."
                                              }
                                            }
                                          ],
                                          "filter": true
                                        }
                                      },
                                      "name": "query - Monitored Services",
                                      "styleSettings": {
                                        "showBorder": true
                                      }
                                    },
                                    {
                                      "type": 11,
                                      "content": {
                                        "version": "LinkItem/1.0",
                                        "style": "paragraph",
                                        "links": [
                                          {
                                            "id": "36b65f94-1c3d-4e7a-b771-677a2081d288",
                                            "cellValue": "",
                                            "linkTarget": "ArmAction",
                                            "linkLabel": "Remove Monitoring for {taggedPaaS:$.tag} Pack(s)",
                                            "preText": "",
                                            "postText": "",
                                            "style": "primary",
                                            "linkIsContextBlade": true,
                                            "armActionContext": {
                                              "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                              "headers": [],
                                              "params": [
                                                {
                                                  "key": "action",
                                                  "value": "removeTag"
                                                }
                                              ],
                                              "body": "{ \n  \"function\": \"packmgmt\",\n  \"functionBody\" : {\n    \"Action\":\"RemoveTag\",\n    \"Resources\": [{taggedPaaS}],\n    \"Pack\": \"{PaaSLeftTagsOnly}\",\n    \"PackType\": \"PaaS\"\n  }\n}",
                                              "httpMethod": "POST",
                                              "title": "Remove Monitoring",
                                              "description": "# Please confirm the change.\n\nRemove Monitoring for Pack(s).\n\nResources:\n\n{taggedPaaS:$.Resource}\n\nTags:\n\n{taggedPaaS:$.tag}",
                                              "runLabel": "Confirm"
                                            }
                                          }
                                        ]
                                      },
                                      "customWidth": "75",
                                      "conditionalVisibility": {
                                        "parameterName": "taggedPaaS",
                                        "comparison": "isNotEqualTo"
                                      },
                                      "name": "actionsPaaSLeft"
                                    }
                                  ],
                                  "exportParameters": true
                                },
                                "customWidth": "50",
                                "name": "TaggedGroupPaaS"
                              },
                              {
                                "type": 12,
                                "content": {
                                  "version": "NotebookGroup/1.0",
                                  "groupType": "editable",
                                  "items": [
                                    {
                                      "type": 9,
                                      "content": {
                                        "version": "KqlParameterItem/1.0",
                                        "parameters": [
                                          {
                                            "id": "f6a88467-77d9-4e0e-912a-3d7b94aab938",
                                            "version": "KqlParameterItem/1.0",
                                            "name": "SelectPaaStypeToTag",
                                            "label": "Select Service Type(s)",
                                            "type": 7,
                                            "multiSelect": true,
                                            "quote": "'",
                                            "delimiter": ",",
                                            "query": "{\"version\":\"CustomEndpoint/1.0\",\"data\":null,\"headers\":[{\"key\":\"x-functions-key\",\"value\":\"{configKey}\"}],\"method\":\"GET\",\"url\":\"https://{FunctionApps:name}.azurewebsites.net/api/config?Action=getSupportedServices\",\"contentType\":\"text/plain\",\"urlParams\":[],\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.*\",\"columns\":[]}}]}",
                                            "typeSettings": {
                                              "additionalResourceOptions": [
                                                "value::all"
                                              ],
                                              "showDefault": false
                                            },
                                            "timeContext": {
                                              "durationMs": 86400000
                                            },
                                            "queryType": 10,
                                            "value": [
                                              "value::all"
                                            ]
                                          }
                                        ],
                                        "style": "above",
                                        "queryType": 10
                                      },
                                      "name": "parameters - service type not tagged"
                                    },
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "{\"version\":\"CustomEndpoint/1.0\",\"data\":null,\"headers\":[{\"key\":\"x-functions-key\",\"value\":\"{configKey}\"}],\"method\":\"GET\",\"url\":\"https://{FunctionApps:name}.azurewebsites.net/api/config?Action=getNonMonitoredPaaS\",\"contentType\":\"text/plain\",\"urlParams\":[{\"key\":\"resourceFilter\",\"value\":\"{SelectPaaStypeToTag}\"}],\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.*\",\"columns\":[{\"path\":\"$.Resource\",\"columnid\":\"Resource\"},{\"path\":\"$.type\",\"columnid\":\"type\"},{\"path\":\"$.location\",\"columnid\":\"location\"},{\"path\":\"$.resourceGroup\",\"columnid\":\"resourceGroup\"},{\"path\":\"$.kind\",\"columnid\":\"kind\"}]}}]}",
                                        "size": 0,
                                        "title": "Non-Monitored Services",
                                        "exportMultipleValues": true,
                                        "exportedParameters": [
                                          {
                                            "parameterName": "paastotag",
                                            "parameterType": 1,
                                            "quote": ""
                                          },
                                          {
                                            "fieldName": "type",
                                            "parameterName": "passtotagtype",
                                            "parameterType": 1,
                                            "quote": ""
                                          }
                                        ],
                                        "showExportToExcel": true,
                                        "exportToExcelOptions": "all",
                                        "queryType": 10,
                                        "gridSettings": {
                                          "formatters": [
                                            {
                                              "columnMatch": "Total",
                                              "formatter": 18,
                                              "formatOptions": {
                                                "thresholdsOptions": "icons",
                                                "thresholdsGrid": [
                                                  {
                                                    "operator": ">=",
                                                    "thresholdValue": "1",
                                                    "representation": "success",
                                                    "text": "{0}{1}"
                                                  },
                                                  {
                                                    "operator": "<",
                                                    "thresholdValue": "1",
                                                    "representation": "2",
                                                    "text": "{0}{1}"
                                                  },
                                                  {
                                                    "operator": "Default",
                                                    "thresholdValue": null,
                                                    "representation": "unknown",
                                                    "text": "{0}{1}"
                                                  }
                                                ]
                                              },
                                              "tooltipFormat": {
                                                "tooltip": "Total number of Alerts assigned to this resource."
                                              }
                                            }
                                          ],
                                          "filter": true,
                                          "sortBy": [
                                            {
                                              "itemKey": "type",
                                              "sortOrder": 1
                                            }
                                          ]
                                        },
                                        "sortBy": [
                                          {
                                            "itemKey": "type",
                                            "sortOrder": 1
                                          }
                                        ]
                                      },
                                      "name": "query - nonMonitored Paas - Copy",
                                      "styleSettings": {
                                        "showBorder": true
                                      }
                                    },
                                    {
                                      "type": 11,
                                      "content": {
                                        "version": "LinkItem/1.0",
                                        "style": "paragraph",
                                        "links": [
                                          {
                                            "id": "91fb0fed-0e4f-41ce-9024-98a3cc4432a7",
                                            "linkTarget": "ArmAction",
                                            "linkLabel": "Enable Monitoring",
                                            "preText": "",
                                            "style": "primary",
                                            "linkIsContextBlade": true,
                                            "armActionContext": {
                                              "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                              "headers": [],
                                              "params": [
                                                {
                                                  "key": "action",
                                                  "value": "addTag"
                                                }
                                              ],
                                              "body": "{ \n  \"function\": \"packmgmt\",\n  \"functionBody\" : {\n    \"Action\":\"AddPack\",\n    \"Resources\": [{paastotag}],\n    \"Pack\": \"{PackTagsPaaS}\",\n    \"PackType\": \"PaaS\",\n    \"Type\": \"{passtotagtype}\",\n    \"DefaultAG\": \"{DefaultAG}\",\n    \"AVDLAW\" : \"{AvdLAWPaaS}\"\n  }\n}",
                                              "httpMethod": "POST",
                                              "title": "Enable Monitoring Packs",
                                              "description": "# This will enable the pack for the following services:\n***{paastotag:$.Resource}***\n\nby adding the specific Pack(s) to the resource(s).\n\n_AVD Alternate Log Analytics Workspace (if any):_\n\n{AvdLAWPaaS:name}\n",
                                              "actionName": "EnableMonitoring",
                                              "runLabel": "Confirm"
                                            }
                                          }
                                        ]
                                      },
                                      "customWidth": "50",
                                      "conditionalVisibility": {
                                        "parameterName": "paastotag",
                                        "comparison": "isNotEqualTo"
                                      },
                                      "name": "platformenableparameters"
                                    }
                                  ],
                                  "exportParameters": true
                                },
                                "customWidth": "50",
                                "name": "NonTaggedGroup"
                              }
                            ]
                          },
                          "conditionalVisibility": {
                            "parameterName": "tabSelection",
                            "comparison": "isEqualTo",
                            "value": "paas"
                          },
                          "name": "PaaSMgmt",
                          "styleSettings": {
                            "showBorder": true
                          }
                        },
                        {
                          "type": 12,
                          "content": {
                            "version": "NotebookGroup/1.0",
                            "groupType": "editable",
                            "title": "Alerts - {instanceName} instance",
                            "items": [
                              {
                                "type": 11,
                                "content": {
                                  "version": "LinkItem/1.0",
                                  "style": "tabs",
                                  "links": [
                                    {
                                      "id": "355de2ec-11fb-4db8-9813-2e0bf7cdb3d0",
                                      "cellValue": "alertTab",
                                      "linkTarget": "parameter",
                                      "linkLabel": "Packs' Alerts",
                                      "subTarget": "packs",
                                      "style": "link"
                                    },
                                    {
                                      "id": "d1f8bc9e-5a21-47f3-a2b3-e7fc213e04ee",
                                      "cellValue": "alertTab",
                                      "linkTarget": "parameter",
                                      "linkLabel": "Other Alerts",
                                      "subTarget": "others",
                                      "style": "link"
                                    }
                                  ]
                                },
                                "name": "links - 18"
                              },
                              {
                                "type": 1,
                                "content": {
                                  "json": "## Alerts Configuration\n\n### Select a pack on the left to visualize the alerts rules related to those packs. Select the Other Alerts tab to visualiza any other alert rule that is not related to the packs.",
                                  "style": "info"
                                },
                                "conditionalVisibility": {
                                  "parameterName": "showHelp",
                                  "comparison": "isEqualTo",
                                  "value": "yes"
                                },
                                "name": "text - Alert - Packs Alerts"
                              },
                              {
                                "type": 9,
                                "content": {
                                  "version": "KqlParameterItem/1.0",
                                  "crossComponentResources": [
                                    "value::tenant"
                                  ],
                                  "parameters": [
                                    {
                                      "id": "e99b4870-f7a6-4b8e-95b7-6aaeece1f438",
                                      "version": "KqlParameterItem/1.0",
                                      "name": "AlertPack",
                                      "type": 2,
                                      "query": "resources\n| where tolower(type) in (\"microsoft.insights/scheduledqueryrules\", \"microsoft.insights/metricalerts\",\"microsoft.insights/activitylogalerts\")\n| where isnotempty(tags.MonitorStarterPacks)\n| project MPs=tostring(tags.MonitorStarterPacks)\n| summarize by MPs\n",
                                      "crossComponentResources": [
                                        "value::tenant"
                                      ],
                                      "typeSettings": {
                                        "additionalResourceOptions": [],
                                        "showDefault": false
                                      },
                                      "timeContext": {
                                        "durationMs": 86400000
                                      },
                                      "queryType": 1,
                                      "resourceType": "microsoft.resources/tenants",
                                      "value": null
                                    }
                                  ],
                                  "style": "pills",
                                  "queryType": 1,
                                  "resourceType": "microsoft.resources/tenants"
                                },
                                "conditionalVisibility": {
                                  "parameterName": "alertTab",
                                  "comparison": "isEqualTo",
                                  "value": "packs"
                                },
                                "name": "param-alerts-toAction"
                              },
                              {
                                "type": 3,
                                "content": {
                                  "version": "KqlItem/1.0",
                                  "query": "resources\n| where tolower(type) in (\"microsoft.insights/scheduledqueryrules\")\n| where isnotempty(tags.MonitorStarterPacks)\n| project id,MP=tags.MonitorStarterPacks, Enabled=properties.enabled, Description=properties.description, ['Action Group']=split(properties.actions.actionGroups[0],\"/\")[8], location, Target=split(properties.scopes[0],\"/\")[-1]\n| union (\nresources\n| where tolower(type) in (\"microsoft.insights/metricalerts\")\n| where isnotempty(tags.MonitorStarterPacks)\n| project id,MP=tags.MonitorStarterPacks, Enabled=properties.enabled, Description=properties.description, ['Action Group']=split(properties.actions[0].actionGroupId,\"/\")[8], location, Target=split(properties.scopes[0],\"/\")[-1])\n| union (resources\n| where tolower(type) in (\"microsoft.insights/activitylogalerts\")\n| where isnotempty(tags.MonitorStarterPacks)\n| where tags.instanceName == '{instanceName}'\n| project id,MP=tags.MonitorStarterPacks, Enabled=properties.enabled, Description=properties.description, ['Action Group']=split(properties.actions.actionGroups[0].actionGroupId,\"/\")[8], location, Target=split(properties.scopes[0],\"/\")[-1])\n| where MP=='{AlertPack}'",
                                  "size": 0,
                                  "exportMultipleValues": true,
                                  "exportedParameters": [
                                    {
                                      "fieldName": "",
                                      "parameterName": "alertsselected",
                                      "parameterType": 1,
                                      "quote": ""
                                    }
                                  ],
                                  "showExportToExcel": true,
                                  "exportToExcelOptions": "all",
                                  "queryType": 1,
                                  "resourceType": "microsoft.resources/tenants",
                                  "crossComponentResources": [
                                    "value::tenant"
                                  ],
                                  "visualization": "table",
                                  "gridSettings": {
                                    "formatters": [
                                      {
                                        "columnMatch": "location",
                                        "formatter": 5
                                      },
                                      {
                                        "columnMatch": "name",
                                        "formatter": 7
                                      }
                                    ],
                                    "filter": true
                                  }
                                },
                                "customWidth": "70",
                                "conditionalVisibility": {
                                  "parameterName": "alertTab",
                                  "comparison": "isEqualTo",
                                  "value": "packs"
                                },
                                "name": "AlertConfigQuery",
                                "styleSettings": {
                                  "showBorder": true
                                }
                              },
                              {
                                "type": 12,
                                "content": {
                                  "version": "NotebookGroup/1.0",
                                  "groupType": "editable",
                                  "items": [
                                    {
                                      "type": 1,
                                      "content": {
                                        "json": "# Enable or Disable alerts. \n\n## By selecting a list of alerts on the left, the buttons will disable or enable the alert rules in Azure Monitor.\n\n# Update Action Group\n## Select a list of alerts on the left and a new Action Group to assign to the alert.\n\n# Delete Alert rules\n## Select a list of alert rules to be deleted.",
                                        "style": "info"
                                      },
                                      "conditionalVisibility": {
                                        "parameterName": "showHelp",
                                        "comparison": "isEqualTo",
                                        "value": "yes"
                                      },
                                      "name": "AlertMgmtHelpText"
                                    },
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "resources\n| where type == \"microsoft.insights/actiongroups\"\n| where properties.enabled == 'true'\n| project id, emailReceivers=strcat(properties.emailReceivers[0].name,\"(\",properties.emailReceivers[0].emailAddress,\")\")",
                                        "size": 1,
                                        "exportFieldName": "",
                                        "exportParameterName": "selectedAG",
                                        "queryType": 1,
                                        "resourceType": "microsoft.resources/tenants",
                                        "crossComponentResources": [
                                          "value::tenant"
                                        ],
                                        "gridSettings": {
                                          "formatters": [
                                            {
                                              "columnMatch": "id",
                                              "formatter": 13,
                                              "formatOptions": {
                                                "linkTarget": "OpenBlade",
                                                "linkIsContextBlade": true,
                                                "showIcon": true
                                              }
                                            }
                                          ],
                                          "filter": true
                                        }
                                      },
                                      "conditionalVisibility": {
                                        "parameterName": "alertsselected",
                                        "comparison": "isNotEqualTo"
                                      },
                                      "name": "ActionGroupsQuery",
                                      "styleSettings": {
                                        "showBorder": true
                                      }
                                    },
                                    {
                                      "type": 11,
                                      "content": {
                                        "version": "LinkItem/1.0",
                                        "style": "paragraph",
                                        "links": [
                                          {
                                            "id": "f5cb3ede-91d1-4414-bfa1-a1689f45d0c8",
                                            "linkTarget": "ArmAction",
                                            "linkLabel": "Enable Alerts",
                                            "style": "primary",
                                            "linkIsContextBlade": true,
                                            "armActionContext": {
                                              "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                              "headers": [],
                                              "params": [],
                                              "body": "{ \n  \"function\": \"alertmgmt\",\n  \"functionBody\" : {\n    \"Action\":\"Enable\", \n    \"alerts\":  [{alertsselected}]\n  }\n}",
                                              "httpMethod": "POST",
                                              "title": "Enable Alerts",
                                              "description": "# This action will Enable the selected Alerts\n\n{alertsselected}",
                                              "runLabel": "Confirm"
                                            }
                                          },
                                          {
                                            "id": "d9469141-a104-4696-b9cd-f0fc7e3f963e",
                                            "linkTarget": "ArmAction",
                                            "linkLabel": "Disable Alerts",
                                            "style": "primary",
                                            "linkIsContextBlade": true,
                                            "armActionContext": {
                                              "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                              "headers": [],
                                              "params": [],
                                              "body": "{ \n  \"function\": \"alertmgmt\",\n  \"functionBody\" : {\n    \"Action\":\"Disable\", \n    \"alerts\":  [{alertsselected}]\n  }\n}\n",
                                              "httpMethod": "POST",
                                              "title": "Disable Alerts",
                                              "description": "# This action will disable the selected Alerts\n\n{alertsselected}",
                                              "runLabel": "Confirm"
                                            }
                                          },
                                          {
                                            "id": "7942ba17-4942-4f4a-b2ea-e19ad806b49d",
                                            "linkTarget": "ArmAction",
                                            "linkLabel": "Update Action Group",
                                            "style": "primary",
                                            "linkIsContextBlade": true,
                                            "armActionContext": {
                                              "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                              "headers": [],
                                              "params": [],
                                              "body": "{ \n  \"function\": \"alertmgmt\",\n  \"functionBody\" : {\n    \"Action\":\"Update\", \n    \"alerts\":  [{alertsselected}],\n    \"aGroup\": {selectedAG}\n  }\n}\n",
                                              "httpMethod": "POST",
                                              "title": "Update Action Group",
                                              "description": "Updating alerts:\n\n\n{alertsselected}\n\nwith Action Group:\n\n{selectedAG}\n",
                                              "actionName": "updateAG",
                                              "runLabel": "Update"
                                            }
                                          },
                                          {
                                            "id": "f802b903-8a8a-458d-9c55-a428d96ba63d",
                                            "linkTarget": "ArmAction",
                                            "linkLabel": "Delete Alert Rule",
                                            "style": "primary",
                                            "linkIsContextBlade": true,
                                            "armActionContext": {
                                              "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                              "headers": [],
                                              "params": [],
                                              "body": "{ \n  \"function\": \"alertmgmt\",\n  \"functionBody\" : {\n    \"Action\":\"Delete\", \n    \"alerts\":  [{alertsselected}]\n  }\n}\n",
                                              "httpMethod": "POST",
                                              "title": "Delete",
                                              "description": "# Deleting Alerts\n\nThe following alert rules will be deleted:\n\n{alertsselected}",
                                              "actionName": "Delete",
                                              "runLabel": "Delete"
                                            }
                                          }
                                        ]
                                      },
                                      "name": "links - 8"
                                    }
                                  ]
                                },
                                "customWidth": "30",
                                "conditionalVisibility": {
                                  "parameterName": "alertTab",
                                  "comparison": "isEqualTo",
                                  "value": "packs"
                                },
                                "name": "AlertsSubGroup1"
                              },
                              {
                                "type": 12,
                                "content": {
                                  "version": "NotebookGroup/1.0",
                                  "groupType": "editable",
                                  "title": "Alert Management - Other Alerts",
                                  "items": [
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "resources\n| where tolower(type) in (\"microsoft.insights/scheduledqueryrules\")\n| where isempty(tags.MonitorStarterPacks)\n| project id,Enabled=properties.enabled, Description=properties.description, ['Action Group']=split(properties.actions.actionGroups[0],\"/\")[8], location, Target=split(properties.scopes[0],\"/\")[-1]\n| union (\nresources\n| where tolower(type) in (\"microsoft.insights/metricalerts\")\n| where isempty(tags.MonitorStarterPacks)\n| project id, Enabled=properties.enabled, Description=properties.description, ['Action Group']=split(properties.actions[0].actionGroupId,\"/\")[8], location, Target=split(properties.scopes[0],\"/\")[-1])\n| union (resources\n| where tolower(type) in (\"microsoft.insights/activitylogalerts\")\n| where isempty(tags.MonitorStarterPacks)\n| project id,Enabled=properties.enabled, Description=properties.description, ['Action Group']=split(properties.actions.actionGroups[0].actionGroupId,\"/\")[8], location, Target=split(properties.scopes[0],\"/\")[-1])",
                                        "size": 0,
                                        "exportMultipleValues": true,
                                        "exportedParameters": [
                                          {
                                            "fieldName": "",
                                            "parameterName": "alertsselectednopack",
                                            "parameterType": 1,
                                            "quote": ""
                                          }
                                        ],
                                        "queryType": 1,
                                        "resourceType": "microsoft.resources/tenants",
                                        "crossComponentResources": [
                                          "value::tenant"
                                        ],
                                        "visualization": "table",
                                        "gridSettings": {
                                          "formatters": [
                                            {
                                              "columnMatch": "location",
                                              "formatter": 5
                                            },
                                            {
                                              "columnMatch": "name",
                                              "formatter": 7
                                            }
                                          ],
                                          "filter": true,
                                          "sortBy": [
                                            {
                                              "itemKey": "$gen_link_Enabled_1",
                                              "sortOrder": 1
                                            }
                                          ]
                                        },
                                        "sortBy": [
                                          {
                                            "itemKey": "$gen_link_Enabled_1",
                                            "sortOrder": 1
                                          }
                                        ]
                                      },
                                      "customWidth": "70",
                                      "name": "queryOtherAlerts",
                                      "styleSettings": {
                                        "showBorder": true
                                      }
                                    },
                                    {
                                      "type": 12,
                                      "content": {
                                        "version": "NotebookGroup/1.0",
                                        "groupType": "editable",
                                        "items": [
                                          {
                                            "type": 1,
                                            "content": {
                                              "json": "# Enable or Disable alerts. \n\n## By selecting a list of alerts on the left, the buttons will disable or enable the alert rules in Azure Monitor.\n\n# Update Action Group\n## Select a list of alerts on the left and a new Action Group to assign to the alert.",
                                              "style": "info"
                                            },
                                            "conditionalVisibility": {
                                              "parameterName": "showHelp",
                                              "comparison": "isEqualTo",
                                              "value": "yes"
                                            },
                                            "name": "text - 3"
                                          },
                                          {
                                            "type": 3,
                                            "content": {
                                              "version": "KqlItem/1.0",
                                              "query": "resources\n| where type == \"microsoft.insights/actiongroups\"\n| where properties.enabled == 'true'\n| project id, emailReceivers=strcat(properties.emailReceivers[0].name,\"(\",properties.emailReceivers[0].emailAddress,\")\")",
                                              "size": 1,
                                              "exportFieldName": "",
                                              "exportParameterName": "selectedAG",
                                              "queryType": 1,
                                              "resourceType": "microsoft.resourcegraph/resources",
                                              "gridSettings": {
                                                "filter": true
                                              }
                                            },
                                            "name": "agQuery2",
                                            "styleSettings": {
                                              "showBorder": true
                                            }
                                          },
                                          {
                                            "type": 11,
                                            "content": {
                                              "version": "LinkItem/1.0",
                                              "style": "paragraph",
                                              "links": [
                                                {
                                                  "id": "f5cb3ede-91d1-4414-bfa1-a1689f45d0c8",
                                                  "linkTarget": "ArmAction",
                                                  "linkLabel": "Enable Alerts",
                                                  "style": "primary",
                                                  "linkIsContextBlade": true,
                                                  "armActionContext": {
                                                    "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                                    "headers": [],
                                                    "params": [],
                                                    "body": "{ \n  \"function\": \"alertmgmt\",\n  \"functionBody\" : {\n    \"Action\":\"Enable\", \n    \"alerts\":  [{alertsselectednopack}]\n  }\n}",
                                                    "httpMethod": "POST",
                                                    "title": "Enable Alerts",
                                                    "description": "# This action will Enable the selected Alerts\n\n{alertsselected}",
                                                    "runLabel": "Confirm"
                                                  }
                                                },
                                                {
                                                  "id": "d9469141-a104-4696-b9cd-f0fc7e3f963e",
                                                  "linkTarget": "ArmAction",
                                                  "linkLabel": "Disable Alerts",
                                                  "style": "primary",
                                                  "linkIsContextBlade": true,
                                                  "armActionContext": {
                                                    "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                                    "headers": [],
                                                    "params": [],
                                                    "body": "{ \n  \"function\": \"alertmgmt\",\n  \"functionBody\" : {\n    \"Action\":\"Disable\", \n    \"alerts\":  [{alertsselectednopack}]\n  }\n}\n",
                                                    "httpMethod": "POST",
                                                    "title": "Disable Alerts",
                                                    "description": "# This action will disable the selected Alerts\n\n{alertsselected}",
                                                    "runLabel": "Confirm"
                                                  }
                                                },
                                                {
                                                  "id": "7942ba17-4942-4f4a-b2ea-e19ad806b49d",
                                                  "linkTarget": "ArmAction",
                                                  "linkLabel": "Update Action Group",
                                                  "style": "primary",
                                                  "linkIsContextBlade": true,
                                                  "armActionContext": {
                                                    "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                                    "headers": [],
                                                    "params": [],
                                                    "body": "{ \n  \"function\": \"alertmgmt\",\n  \"functionBody\" : {\n    \"Action\":\"Update\", \n    \"alerts\":  [{alertsselectednopack}],\n    \"aGroup\": {selectedAG}\n  }\n}\n",
                                                    "httpMethod": "POST",
                                                    "title": "Update Action Group",
                                                    "description": "Updating alerts:\n\n\n{alertsselected}\n\nwith Action Group:\n\n{selectedAG}\n",
                                                    "actionName": "updateAG",
                                                    "runLabel": "Update"
                                                  }
                                                },
                                                {
                                                  "id": "eb46862a-b443-489e-a2bf-abc05c541b53",
                                                  "linkTarget": "ArmAction",
                                                  "linkLabel": "Delete Alert Rule",
                                                  "style": "primary",
                                                  "linkIsContextBlade": true,
                                                  "armActionContext": {
                                                    "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                                    "headers": [],
                                                    "params": [],
                                                    "body": "{ \n  \"function\": \"alertmgmt\",\n  \"functionBody\" : {\n    \"Action\":\"Delete\", \n    \"alerts\":  [{alertsselectednopack}]\n  }\n}\n",
                                                    "httpMethod": "POST",
                                                    "title": "Delete",
                                                    "description": "# Deleting the following Alert rules:\n\n\n{alertsselectednopack}]\n",
                                                    "actionName": "Delete",
                                                    "runLabel": "Delete"
                                                  }
                                                }
                                              ]
                                            },
                                            "name": "links - 8"
                                          }
                                        ]
                                      },
                                      "customWidth": "30",
                                      "conditionalVisibility": {
                                        "parameterName": "alertsselectednopack",
                                        "comparison": "isNotEqualTo"
                                      },
                                      "name": "AlertsSubGroup1"
                                    }
                                  ]
                                },
                                "conditionalVisibility": {
                                  "parameterName": "alertTab",
                                  "comparison": "isEqualTo",
                                  "value": "others"
                                },
                                "name": "AlertMGMT - Others"
                              }
                            ]
                          },
                          "conditionalVisibility": {
                            "parameterName": "tabSelection",
                            "comparison": "isEqualTo",
                            "value": "alertmanagement"
                          },
                          "name": "AlertMGMT"
                        },
                        {
                          "type": 12,
                          "content": {
                            "version": "NotebookGroup/1.0",
                            "groupType": "editable",
                            "items": [
                              {
                                "type": 11,
                                "content": {
                                  "version": "LinkItem/1.0",
                                  "style": "tabs",
                                  "links": [
                                    {
                                      "id": "13be6531-5163-4697-b6bd-cb7381b15d65",
                                      "cellValue": "packsTab",
                                      "linkTarget": "parameter",
                                      "linkLabel": "IaaS Packs Associtation",
                                      "subTarget": "associations",
                                      "preText": "Iaas",
                                      "style": "link"
                                    },
                                    {
                                      "id": "82684c12-244f-4488-9223-da3e48a6206f",
                                      "cellValue": "packsTab",
                                      "linkTarget": "parameter",
                                      "linkLabel": "DCR Details",
                                      "subTarget": "dcrdetails",
                                      "style": "link"
                                    },
                                    {
                                      "id": "0f666555-5e2a-4eb9-bd6c-cef1365a6ce9",
                                      "cellValue": "packsTab",
                                      "linkTarget": "parameter",
                                      "linkLabel": "VMInsights Status",
                                      "subTarget": "vmistatus",
                                      "style": "link"
                                    }
                                  ]
                                },
                                "name": "links - 2"
                              },
                              {
                                "type": 12,
                                "content": {
                                  "version": "NotebookGroup/1.0",
                                  "groupType": "editable",
                                  "title": "VMInsights Status",
                                  "items": [
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "resources\n| where ['type'] =~ 'microsoft.insights/datacollectionrules'\n| mv-expand datasources=properties.dataSources.performanceCounters\n| where isnotnull(datasources)\n| mv-expand  cs=datasources.counterSpecifiers //=~ '\\\\VmInsights\\\\DetailedMetrics'\n| where cs =~'\\\\VmInsights\\\\DetailedMetrics'\n| join kind=inner  (insightsresources\n| where type == \"microsoft.insights/datacollectionruleassociations\"\n| where isnotnull(properties.dataCollectionRuleId)\n| extend sourceResourceId=tostring(split(id,'/providers/Microsoft.Insights/')[0])\n| extend serverName=tostring(sourceResourceId), dataCollectionRuleId=tostring(properties.dataCollectionRuleId)) on $left.id == $right.dataCollectionRuleId\n| project serverName=sourceResourceId, name\n| summarize VMInsightsAssociations=count(name) by ['Server Name']=serverName \n",
                                        "size": 1,
                                        "title": "Servers and DCR associations",
                                        "exportFieldName": "Server Name",
                                        "exportParameterName": "vmiSelectedServer",
                                        "queryType": 1,
                                        "resourceType": "microsoft.resources/tenants",
                                        "crossComponentResources": [
                                          "value::tenant"
                                        ],
                                        "gridSettings": {
                                          "formatters": [
                                            {
                                              "columnMatch": "VMInsightsAssociations",
                                              "formatter": 18,
                                              "formatOptions": {
                                                "thresholdsOptions": "icons",
                                                "thresholdsGrid": [
                                                  {
                                                    "operator": ">",
                                                    "thresholdValue": "1",
                                                    "representation": "2",
                                                    "text": "{0}{1}"
                                                  },
                                                  {
                                                    "operator": "Default",
                                                    "thresholdValue": null,
                                                    "representation": "success",
                                                    "text": "{0}{1}"
                                                  }
                                                ]
                                              },
                                              "tooltipFormat": {
                                                "tooltip": "If more than one VMInsights association is found, there may be data duplication to one or more Log Analytics workspaces."
                                              }
                                            }
                                          ],
                                          "filter": true,
                                          "sortBy": [
                                            {
                                              "itemKey": "$gen_thresholds_VMInsightsAssociations_1",
                                              "sortOrder": 2
                                            }
                                          ]
                                        },
                                        "sortBy": [
                                          {
                                            "itemKey": "$gen_thresholds_VMInsightsAssociations_1",
                                            "sortOrder": 2
                                          }
                                        ]
                                      },
                                      "customWidth": "50",
                                      "name": "query - 3",
                                      "styleSettings": {
                                        "showBorder": true
                                      }
                                    },
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "resources\n| where ['type'] =~ 'microsoft.insights/datacollectionrules'\n| mv-expand datasources=properties.dataSources.performanceCounters\n| where isnotnull(datasources)\n| mv-expand  cs=datasources.counterSpecifiers //=~ '\\\\VmInsights\\\\DetailedMetrics'\n| where cs =~'\\\\VmInsights\\\\DetailedMetrics'\n| join kind=leftouter   (insightsresources\n| where type == \"microsoft.insights/datacollectionruleassociations\"\n| where isnotnull(properties.dataCollectionRuleId)\n| extend sourceResourceId=tostring(split(id,'/providers/Microsoft.Insights/')[0])\n| extend serverName=tostring(split(sourceResourceId,'/')[8]), dataCollectionRuleId=tostring(properties.dataCollectionRuleId)) on $left.id == $right.dataCollectionRuleId\n| where sourceResourceId=~'{vmiSelectedServer}'\n| summarize by DCRId=dataCollectionRuleId\n",
                                        "size": 1,
                                        "title": "Details for {vmiSelectedServer}",
                                        "exportFieldName": "DCR",
                                        "exportParameterName": "vmiSelectedDCR",
                                        "queryType": 1,
                                        "resourceType": "microsoft.resources/tenants",
                                        "crossComponentResources": [
                                          "value::tenant"
                                        ],
                                        "gridSettings": {
                                          "formatters": [
                                            {
                                              "columnMatch": "VMInsightsAssociations",
                                              "formatter": 18,
                                              "formatOptions": {
                                                "thresholdsOptions": "icons",
                                                "thresholdsGrid": [
                                                  {
                                                    "operator": ">",
                                                    "thresholdValue": "1",
                                                    "representation": "2",
                                                    "text": "{0}{1}"
                                                  },
                                                  {
                                                    "operator": "Default",
                                                    "thresholdValue": null,
                                                    "representation": "success",
                                                    "text": "{0}{1}"
                                                  }
                                                ]
                                              },
                                              "tooltipFormat": {
                                                "tooltip": "If more than one VMInsights association is found, there may be data duplication to one or more Log Analytics workspaces."
                                              }
                                            }
                                          ],
                                          "filter": true
                                        },
                                        "sortBy": []
                                      },
                                      "customWidth": "50",
                                      "name": "query - VM Insights per DCR",
                                      "styleSettings": {
                                        "showBorder": true
                                      }
                                    },
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "resources\n| where ['type'] =~ 'microsoft.insights/datacollectionrules'\n| mv-expand datasources=properties.dataSources.performanceCounters\n| where isnotnull(datasources)\n| mv-expand  cs=datasources.counterSpecifiers //=~ '\\\\VmInsights\\\\DetailedMetrics'\n| where cs =~'\\\\VmInsights\\\\DetailedMetrics'\n| join kind=inner   (insightsresources\n| where type == \"microsoft.insights/datacollectionruleassociations\"\n| where isnotnull(properties.dataCollectionRuleId)\n| extend sourceResourceId=tostring(split(id,'/providers/Microsoft.Insights/')[0])\n| extend serverName=tostring(split(sourceResourceId,'/')[8]), dataCollectionRuleId=tostring(properties.dataCollectionRuleId)) on $left.id == $right.dataCollectionRuleId\n| project serverName, dataCollectionRuleId\n| summarize Servers=count(serverName) by DCRId=dataCollectionRuleId\n",
                                        "size": 1,
                                        "title": "VMInsights DCRs and Servers",
                                        "exportFieldName": "DCRId",
                                        "exportParameterName": "VMIdataCollectionRuleId",
                                        "queryType": 1,
                                        "resourceType": "microsoft.resources/tenants",
                                        "crossComponentResources": [
                                          "value::tenant"
                                        ],
                                        "gridSettings": {
                                          "formatters": [
                                            {
                                              "columnMatch": "dataCollectionRuleId",
                                              "formatter": 13,
                                              "formatOptions": {
                                                "linkTarget": "Resource",
                                                "linkIsContextBlade": true,
                                                "showIcon": true
                                              }
                                            }
                                          ],
                                          "filter": true
                                        }
                                      },
                                      "customWidth": "50",
                                      "name": "query - VMInsight rules details",
                                      "styleSettings": {
                                        "showBorder": true
                                      }
                                    },
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "resources\n| where ['type'] =~ 'microsoft.insights/datacollectionrules'\n| mv-expand datasources=properties.dataSources.performanceCounters\n| where isnotnull(datasources)\n| mv-expand  cs=datasources.counterSpecifiers //=~ '\\\\VmInsights\\\\DetailedMetrics'\n| where cs =~'\\\\VmInsights\\\\DetailedMetrics'\n| join kind=leftouter   (insightsresources\n| where type == \"microsoft.insights/datacollectionruleassociations\"\n| where isnotnull(properties.dataCollectionRuleId)\n| extend sourceResourceId=tostring(split(id,'/providers/Microsoft.Insights/')[0])\n| extend serverName=tostring(split(sourceResourceId,'/')[8]), dataCollectionRuleId=tostring(properties.dataCollectionRuleId)) on $left.id == $right.dataCollectionRuleId\n| where dataCollectionRuleId=='{VMIdataCollectionRuleId}'\n| project ['Server Name']=sourceResourceId\n\n",
                                        "size": 1,
                                        "title": "Associated Servers",
                                        "exportFieldName": "DCR",
                                        "exportParameterName": "vmiSelectedDCR",
                                        "queryType": 1,
                                        "resourceType": "microsoft.resources/tenants",
                                        "crossComponentResources": [
                                          "value::tenant"
                                        ],
                                        "gridSettings": {
                                          "formatters": [
                                            {
                                              "columnMatch": "VMInsightsAssociations",
                                              "formatter": 18,
                                              "formatOptions": {
                                                "thresholdsOptions": "icons",
                                                "thresholdsGrid": [
                                                  {
                                                    "operator": ">",
                                                    "thresholdValue": "1",
                                                    "representation": "2",
                                                    "text": "{0}{1}"
                                                  },
                                                  {
                                                    "operator": "Default",
                                                    "thresholdValue": null,
                                                    "representation": "success",
                                                    "text": "{0}{1}"
                                                  }
                                                ]
                                              },
                                              "tooltipFormat": {
                                                "tooltip": "If more than one VMInsights association is found, there may be data duplication to one or more Log Analytics workspaces."
                                              }
                                            }
                                          ],
                                          "filter": true
                                        },
                                        "sortBy": []
                                      },
                                      "customWidth": "50",
                                      "name": "query - VM Insights per DCR - Copy",
                                      "styleSettings": {
                                        "showBorder": true
                                      }
                                    }
                                  ]
                                },
                                "conditionalVisibility": {
                                  "parameterName": "packsTab",
                                  "comparison": "isEqualTo",
                                  "value": "vmistatus"
                                },
                                "name": "group - VMInsights status"
                              },
                              {
                                "type": 12,
                                "content": {
                                  "version": "NotebookGroup/1.0",
                                  "groupType": "editable",
                                  "title": "IaaS Packs Association",
                                  "items": [
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "resources\n| where type == \"microsoft.insights/datacollectionrules\"\n| extend MPs=tostring(['tags'].MonitorStarterPacks)\n| where isnotempty(MPs) and ['tags'].instanceName =~ '{instanceName}'//or properties.dataSources.performanceCounters[0].name == 'VMInsightsPerfCounters'\n| summarize by Pack=MPs,rulename=tostring(name)\n| join (insightsresources\n| where type == \"microsoft.insights/datacollectionruleassociations\"\n| extend resourceId=split(id,'/providers/Microsoft.Insights/')[0]\n| where isnotnull(properties.dataCollectionRuleId)\n| project rulename=tostring(split(properties.dataCollectionRuleId,\"/\")[8]),resourceName=tostring(split(resourceId,\"/\")[8]),resourceId//ruleId=properties.dataCollectionRuleId\n) on rulename\n| project-away rulename1,resourceId\n| summarize Associated=count() by Pack, rulename\n| order by Pack asc",
                                        "size": 0,
                                        "title": "Select Pack to see associated Machines",
                                        "exportFieldName": "rulename",
                                        "exportParameterName": "selectedRule",
                                        "queryType": 1,
                                        "resourceType": "microsoft.resources/tenants",
                                        "crossComponentResources": [
                                          "value::tenant"
                                        ],
                                        "gridSettings": {
                                          "formatters": [
                                            {
                                              "columnMatch": "Group",
                                              "formatter": 1
                                            }
                                          ],
                                          "filter": true
                                        },
                                        "sortBy": []
                                      },
                                      "customWidth": "50",
                                      "name": "query - 6 - Copy",
                                      "styleSettings": {
                                        "showBorder": true
                                      }
                                    },
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "insightsresources\n| where type == \"microsoft.insights/datacollectionruleassociations\"\n| extend resourceId=split(id,'/providers/Microsoft.Insights/')[0]\n| where isnotnull(properties.dataCollectionRuleId)\n| project rulename=split(properties.dataCollectionRuleId,\"/\")[8],resourceName=split(resourceId,\"/\")[8],resourceId//ruleId=properties.dataCollectionRuleId\n| where '{selectedRule}'==rulename",
                                        "size": 0,
                                        "title": "Associated Machines",
                                        "queryType": 1,
                                        "resourceType": "microsoft.resources/tenants",
                                        "crossComponentResources": [
                                          "value::tenant"
                                        ],
                                        "gridSettings": {
                                          "formatters": [
                                            {
                                              "columnMatch": "Group",
                                              "formatter": 1
                                            }
                                          ],
                                          "filter": true
                                        }
                                      },
                                      "customWidth": "50",
                                      "name": "query - 6 - Copy - Copy",
                                      "styleSettings": {
                                        "showBorder": true
                                      }
                                    }
                                  ]
                                },
                                "conditionalVisibility": {
                                  "parameterName": "packsTab",
                                  "comparison": "isEqualTo",
                                  "value": "associations"
                                },
                                "name": "rulemanagement",
                                "styleSettings": {
                                  "showBorder": true
                                }
                              },
                              {
                                "type": 3,
                                "content": {
                                  "version": "KqlItem/1.0",
                                  "query": "resources\n| where type == \"microsoft.insights/datacollectionrules\"\n| where isnotempty(tags.MonitorStarterPacks) and tags.instanceName =~ '{instanceName}'\n| extend ds=properties.dataSources\n| project id,Type=kind, location,syslog=ds.syslog[0].streams[0], windowsEventLogs=ds.windowsEventLogs[0].streams[0], logsettings=ds.logFiles[0].name,iislogs=ds.iisLogs[0].name,performanceCounters=ds.performanceCounters[0].streams[0],\ndataCollectionEndpointId=properties.dataCollectionEndpointId,transformKql=properties.dataFlows[0].transformKql,workspaceResourceId=properties.destinations.logAnalytics[0].workspaceResourceId,State=properties.provisioningState\n",
                                  "size": 0,
                                  "title": "List of Currently Configured Data Collection Rules",
                                  "showRefreshButton": true,
                                  "exportedParameters": [
                                    {
                                      "parameterName": "selectedRule"
                                    },
                                    {
                                      "fieldName": "destinationName",
                                      "parameterName": "destinationName",
                                      "parameterType": 1
                                    },
                                    {
                                      "fieldName": "",
                                      "parameterName": "resourceGroupName",
                                      "parameterType": 1
                                    },
                                    {
                                      "fieldName": "workspaceResourceId",
                                      "parameterName": "workspace",
                                      "parameterType": 5
                                    },
                                    {
                                      "fieldName": "properties",
                                      "parameterName": "properties",
                                      "parameterType": 1
                                    },
                                    {
                                      "fieldName": "name",
                                      "parameterName": "name",
                                      "parameterType": 1
                                    },
                                    {
                                      "fieldName": "location",
                                      "parameterName": "location",
                                      "parameterType": 1
                                    },
                                    {
                                      "fieldName": "Rule Type",
                                      "parameterName": "kind",
                                      "parameterType": 1
                                    },
                                    {
                                      "parameterType": 1
                                    },
                                    {
                                      "fieldName": "id",
                                      "parameterName": "id",
                                      "parameterType": 1
                                    }
                                  ],
                                  "showExportToExcel": true,
                                  "exportToExcelOptions": "all",
                                  "queryType": 1,
                                  "resourceType": "microsoft.resourcegraph/resources",
                                  "crossComponentResources": [
                                    "{Subscriptions}"
                                  ],
                                  "gridSettings": {
                                    "formatters": [
                                      {
                                        "columnMatch": "id",
                                        "formatter": 13,
                                        "formatOptions": {
                                          "linkColumn": "id",
                                          "linkTarget": "Resource",
                                          "linkIsContextBlade": true,
                                          "showIcon": true
                                        }
                                      },
                                      {
                                        "columnMatch": "Type",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "==",
                                              "thresholdValue": "Windows",
                                              "representation": "Initial_Access",
                                              "text": "{0}{1}"
                                            },
                                            {
                                              "operator": "==",
                                              "thresholdValue": "Linux",
                                              "representation": "Console",
                                              "text": "{0}{1}"
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "Capture",
                                              "text": "Custom"
                                            }
                                          ]
                                        }
                                      },
                                      {
                                        "columnMatch": "location",
                                        "formatter": 17,
                                        "formatOptions": {
                                          "customColumnWidthSetting": "94px"
                                        }
                                      },
                                      {
                                        "columnMatch": "syslog",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "linkTarget": "CellDetails",
                                          "subTarget": "2",
                                          "linkIsContextBlade": true,
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "is Empty",
                                              "representation": "cancelled",
                                              "text": "Not Configured"
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "success",
                                              "text": "Configured"
                                            }
                                          ],
                                          "bladeOpenContext": {
                                            "bladeName": "DataCollectionRulesDataSourceManagementViewModel",
                                            "extensionName": "Microsoft_Azure_Monitoring",
                                            "bladeParameters": [
                                              {
                                                "name": "id",
                                                "source": "column",
                                                "value": "id"
                                              }
                                            ]
                                          },
                                          "customColumnWidthSetting": "20ch"
                                        }
                                      },
                                      {
                                        "columnMatch": "windowsEventLogs",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "is Empty",
                                              "representation": "cancelled",
                                              "text": "Not Configured"
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "success",
                                              "text": "Configured"
                                            }
                                          ],
                                          "customColumnWidthSetting": "20ch"
                                        }
                                      },
                                      {
                                        "columnMatch": "logsettings",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "is Empty",
                                              "representation": "cancelled",
                                              "text": ""
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "success",
                                              "text": ""
                                            }
                                          ],
                                          "customColumnWidthSetting": "10ch"
                                        }
                                      },
                                      {
                                        "columnMatch": "iislogs",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "is Empty",
                                              "representation": "cancelled",
                                              "text": ""
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "success",
                                              "text": ""
                                            }
                                          ],
                                          "customColumnWidthSetting": "10ch"
                                        }
                                      },
                                      {
                                        "columnMatch": "performanceCounters",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "linkColumn": "performanceCounters",
                                          "linkTarget": "CellDetails",
                                          "linkIsContextBlade": true,
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "is Empty",
                                              "representation": "cancelled",
                                              "text": "Not Configured!"
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "success",
                                              "text": "Configured"
                                            }
                                          ],
                                          "customColumnWidthSetting": "20ch"
                                        }
                                      },
                                      {
                                        "columnMatch": "dataCollectionEndpointId",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "linkTarget": "Resource",
                                          "linkIsContextBlade": true,
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "is Empty",
                                              "representation": "cancelled",
                                              "text": "Not Configured"
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "success",
                                              "text": "Configured"
                                            }
                                          ],
                                          "customColumnWidthSetting": "21.7143ch"
                                        }
                                      },
                                      {
                                        "columnMatch": "transformKql",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "linkColumn": "queries",
                                          "linkTarget": "CellDetails",
                                          "linkIsContextBlade": true,
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "is Empty",
                                              "representation": "stopped",
                                              "text": "Not Configured"
                                            },
                                            {
                                              "operator": "contains",
                                              "thresholdValue": "|",
                                              "representation": "success",
                                              "text": "Ingestion KQL"
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "stopped",
                                              "text": "Custom KQL"
                                            }
                                          ],
                                          "bladeOpenContext": {
                                            "bladeName": "CreateMicrosoftTableTransformBlade",
                                            "extensionName": "Microsoft_OperationsManagementSuite_Workspace",
                                            "bladeJsonParameters": "{\r\n\t\"workspaceResourceId\" : \"{workspace}\",\r\n\t\"providers\" : \"microsoft.operationalinsights\",\r\n\t\"table\" : { \r\n\t\t\"name\" : \"{selectedTableName}\",\r\n\t\t\"description\":\"Security events collected from windows machines by Azure Security Center or Azure Sentinel.\",\r\n\t\t\"hasData\":true,\r\n\t\t\"tableType\":\"Microsoft\",\r\n\t\t\"tableAPIState\":\"Any\",\r\n\t\t\"solutions\":[\"Security and Audit\",\"Microsoft Sentinel\"],\r\n\t\t\"categories\":[\"Security\"],\r\n\t\t\"retentionInDaysAsDefault\":false,\r\n\t\t\"totalRetentionInDaysAsDefault\":false,\r\n\t\t\"isEditTransformationEnabled\":true,\r\n\t\t\"isCreateTransformationEnabled\":true\r\n\t},\r\n\t\"isMicrosoftTable\" : true,\r\n\t\"isMigrationRequired\" : false\r\n}"
                                          },
                                          "customColumnWidthSetting": "22ch"
                                        }
                                      },
                                      {
                                        "columnMatch": "workspaceResourceId",
                                        "formatter": 13,
                                        "formatOptions": {
                                          "linkTarget": "Resource",
                                          "showIcon": true,
                                          "customColumnWidthSetting": "16.8571ch"
                                        }
                                      },
                                      {
                                        "columnMatch": "State",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "is Empty",
                                              "representation": "cancelled",
                                              "text": "{0}{1}"
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "success",
                                              "text": "{0}{1}"
                                            }
                                          ]
                                        }
                                      },
                                      {
                                        "columnMatch": "properties",
                                        "formatter": 7,
                                        "formatOptions": {
                                          "linkTarget": "CellDetails",
                                          "linkLabel": "",
                                          "linkIsContextBlade": true,
                                          "customColumnWidthSetting": "5ch"
                                        }
                                      },
                                      {
                                        "columnMatch": "kind",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "is Empty",
                                              "representation": "Capture",
                                              "text": "{0}{1} Custom"
                                            },
                                            {
                                              "operator": "contains",
                                              "thresholdValue": "Linux",
                                              "representation": "Console",
                                              "text": "{0}{1}"
                                            },
                                            {
                                              "operator": "contains",
                                              "thresholdValue": "Windows",
                                              "representation": "Initial_Access",
                                              "text": "{0}{1}"
                                            },
                                            {
                                              "operator": "contains",
                                              "thresholdValue": "WorkspaceTransforms",
                                              "representation": "Persistence",
                                              "text": "{0}{1}"
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "success",
                                              "text": "{0}{1}"
                                            }
                                          ],
                                          "customColumnWidthSetting": "17ch"
                                        }
                                      },
                                      {
                                        "columnMatch": "name",
                                        "formatter": 5
                                      },
                                      {
                                        "columnMatch": "securityEvents",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "linkColumn": "windowsEventLogs",
                                          "linkTarget": "CellDetails",
                                          "linkIsContextBlade": true,
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "is Empty",
                                              "representation": "cancelled",
                                              "text": "Not Configured"
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "success",
                                              "text": "Configured"
                                            }
                                          ],
                                          "customColumnWidthSetting": "20ch"
                                        }
                                      },
                                      {
                                        "columnMatch": "destinations",
                                        "formatter": 5
                                      },
                                      {
                                        "columnMatch": "queries",
                                        "formatter": 5
                                      },
                                      {
                                        "columnMatch": "dataSources",
                                        "formatter": 5
                                      },
                                      {
                                        "columnMatch": "dataFlows",
                                        "formatter": 5,
                                        "formatOptions": {
                                          "aggregation": "Sum"
                                        }
                                      },
                                      {
                                        "columnMatch": "description",
                                        "formatter": 5
                                      },
                                      {
                                        "columnMatch": "destinationName",
                                        "formatter": 5
                                      },
                                      {
                                        "columnMatch": "lastModifiedBy",
                                        "formatter": 5
                                      },
                                      {
                                        "columnMatch": "customEvents",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "linkTarget": "CellDetails",
                                          "linkIsContextBlade": true,
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "is Empty",
                                              "representation": "cancelled",
                                              "text": "Not Configured"
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "success",
                                              "text": "Configured"
                                            }
                                          ],
                                          "customColumnWidthSetting": "20ch"
                                        }
                                      },
                                      {
                                        "columnMatch": "StepTab",
                                        "formatter": 5
                                      }
                                    ],
                                    "rowLimit": 1000,
                                    "filter": true
                                  },
                                  "sortBy": []
                                },
                                "conditionalVisibilities": [
                                  {
                                    "parameterName": "tabSelection",
                                    "comparison": "isEqualTo",
                                    "value": "rulemanagement"
                                  },
                                  {
                                    "parameterName": "packsTab",
                                    "comparison": "isEqualTo",
                                    "value": "dcrdetails"
                                  }
                                ],
                                "name": "Select Existing DCR - Copy",
                                "styleSettings": {
                                  "showBorder": true
                                }
                              }
                            ]
                          },
                          "conditionalVisibility": {
                            "parameterName": "tabSelection",
                            "comparison": "isEqualTo",
                            "value": "rulemanagement"
                          },
                          "name": "packMgmtGroup"
                        },
                        {
                          "type": 12,
                          "content": {
                            "version": "NotebookGroup/1.0",
                            "groupType": "editable",
                            "title": "Agent Management",
                            "items": [
                              {
                                "type": 11,
                                "content": {
                                  "version": "LinkItem/1.0",
                                  "style": "tabs",
                                  "links": [
                                    {
                                      "id": "24d1e53a-ca25-4488-92af-4746e5411951",
                                      "cellValue": "agentTab",
                                      "linkTarget": "parameter",
                                      "linkLabel": "Agents",
                                      "subTarget": "agents",
                                      "preText": "",
                                      "style": "link"
                                    },
                                    {
                                      "id": "230109a1-ed5a-4f33-b577-dab3c9b97c4d",
                                      "cellValue": "agentTab",
                                      "linkTarget": "parameter",
                                      "linkLabel": "HeartBeat",
                                      "subTarget": "heartbeat",
                                      "style": "link"
                                    },
                                    {
                                      "id": "7413ed40-fb13-48b3-acee-d27259ca7617",
                                      "cellValue": "agentTab",
                                      "linkTarget": "parameter",
                                      "linkLabel": "VM Applications",
                                      "subTarget": "vmapplications",
                                      "style": "link"
                                    }
                                  ]
                                },
                                "name": "links - 3"
                              },
                              {
                                "type": 3,
                                "content": {
                                  "version": "KqlItem/1.0",
                                  "query": "Resources\n| where type == 'microsoft.compute/virtualmachines' and tolower(tags.Vendor) != 'databricks'\n| extend\n    JoinID = toupper(id),\n    OSType = tostring(properties.storageProfile.osDisk.osType),\n    Instance=tostring(tags.instanceName)\n| join kind=leftouter(\n    Resources\n    | where ( type == 'microsoft.compute/virtualmachines/extensions') and name in ('AzureMonitorLinuxAgent', 'AzureMonitorWindowsAgent')\n    | extend\n        State= tolower(properties.provisioningState),\n        VMId = toupper(substring(id, 0, indexof(id, '/extensions'))),\n        ExtensionName = name,\n        UpgradeEnabled =  tostring(properties.enableAutomaticUpgrade)\n) on $left.JoinID == $right.VMId\n| join kind=leftouter(\n    Resources\n    | where ( type == 'microsoft.compute/virtualmachines/extensions') and name in ('DependencyAgentWindows','DependencyAgentLinux')\n    | extend\n        State= tolower(properties.provisioningState),\n        VMId = toupper(substring(id, 0, indexof(id, '/extensions'))),\n        DepAgent = name,\n        UpgradeEnabled =  tostring(properties.enableAutomaticUpgrade)\n) on $left.JoinID == $right.VMId\n| union (Resources\n| where type == 'microsoft.hybridcompute/machines' and tolower(tags.Vendor) != 'databricks'\n| extend\n    JoinID = toupper(id),\n    OSType = tostring(properties.osType),\n    Instance=tostring(tags.instanceName)\n| join kind=leftouter(\n    Resources\n    | where type == 'microsoft.hybridcompute/machines/extensions' and name in ('AzureMonitorLinuxAgent', 'AzureMonitorWindowsAgent')\n    | extend\n        State= tolower(properties.provisioningState),\n        VMId = toupper(substring(id, 0, indexof(id, '/extensions'))),\n        ExtensionName = name,\n        UpgradeEnabled =  tostring(properties.enableAutomaticUpgrade)\n) on $left.JoinID == $right.VMId\n| join kind=leftouter(\n    Resources\n    | where type == 'microsoft.hybridcompute/machines/extensions' and name in ('DependencyAgentWindows','DependencyAgentLinux')\n    | extend\n        State= tolower(properties.provisioningState),\n        VMId = toupper(substring(id, 0, indexof(id, '/extensions'))),\n        DepAgent = name,\n        UpgradeEnabled =  tostring(properties.enableAutomaticUpgrade)\n) on $left.JoinID == $right.VMId)\n| summarize by id, OSType, ['Dependency Agent']=iff(isempty(DepAgent),'N/A',DepAgent),ExtensionName=iff(isempty(ExtensionName),'N/A',ExtensionName), ['AMA State']=State, ['AMA Upg']=UpgradeEnabled,['Subscription']=subscriptionId,['Resource Group']=resourceGroup, location, Instance\n| extend Install=iff(ExtensionName=='N/A','Install',iff(['AMA State']<> 'succeeded','Unhealthy','')), Uninstall=iff((ExtensionName<>'N/A') and (['AMA State'] == 'succeeded'),'Uninstall',iff(['AMA State'] <> 'succeeded','Warning',''))\n",
                                  "size": 0,
                                  "title": "Agent Install Status",
                                  "exportMultipleValues": true,
                                  "exportedParameters": [
                                    {
                                      "parameterType": 1
                                    },
                                    {
                                      "parameterName": "vmstoinstall",
                                      "parameterType": 5,
                                      "quote": ""
                                    }
                                  ],
                                  "showExportToExcel": true,
                                  "exportToExcelOptions": "all",
                                  "queryType": 1,
                                  "resourceType": "microsoft.resources/tenants",
                                  "crossComponentResources": [
                                    "value::tenant"
                                  ],
                                  "visualization": "table",
                                  "gridSettings": {
                                    "formatters": [
                                      {
                                        "columnMatch": "Dependency Agent",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "==",
                                              "thresholdValue": "N/A",
                                              "representation": "1",
                                              "text": "",
                                              "tooltipFormat": {
                                                "tooltip": "Not Installed"
                                              }
                                            },
                                            {
                                              "operator": "==",
                                              "thresholdValue": "DependencyAgentWindows",
                                              "representation": "success",
                                              "text": "",
                                              "tooltipFormat": {
                                                "tooltip": "Windows"
                                              }
                                            },
                                            {
                                              "operator": "==",
                                              "thresholdValue": "DependencyAgentLinux",
                                              "representation": "success",
                                              "text": "",
                                              "tooltipFormat": {
                                                "tooltip": "Linux"
                                              }
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "unknown",
                                              "text": "{0}{1}"
                                            }
                                          ]
                                        },
                                        "tooltipFormat": {
                                          "tooltip": "{0}{1}"
                                        }
                                      },
                                      {
                                        "columnMatch": "ExtensionName",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "==",
                                              "thresholdValue": "AzureMonitorLinuxAgent",
                                              "representation": "success",
                                              "text": "Linux Agent"
                                            },
                                            {
                                              "operator": "==",
                                              "thresholdValue": "AzureMonitorWindowsAgent",
                                              "representation": "success",
                                              "text": "Windows Agent"
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "stopped",
                                              "text": "No Agent"
                                            }
                                          ],
                                          "armActionContext": {
                                            "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                            "headers": [],
                                            "params": [],
                                            "body": "{ \n  \"function\": \"agentMgmt\",\n  \"functionBody\" : {\n    \"Action\":\"AddAgent\",\n    \"Resources\": [{vmstoinstall}]\n  }\n}",
                                            "httpMethod": "POST",
                                            "title": "Install Agent",
                                            "description": "# Installing agent(s) for the following machine(s):\n\n{vmstoinstall}\n",
                                            "actionName": "InstallAgent",
                                            "runLabel": "InstallAgent"
                                          },
                                          "customColumnWidthSetting": "20ch"
                                        },
                                        "tooltipFormat": {
                                          "tooltip": "Click To Install Agent"
                                        }
                                      },
                                      {
                                        "columnMatch": "State",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "==",
                                              "thresholdValue": "succeeded",
                                              "representation": "success",
                                              "text": ""
                                            },
                                            {
                                              "operator": "==",
                                              "thresholdValue": "failed",
                                              "representation": "3",
                                              "text": "failed"
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "unknown",
                                              "text": ""
                                            }
                                          ]
                                        }
                                      },
                                      {
                                        "columnMatch": "AMA Upg",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "is Empty",
                                              "representation": "1",
                                              "text": "",
                                              "tooltipFormat": {
                                                "tooltip": "Auto Upgrade not enabled"
                                              }
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "success",
                                              "text": "",
                                              "tooltipFormat": {
                                                "tooltip": "Enabled"
                                              }
                                            }
                                          ]
                                        }
                                      },
                                      {
                                        "columnMatch": "Subscription",
                                        "formatter": 15,
                                        "formatOptions": {
                                          "linkTarget": null,
                                          "showIcon": true
                                        }
                                      },
                                      {
                                        "columnMatch": "Resource Group",
                                        "formatter": 14,
                                        "formatOptions": {
                                          "linkTarget": null,
                                          "showIcon": true
                                        }
                                      },
                                      {
                                        "columnMatch": "Install",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "linkTarget": "ArmAction",
                                          "linkIsContextBlade": true,
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "is Empty",
                                              "representation": "success",
                                              "text": "Ok"
                                            },
                                            {
                                              "operator": "==",
                                              "thresholdValue": "Unhealthy",
                                              "representation": "2",
                                              "text": "{0}{1}"
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "Add",
                                              "text": "{0}{1}"
                                            }
                                          ],
                                          "armActionContext": {
                                            "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                            "headers": [],
                                            "params": [],
                                            "body": "{ \n  \"function\": \"agentMgmt\",\n  \"functionBody\" : {\n    \"Action\":\"AddAgent\",\n    \"Resources\": [{vmstoinstall}]\n  }\n}\n",
                                            "httpMethod": "POST",
                                            "title": "Install Agent",
                                            "description": "# Installing agent(s) for the following machine(s):\n\n\n{vmstoinstall}\n",
                                            "actionName": "Install Agent",
                                            "runLabel": "Install Agent"
                                          }
                                        }
                                      },
                                      {
                                        "columnMatch": "Uninstall",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "linkTarget": "ArmAction",
                                          "linkIsContextBlade": true,
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "is Empty",
                                              "representation": "3",
                                              "text": "Not Installed"
                                            },
                                            {
                                              "operator": "==",
                                              "thresholdValue": "Warning",
                                              "representation": "1",
                                              "text": "{0}{1}"
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "warning",
                                              "text": "{0}{1}"
                                            }
                                          ],
                                          "armActionContext": {
                                            "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                            "headers": [],
                                            "params": [],
                                            "body": "{ \n  \"function\": \"agentMgmt\",\n  \"functionBody\" : {\n    \"Action\":\"RemoveAgent\",\n    \"Resources\": [{vmstoinstall}]\n  }\n}\n",
                                            "httpMethod": "POST",
                                            "title": "Remove Agent",
                                            "description": "# Removing agent(s) for the following machine(s):\n\n## <span style=\"color:red\">Warning! </span> Removing the agent from the machine(s) may result in data not being collected.\n\n\n{vmstoinstall}\n",
                                            "actionName": "RemoveAgent",
                                            "runLabel": "RemoveAgent"
                                          }
                                        }
                                      },
                                      {
                                        "columnMatch": "subscriptionId",
                                        "formatter": 15,
                                        "formatOptions": {
                                          "linkTarget": null,
                                          "showIcon": true
                                        }
                                      },
                                      {
                                        "columnMatch": "DepAgent",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "==",
                                              "thresholdValue": "N/A",
                                              "representation": "1",
                                              "text": "{0}{1}",
                                              "tooltipFormat": {
                                                "tooltip": "Not Installed"
                                              }
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "success",
                                              "text": "{0}{1}",
                                              "tooltipFormat": {
                                                "tooltip": "Installed"
                                              }
                                            }
                                          ]
                                        },
                                        "tooltipFormat": {
                                          "tooltip": "Dependency Agent Status"
                                        }
                                      },
                                      {
                                        "columnMatch": "UpgradeEnabled",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "==",
                                              "thresholdValue": "true",
                                              "representation": "success",
                                              "text": ""
                                            },
                                            {
                                              "operator": "==",
                                              "thresholdValue": "false",
                                              "representation": "2",
                                              "text": ""
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "unknown",
                                              "text": ""
                                            }
                                          ]
                                        }
                                      }
                                    ],
                                    "filter": true
                                  },
                                  "sortBy": []
                                },
                                "conditionalVisibility": {
                                  "parameterName": "agentTab",
                                  "comparison": "isEqualTo",
                                  "value": "agents"
                                },
                                "showPin": false,
                                "name": "query - agent install status",
                                "styleSettings": {
                                  "showBorder": true
                                }
                              },
                              {
                                "type": 3,
                                "content": {
                                  "version": "KqlItem/1.0",
                                  "query": "Resources\n| where type == 'microsoft.compute/virtualmachines'\n| extend\n    JoinID = toupper(id),\n    OSName = tostring(properties.osProfile.computerName),\n    OSType = tostring(properties.storageProfile.osDisk.osType)\n| join kind=leftouter(\n    Resources\n    | where ( type == 'microsoft.compute/virtualmachines/extensions') and name in ('AzureMonitorLinuxAgent', 'AzureMonitorWindowsAgent')\n    | extend\n        VMId = toupper(substring(id, 0, indexof(id, '/extensions'))),\n        ExtensionName = name\n) on $left.JoinID == $right.VMId\n| union (Resources\n| where type == 'microsoft.hybridcompute/machines'\n| extend\n    JoinID = toupper(id),\n    OSName = tostring(properties.osProfile.computerName),\n    OSType = tostring(properties.osType)\n| join kind=leftouter(\n    Resources\n    | where type == 'microsoft.hybridcompute/machines/extensions' and name in ('AzureMonitorLinuxAgent', 'AzureMonitorWindowsAgent')\n    | extend\n        VMId = toupper(substring(id, 0, indexof(id, '/extensions'))),\n        ExtensionName = name\n) on $left.JoinID == $right.VMId)\n| extend ExtensionName = iff(isnotempty(ExtensionName),ExtensionName, \"NotInstalled\")\n| summarize count() by ExtensionName\n| sort by ExtensionName asc",
                                  "size": 1,
                                  "title": "Agent Install Status",
                                  "queryType": 1,
                                  "resourceType": "microsoft.resources/tenants",
                                  "crossComponentResources": [
                                    "value::tenant"
                                  ],
                                  "visualization": "tiles",
                                  "gridSettings": {
                                    "formatters": [
                                      {
                                        "columnMatch": "ExtensionName",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "linkTarget": "CellDetails",
                                          "linkIsContextBlade": true,
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "==",
                                              "thresholdValue": "AzureMonitorLinuxAgent",
                                              "representation": "success",
                                              "text": "Linux Agent"
                                            },
                                            {
                                              "operator": "==",
                                              "thresholdValue": "AzureMonitorWindowsAgent",
                                              "representation": "success",
                                              "text": "Windows Agent"
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": "stopped",
                                              "text": "No Agent"
                                            }
                                          ],
                                          "customColumnWidthSetting": "20ch"
                                        }
                                      }
                                    ],
                                    "filter": true
                                  },
                                  "tileSettings": {
                                    "titleContent": {
                                      "columnMatch": "ExtensionName",
                                      "formatter": 1
                                    },
                                    "leftContent": {
                                      "columnMatch": "count_",
                                      "formatter": 12,
                                      "formatOptions": {
                                        "palette": "auto"
                                      },
                                      "numberFormat": {
                                        "unit": 17,
                                        "options": {
                                          "maximumSignificantDigits": 3,
                                          "maximumFractionDigits": 2
                                        }
                                      }
                                    },
                                    "showBorder": false
                                  },
                                  "chartSettings": {
                                    "seriesLabelSettings": [
                                      {
                                        "seriesName": "",
                                        "label": "No Agent",
                                        "color": "red"
                                      }
                                    ]
                                  }
                                },
                                "customWidth": "25",
                                "conditionalVisibility": {
                                  "parameterName": "agentTab",
                                  "comparison": "isEqualTo",
                                  "value": "agents"
                                },
                                "name": "query - agent install status - graph",
                                "styleSettings": {
                                  "showBorder": true
                                }
                              },
                              {
                                "type": 3,
                                "content": {
                                  "version": "KqlItem/1.0",
                                  "query": "Heartbeat | where Category == \"Azure Monitor Agent\"\n| summarize arg_max(TimeGenerated, *) by Computer\n| project  Computer,LastHeartbeat=TimeGenerated, ['SecondsAgo']=datetime_diff('second',now(),TimeGenerated)\n| sort by SecondsAgo asc",
                                  "size": 4,
                                  "title": "Last Heartbeat (24 hours)",
                                  "timeContext": {
                                    "durationMs": 86400000
                                  },
                                  "showExportToExcel": true,
                                  "exportToExcelOptions": "all",
                                  "queryType": 0,
                                  "resourceType": "microsoft.operationalinsights/workspaces",
                                  "crossComponentResources": [
                                    "{Workspace}"
                                  ],
                                  "gridSettings": {
                                    "formatters": [
                                      {
                                        "columnMatch": "SecondsAgo",
                                        "formatter": 18,
                                        "formatOptions": {
                                          "thresholdsOptions": "icons",
                                          "thresholdsGrid": [
                                            {
                                              "operator": "<=",
                                              "thresholdValue": "600",
                                              "representation": "success",
                                              "text": "{0}{1}"
                                            },
                                            {
                                              "operator": ">",
                                              "thresholdValue": "600",
                                              "representation": "2",
                                              "text": "{0}{1}"
                                            },
                                            {
                                              "operator": "Default",
                                              "thresholdValue": null,
                                              "representation": null,
                                              "text": "{0}{1}"
                                            }
                                          ]
                                        }
                                      }
                                    ],
                                    "filter": true
                                  }
                                },
                                "customWidth": "50",
                                "conditionalVisibility": {
                                  "parameterName": "agentTab",
                                  "comparison": "isEqualTo",
                                  "value": "heartbeat"
                                },
                                "name": "query - active alerts",
                                "styleSettings": {
                                  "showBorder": true
                                }
                              },
                              {
                                "type": 3,
                                "content": {
                                  "version": "KqlItem/1.0",
                                  "query": "resources\n| where type =~ \"microsoft.compute/virtualmachines\"\n| mvexpand with_itemindex=i apps=properties.applicationProfile.galleryApplications\n| where apps != ''\n| extend splitFields = split(apps.packageReferenceId, '/')\n| extend Gallery = strcat('/',strcat_array(array_slice(splitFields, 1, 8), '/'))\n| project Computer=id, ['Application Version']=tostring(apps.packageReferenceId), Gallery\n| summarize by Gallery,['Application Version'], Computer\n| sort by Gallery asc",
                                  "size": 0,
                                  "title": "Client Status (VM Applications)",
                                  "showExportToExcel": true,
                                  "exportToExcelOptions": "all",
                                  "queryType": 1,
                                  "resourceType": "microsoft.resources/tenants",
                                  "crossComponentResources": [
                                    "value::tenant"
                                  ],
                                  "gridSettings": {
                                    "formatters": [
                                      {
                                        "columnMatch": "Gallery",
                                        "formatter": 13,
                                        "formatOptions": {
                                          "linkTarget": "Resource",
                                          "showIcon": true
                                        }
                                      },
                                      {
                                        "columnMatch": "Application Name",
                                        "formatter": 13,
                                        "formatOptions": {
                                          "linkTarget": "Resource",
                                          "showIcon": true
                                        }
                                      },
                                      {
                                        "columnMatch": "Computer",
                                        "formatter": 13,
                                        "formatOptions": {
                                          "linkTarget": "Resource",
                                          "showIcon": true
                                        }
                                      }
                                    ],
                                    "filter": true
                                  },
                                  "sortBy": []
                                },
                                "conditionalVisibility": {
                                  "parameterName": "agentTab",
                                  "comparison": "isEqualTo",
                                  "value": "vmapplications"
                                },
                                "name": "query - vmapplications",
                                "styleSettings": {
                                  "showBorder": true
                                }
                              }
                            ]
                          },
                          "conditionalVisibility": {
                            "parameterName": "tabSelection",
                            "comparison": "isEqualTo",
                            "value": "agentmgmt"
                          },
                          "name": "AgentMGMTGroup"
                        },
                        {
                          "type": 12,
                          "content": {
                            "version": "NotebookGroup/1.0",
                            "groupType": "editable",
                            "title": "Auto Discovery Prototype - Use with caution.",
                            "loadType": "always",
                            "items": [
                              {
                                "type": 11,
                                "content": {
                                  "version": "LinkItem/1.0",
                                  "style": "tabs",
                                  "links": [
                                    {
                                      "id": "6346adc4-5e50-4b56-ab9d-0d8b17b8a86f",
                                      "cellValue": "discTab",
                                      "linkTarget": "parameter",
                                      "linkLabel": "Discovery Results",
                                      "subTarget": "discResults",
                                      "preText": "",
                                      "style": "link"
                                    },
                                    {
                                      "id": "a914f6ed-4d20-4895-bed4-48a32f3a5c21",
                                      "cellValue": "discTab",
                                      "linkTarget": "parameter",
                                      "linkLabel": "Discovery Config",
                                      "subTarget": "discConfig",
                                      "style": "link"
                                    },
                                    {
                                      "id": "3a11d108-b694-4989-9302-48010831377a",
                                      "cellValue": "discTab",
                                      "linkTarget": "parameter",
                                      "linkLabel": "Discovery Data",
                                      "subTarget": "discData",
                                      "style": "link"
                                    }
                                  ]
                                },
                                "name": "links - 10"
                              },
                              {
                                "type": 12,
                                "content": {
                                  "version": "NotebookGroup/1.0",
                                  "groupType": "editable",
                                  "title": "VM Discovery",
                                  "items": [
                                    {
                                      "type": 1,
                                      "content": {
                                        "json": "When Discovery is first enabled, the Azure Monitoring Agent will also be installed to the selected servers along with a VM Application agent to collect discovery data. Data will be sent to the Log Analytics agent.",
                                        "style": "info"
                                      },
                                      "name": "text - 3"
                                    },
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "insightsresources\n| where type == \"microsoft.insights/datacollectionruleassociations\"\n| extend resourceId=split(id,'/providers/Microsoft.Insights/')[0]\n| where isnotnull(properties.dataCollectionRuleId)\n| project rulename=tostring(split(properties.dataCollectionRuleId,\"/\")[8]),resourceName=tostring(split(resourceId,\"/\")[8]),resourceId=tostring(resourceId)//ruleId=properties.dataCollectionRuleId\n| join kind= inner  (\nresources\n| where type == \"microsoft.insights/datacollectionrules\"\n| extend MPs=tostring(['tags'].MonitorStarterPacks), instanceName = ['tags'].instanceName\n| where instanceName == '{instanceName}'\n| where isnotempty(MPs) and (MPs =~ 'WinDisc' or MPs =~ 'LxDisc')//or properties.dataSources.performanceCounters[0].name == 'VMInsightsPerfCounters'\n| summarize by Pack=MPs,rulename=tostring(name)) on rulename\n| summarize by resourceId, Pack\n| summarize Packs=make_list(Pack) by resourceId",
                                        "size": 0,
                                        "queryType": 1,
                                        "resourceType": "microsoft.resources/tenants",
                                        "crossComponentResources": [
                                          "value::tenant"
                                        ],
                                        "gridSettings": {
                                          "formatters": [
                                            {
                                              "columnMatch": "Packs",
                                              "formatter": 1
                                            }
                                          ]
                                        }
                                      },
                                      "conditionalVisibility": {
                                        "parameterName": "test",
                                        "comparison": "isEqualTo",
                                        "value": "1"
                                      },
                                      "showPin": false,
                                      "name": "query - associatedVMs"
                                    },
                                    {
                                      "type": 3,
                                      "content": {
                                        "version": "KqlItem/1.0",
                                        "query": "resources | where type =~ 'microsoft.compute/virtualmachines' \n| extend MPs=tostring(['tags'].MonitorStarterPacks), instanceName = ['tags'].instanceName\n| where instanceName == '{instanceName}'\n| where isnotempty(MPs) and (MPs contains 'WinDisc' or MPs contains 'LxDisc')\n| extend Packs = iff(MPs contains 'WinDisc','WinDisc','LxDisc')\n| project Resource=id,['Resource Group']=resourceGroup,Packs, OS=properties.storageProfile.osDisk.osType, subscriptionId, Location=location\n",
                                        "size": 0,
                                        "queryType": 1,
                                        "resourceType": "microsoft.resources/tenants",
                                        "crossComponentResources": [
                                          "value::tenant"
                                        ],
                                        "gridSettings": {
                                          "formatters": [
                                            {
                                              "columnMatch": "Packs",
                                              "formatter": 1
                                            },
                                            {
                                              "columnMatch": "subscriptionId",
                                              "formatter": 15,
                                              "formatOptions": {
                                                "linkTarget": null,
                                                "showIcon": true
                                              }
                                            }
                                          ]
                                        }
                                      },
                                      "conditionalVisibility": {
                                        "parameterName": "showHidden",
                                        "comparison": "isEqualTo",
                                        "value": "yes"
                                      },
                                      "showPin": false,
                                      "name": "query - taggedVMs"
                                    },
                                    {
                                      "type": 12,
                                      "content": {
                                        "version": "NotebookGroup/1.0",
                                        "groupType": "editable",
                                        "items": [
                                          {
                                            "type": 3,
                                            "content": {
                                              "version": "KqlItem/1.0",
                                              "query": "{\"version\":\"Merge/1.0\",\"merges\":[{\"id\":\"964f21b6-ee11-43c6-a6e2-4119d566812c\",\"mergeType\":\"outer\",\"leftTable\":\"query - taggedVMs\",\"rightTable\":\"query - associatedVMs\",\"leftColumn\":\"Resource\",\"rightColumn\":\"resourceId\"}],\"projectRename\":[{\"originalName\":\"[query - taggedVMs].Resource\",\"mergedName\":\"Resource\",\"fromId\":\"964f21b6-ee11-43c6-a6e2-4119d566812c\"},{\"originalName\":\"[query - taggedVMs].Resource Group\",\"mergedName\":\"Resource Group\",\"fromId\":\"964f21b6-ee11-43c6-a6e2-4119d566812c\"},{\"originalName\":\"[query - taggedVMs].Packs\",\"mergedName\":\"Packs\",\"fromId\":\"964f21b6-ee11-43c6-a6e2-4119d566812c\"},{\"originalName\":\"[query - taggedVMs].OS\",\"mergedName\":\"OS\",\"fromId\":\"964f21b6-ee11-43c6-a6e2-4119d566812c\"},{\"originalName\":\"[query - taggedVMs].Location\",\"mergedName\":\"Location\",\"fromId\":\"964f21b6-ee11-43c6-a6e2-4119d566812c\"},{\"originalName\":\"[query - taggedVMs].Subscription\",\"mergedName\":\"Subscription\",\"fromId\":\"964f21b6-ee11-43c6-a6e2-4119d566812c\"},{\"originalName\":\"[query - associatedVMs].Packs\",\"mergedName\":\"Associated\",\"fromId\":\"964f21b6-ee11-43c6-a6e2-4119d566812c\"},{\"originalName\":\"[query - taggedVMs].subscriptionId\",\"mergedName\":\"subscriptionId\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - associatedVMs].resourceId\"}]}",
                                              "size": 0,
                                              "title": "Discoverable Machines",
                                              "exportMultipleValues": true,
                                              "exportedParameters": [
                                                {
                                                  "fieldName": "",
                                                  "parameterName": "taggedVMsDiscovery",
                                                  "parameterType": 1,
                                                  "quote": ""
                                                }
                                              ],
                                              "showExportToExcel": true,
                                              "queryType": 7,
                                              "visualization": "table",
                                              "gridSettings": {
                                                "formatters": [
                                                  {
                                                    "columnMatch": "Packs",
                                                    "formatter": 18,
                                                    "formatOptions": {
                                                      "thresholdsOptions": "icons",
                                                      "thresholdsGrid": [
                                                        {
                                                          "operator": "contains",
                                                          "thresholdValue": "WinDisc",
                                                          "text": "WinDisc"
                                                        },
                                                        {
                                                          "operator": "contains",
                                                          "thresholdValue": "LxDisc",
                                                          "text": "LxDisc"
                                                        },
                                                        {
                                                          "operator": "Default",
                                                          "thresholdValue": null,
                                                          "representation": "unknown",
                                                          "text": "{0}{1}"
                                                        }
                                                      ]
                                                    }
                                                  },
                                                  {
                                                    "columnMatch": "OS",
                                                    "formatter": 1
                                                  },
                                                  {
                                                    "columnMatch": "Associated",
                                                    "formatter": 1
                                                  },
                                                  {
                                                    "columnMatch": "subscriptionId",
                                                    "formatter": 15,
                                                    "formatOptions": {
                                                      "linkTarget": null,
                                                      "showIcon": true
                                                    }
                                                  },
                                                  {
                                                    "columnMatch": "Associated Packs",
                                                    "formatter": 1
                                                  }
                                                ],
                                                "filter": true
                                              }
                                            },
                                            "showPin": false,
                                            "name": "query-mergeVMsDiscovery",
                                            "styleSettings": {
                                              "showBorder": true
                                            }
                                          },
                                          {
                                            "type": 11,
                                            "content": {
                                              "version": "LinkItem/1.0",
                                              "style": "paragraph",
                                              "links": [
                                                {
                                                  "id": "36b65f94-1c3d-4e7a-b771-677a2081d288",
                                                  "cellValue": "",
                                                  "linkTarget": "ArmAction",
                                                  "linkLabel": "Remove Discovery Pack(s)",
                                                  "preText": "",
                                                  "style": "primary",
                                                  "linkIsContextBlade": true,
                                                  "armActionContext": {
                                                    "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                                    "headers": [],
                                                    "params": [
                                                      {
                                                        "key": "action",
                                                        "value": "removeTag"
                                                      }
                                                    ],
                                                    "body": "{ \n  \"function\": \"packmgmt\",\n  \"functionBody\" : {\n    \"Action\":\"RemoveTag\",\n    \"Resources\": [{taggedVMsDiscovery}],\n    \"PackType\":\"Discovery\"\n  }\n}",
                                                    "httpMethod": "POST",
                                                    "title": "Remove Monitoring",
                                                    "description": "# Please confirm the change.\n\nRemove Monitoring for Discovery Pack(s) \n\nServers:\n\n{taggedVMsDiscovery}",
                                                    "runLabel": "Confirm"
                                                  }
                                                }
                                              ]
                                            },
                                            "customWidth": "75",
                                            "conditionalVisibility": {
                                              "parameterName": "taggedVMsDiscovery",
                                              "comparison": "isNotEqualTo"
                                            },
                                            "name": "links - 1"
                                          }
                                        ],
                                        "exportParameters": true
                                      },
                                      "customWidth": "50",
                                      "name": "TaggedGroupDiscovery"
                                    },
                                    {
                                      "type": 12,
                                      "content": {
                                        "version": "NotebookGroup/1.0",
                                        "groupType": "editable",
                                        "items": [
                                          {
                                            "type": 3,
                                            "content": {
                                              "version": "KqlItem/1.0",
                                              "query": "resources | where type =~ 'microsoft.compute/virtualmachines' \n| extend MPs=tostring(['tags'].MonitorStarterPacks)\n| where isempty(MPs) or (MPs notcontains 'WinDisc' and MPs notcontains 'LxDisc')//and subscriptionId in split('{Subscriptions:subscriptionId}',',')\n| project Resource=id,['Resource Group']=resourceGroup, OS=properties.storageProfile.osDisk.osType, Subscription=subscriptionId, Location=location\n| extend Pack=iff(OS=~'Windows',\"WinDisc\", \"LxDisc\")\n\n",
                                              "size": 0,
                                              "title": "Non-discoverable Machines",
                                              "showRefreshButton": true,
                                              "exportMultipleValues": true,
                                              "exportedParameters": [
                                                {
                                                  "parameterName": "vmstotagDiscovery",
                                                  "parameterType": 1,
                                                  "quote": ""
                                                }
                                              ],
                                              "showExportToExcel": true,
                                              "queryType": 1,
                                              "resourceType": "microsoft.resourcegraph/resources",
                                              "crossComponentResources": [
                                                "{Subscriptions}"
                                              ],
                                              "visualization": "table",
                                              "gridSettings": {
                                                "formatters": [
                                                  {
                                                    "columnMatch": "Resource Group",
                                                    "formatter": 14,
                                                    "formatOptions": {
                                                      "linkTarget": null,
                                                      "showIcon": true
                                                    }
                                                  },
                                                  {
                                                    "columnMatch": "tag",
                                                    "formatter": 5
                                                  },
                                                  {
                                                    "columnMatch": "subscriptionId",
                                                    "formatter": 13,
                                                    "formatOptions": {
                                                      "linkTarget": null,
                                                      "showIcon": true
                                                    }
                                                  }
                                                ],
                                                "filter": true
                                              },
                                              "sortBy": []
                                            },
                                            "name": "Non Discoverable Servers",
                                            "styleSettings": {
                                              "margin": "400",
                                              "padding": "400",
                                              "showBorder": true
                                            }
                                          },
                                          {
                                            "type": 11,
                                            "content": {
                                              "version": "LinkItem/1.0",
                                              "style": "paragraph",
                                              "links": [
                                                {
                                                  "id": "91fb0fed-0e4f-41ce-9024-98a3cc4432a7",
                                                  "linkTarget": "ArmAction",
                                                  "linkLabel": "Enable Discovery for servers.",
                                                  "preText": "",
                                                  "style": "primary",
                                                  "linkIsContextBlade": true,
                                                  "armActionContext": {
                                                    "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                                    "headers": [],
                                                    "params": [
                                                      {
                                                        "key": "action",
                                                        "value": "addTag"
                                                      }
                                                    ],
                                                    "body": "{ \n  \"function\": \"packmgmt\",\n  \"functionBody\" : {\n    \"Action\":\"AddPack\",\n    \"Resources\": [{vmstotagDiscovery}],\n    \"PackType\": \"Discovery\"\n  }\n}",
                                                    "httpMethod": "POST",
                                                    "title": "Enable Monitoring Packs",
                                                    "description": "# This will enable the pack for the following servers:\n{vmstotagDiscovery}\n\nby adding the Pack(s) to the resource(s).\n",
                                                    "actionName": "EnableMonitoring",
                                                    "runLabel": "Confirm"
                                                  }
                                                }
                                              ]
                                            },
                                            "customWidth": "50",
                                            "conditionalVisibility": {
                                              "parameterName": "vmstotagDiscovery",
                                              "comparison": "isNotEqualTo"
                                            },
                                            "name": "links - 1 - Copy"
                                          }
                                        ],
                                        "exportParameters": true
                                      },
                                      "customWidth": "50",
                                      "name": "NonTaggedGroupDiscovery"
                                    }
                                  ]
                                },
                                "conditionalVisibility": {
                                  "parameterName": "discTab",
                                  "comparison": "isEqualTo",
                                  "value": "discConfig"
                                },
                                "name": "Servers - Discovery",
                                "styleSettings": {
                                  "showBorder": true
                                }
                              },
                              {
                                "type": 12,
                                "content": {
                                  "version": "NotebookGroup/1.0",
                                  "groupType": "editable",
                                  "items": [
                                    {
                                      "type": 11,
                                      "content": {
                                        "version": "LinkItem/1.0",
                                        "style": "list",
                                        "links": [
                                          {
                                            "id": "b3bb5a4d-0f95-4e9a-8634-9cb027f860aa",
                                            "linkTarget": "ArmAction",
                                            "linkLabel": "Remediate (all policies)",
                                            "preText": "",
                                            "style": "primary",
                                            "linkIsContextBlade": true,
                                            "armActionContext": {
                                              "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                              "headers": [],
                                              "params": [],
                                              "body": "{ \n  \"function\": \"policymgmt\",\n  \"functionBody\" : {\n    \"SolutionTag\":\"MonitorStarterPacks\",\n    \"Action\": \"Remediate\"\n  }\n}",
                                              "httpMethod": "POST",
                                              "title": "Rmediate policies",
                                              "description": "# Please confirm remediation\n\nThis button will trigger a global policy remeadiation. \n\nThe backend script will go through the policies and initiatives, finding the ones that are not compliant, and will trigger remediation. \n\nIt is not restricted to the ones in this screen.",
                                              "actionName": "Remediate",
                                              "runLabel": "Confirm"
                                            }
                                          },
                                          {
                                            "id": "8dfc5afa-108a-4713-8a0c-651c3a32c5f1",
                                            "linkTarget": "ArmAction",
                                            "linkLabel": "Check Compliance",
                                            "style": "primary",
                                            "linkIsContextBlade": true,
                                            "armActionContext": {
                                              "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                              "headers": [],
                                              "params": [],
                                              "body": "{ \n  \"function\": \"policymgmt\",\n  \"functionBody\" : {\n    \"SolutionTag\":\"MonitorStarterPacks\",\n    \"Action\": \"Scan\"\n  }\n}",
                                              "httpMethod": "POST",
                                              "title": "Check Policy Compliance",
                                              "description": "# Please confirm the scan.",
                                              "runLabel": "Confirm"
                                            }
                                          }
                                        ]
                                      },
                                      "name": "links - 3"
                                    },
                                    {
                                      "type": 1,
                                      "content": {
                                        "json": "## Policy Compliance Check\nThis task will trigger a tenant wide check for policy compliance.\n\n## Policy Remediation\n\nThis Task will trigger remediation for the policies in the list that are considered not compliant at this time.",
                                        "style": "info"
                                      },
                                      "conditionalVisibilities": [
                                        {
                                          "parameterName": "tabSelection",
                                          "comparison": "isEqualTo",
                                          "value": "policystatus"
                                        },
                                        {
                                          "parameterName": "showHelp",
                                          "comparison": "isEqualTo",
                                          "value": "yes"
                                        }
                                      ],
                                      "name": "text - 7"
                                    }
                                  ]
                                },
                                "customWidth": "25",
                                "conditionalVisibility": {
                                  "parameterName": "discTab",
                                  "comparison": "isEqualTo",
                                  "value": "discPolicies"
                                },
                                "name": "ComplianceButtons - Copy"
                              },
                              {
                                "type": 9,
                                "content": {
                                  "version": "KqlParameterItem/1.0",
                                  "parameters": [
                                    {
                                      "id": "d1f20750-4a22-4433-9c5d-a4d9a4f62f9d",
                                      "version": "KqlParameterItem/1.0",
                                      "name": "discoveryPeriod",
                                      "label": "Period",
                                      "type": 4,
                                      "typeSettings": {
                                        "selectableValues": [
                                          {
                                            "durationMs": 300000
                                          },
                                          {
                                            "durationMs": 900000
                                          },
                                          {
                                            "durationMs": 1800000
                                          },
                                          {
                                            "durationMs": 3600000
                                          },
                                          {
                                            "durationMs": 14400000
                                          },
                                          {
                                            "durationMs": 43200000
                                          },
                                          {
                                            "durationMs": 86400000
                                          },
                                          {
                                            "durationMs": 172800000
                                          },
                                          {
                                            "durationMs": 259200000
                                          },
                                          {
                                            "durationMs": 604800000
                                          },
                                          {
                                            "durationMs": 1209600000
                                          },
                                          {
                                            "durationMs": 2419200000
                                          }
                                        ]
                                      },
                                      "value": {
                                        "durationMs": 172800000
                                      }
                                    },
                                    {
                                      "id": "079a4550-40c9-44cd-a223-40097e453659",
                                      "version": "KqlParameterItem/1.0",
                                      "name": "ComputerDiscovery",
                                      "label": "Select Server",
                                      "type": 5,
                                      "query": "Discovery_CL\n| parse RawData with timestamp \",\" rest1\n| extend Computer=_ResourceId,timestamp=todatetime(timestamp)\n| summarize by tostring(Computer)",
                                      "typeSettings": {
                                        "additionalResourceOptions": [],
                                        "showDefault": false
                                      },
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "discoveryPeriod",
                                      "queryType": 0,
                                      "resourceType": "microsoft.operationalinsights/workspaces",
                                      "value": null
                                    }
                                  ],
                                  "style": "above",
                                  "queryType": 0,
                                  "resourceType": "microsoft.operationalinsights/workspaces"
                                },
                                "conditionalVisibility": {
                                  "parameterName": "discTab",
                                  "comparison": "isEqualTo",
                                  "value": "discData"
                                },
                                "name": "param-discovery-period"
                              },
                              {
                                "type": 3,
                                "content": {
                                  "version": "KqlItem/1.0",
                                  "query": "//let maxts=\nlet maxts=Discovery_CL\n| project timestamp=todatetime(tostring(split(RawData,\",\")[0])), _ResourceId\n| where isnotempty(timestamp) and _ResourceId =~ '{ComputerDiscovery}'\n| summarize maxts=max(timestamp);\nDiscovery_CL\n| extend Computer=_ResourceId\n| where Computer =~ '{ComputerDiscovery}'\n| extend fields=split(RawData,\",\")\n| extend timestamp=todatetime(fields[0])\n| extend type=tostring(fields[1])\n| extend platform=tostring(fields[2])\n| extend package=iff (platform =~ 'linux', tostring(fields[4]),'')\n| extend name=iff (platform =~ 'linux', tostring(fields[3]), tostring(fields[3]))\n| extend othertype=tostring(fields[5])\n| extend vendor=tostring(fields[6])\n| extend OSVersion=iff(platform =~ 'linux', '',tostring(fields[3]))\n| where timestamp == toscalar(maxts)\n| project timestamp,Computer,type,name,platform,OSVersion,othertype,vendor",
                                  "size": 0,
                                  "title": "All Discovery Data",
                                  "timeContextFromParameter": "discoveryPeriod",
                                  "showExportToExcel": true,
                                  "queryType": 0,
                                  "resourceType": "microsoft.operationalinsights/workspaces",
                                  "crossComponentResources": [
                                    "{Workspace}"
                                  ],
                                  "gridSettings": {
                                    "rowLimit": 1000,
                                    "filter": true,
                                    "sortBy": [
                                      {
                                        "itemKey": "name",
                                        "sortOrder": 1
                                      }
                                    ]
                                  },
                                  "sortBy": [
                                    {
                                      "itemKey": "name",
                                      "sortOrder": 1
                                    }
                                  ]
                                },
                                "conditionalVisibility": {
                                  "parameterName": "discTab",
                                  "comparison": "isEqualTo",
                                  "value": "discData"
                                },
                                "name": "query - discovery - all"
                              },
                              {
                                "type": 3,
                                "content": {
                                  "version": "KqlItem/1.0",
                                  "query": "let maxts=DiscoveryResults_CL\r\n| summarize maxts=max(TimeGenerated);\r\nDiscoveryResults_CL\r\n| where TimeGenerated == toscalar(maxts)\r\n| project Resource=ResourceId, OS, Pack=Tag, Location, ['Discovery Time']=TimeGenerated",
                                  "size": 0,
                                  "title": "Discovery Results",
                                  "timeContext": {
                                    "durationMs": 259200000
                                  },
                                  "exportMultipleValues": true,
                                  "exportedParameters": [
                                    {
                                      "fieldName": "",
                                      "parameterName": "vmsDiscoveryTag",
                                      "parameterType": 1,
                                      "quote": ""
                                    }
                                  ],
                                  "queryType": 0,
                                  "resourceType": "microsoft.operationalinsights/workspaces",
                                  "crossComponentResources": [
                                    "{Workspace}"
                                  ],
                                  "gridSettings": {
                                    "formatters": [
                                      {
                                        "columnMatch": "resourceId",
                                        "formatter": 13,
                                        "formatOptions": {
                                          "linkTarget": null,
                                          "showIcon": true
                                        }
                                      }
                                    ]
                                  }
                                },
                                "conditionalVisibility": {
                                  "parameterName": "discTab",
                                  "comparison": "isEqualTo",
                                  "value": "discResults"
                                },
                                "name": "query - 0"
                              },
                              {
                                "type": 11,
                                "content": {
                                  "version": "LinkItem/1.0",
                                  "style": "list",
                                  "links": [
                                    {
                                      "id": "af7d39e4-d1a9-40c5-89e7-d6fcfb191dc5",
                                      "linkTarget": "ArmAction",
                                      "linkLabel": "Enable Monitoring",
                                      "style": "primary",
                                      "linkIsContextBlade": true,
                                      "armActionContext": {
                                        "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                        "headers": [],
                                        "params": [],
                                        "body": "{ \r\n  \"function\": \"packmgmt\",\r\n  \"functionBody\" : {\r\n    \"Action\":\"AddPack\",\r\n    \"Resources\": [{vmsDiscoveryTag}],\r\n    \"PackType\": \"IaaS\"\r\n  }\r\n}",
                                        "httpMethod": "POST",
                                        "title": "Enable Monitoring",
                                        "description": "# Enable monitoring\n\nResources:\n\n{vmsDiscoveryTag}",
                                        "actionName": "AddPack",
                                        "runLabel": "Enable"
                                      }
                                    }
                                  ]
                                },
                                "conditionalVisibilities": [
                                  {
                                    "parameterName": "discTab",
                                    "comparison": "isEqualTo",
                                    "value": "discResults"
                                  },
                                  {
                                    "parameterName": "vmsDiscoveryTag",
                                    "comparison": "isNotEqualTo"
                                  }
                                ],
                                "name": "links - enableDiscoveryMonitoring"
                              }
                            ]
                          },
                          "conditionalVisibility": {
                            "parameterName": "tabSelection",
                            "comparison": "isEqualTo",
                            "value": "autodiscovery"
                          },
                          "name": "AutoDiscoveryGroup"
                        },
                        {
                          "type": 12,
                          "content": {
                            "version": "NotebookGroup/1.0",
                            "groupType": "editable",
                            "items": [
                              {
                                "type": 9,
                                "content": {
                                  "version": "KqlParameterItem/1.0",
                                  "crossComponentResources": [
                                    "{appInsightsName}"
                                  ],
                                  "parameters": [
                                    {
                                      "id": "dffde712-0ef1-4c46-922a-47a42643130c",
                                      "version": "KqlParameterItem/1.0",
                                      "name": "appInsightsTimeframe",
                                      "label": "Time Range",
                                      "type": 4,
                                      "typeSettings": {
                                        "selectableValues": [
                                          {
                                            "durationMs": 300000
                                          },
                                          {
                                            "durationMs": 900000
                                          },
                                          {
                                            "durationMs": 1800000
                                          },
                                          {
                                            "durationMs": 3600000
                                          },
                                          {
                                            "durationMs": 14400000
                                          },
                                          {
                                            "durationMs": 43200000
                                          },
                                          {
                                            "durationMs": 86400000
                                          },
                                          {
                                            "durationMs": 172800000
                                          },
                                          {
                                            "durationMs": 259200000
                                          },
                                          {
                                            "durationMs": 604800000
                                          },
                                          {
                                            "durationMs": 1209600000
                                          },
                                          {
                                            "durationMs": 2419200000
                                          },
                                          {
                                            "durationMs": 2592000000
                                          }
                                        ]
                                      },
                                      "timeContext": {
                                        "durationMs": 2592000000
                                      },
                                      "value": {
                                        "durationMs": 2419200000
                                      }
                                    },
                                    {
                                      "id": "70107de5-d9cd-46ea-9027-43d83053dac3",
                                      "version": "KqlParameterItem/1.0",
                                      "name": "FunctionApp",
                                      "label": "Function App",
                                      "type": 2,
                                      "query": "requests\n| project\n    timestamp,\n    id,\n    operation_Name,\n    success,\n    resultCode,\n    duration,\n    operation_Id,\n    cloud_RoleName,\n    invocationId=customDimensions['InvocationId']\n| order by timestamp desc\n| take 20\n| summarize by Functions=operation_Name\n",
                                      "crossComponentResources": [
                                        "{appInsightsName}"
                                      ],
                                      "typeSettings": {
                                        "additionalResourceOptions": [],
                                        "showDefault": false
                                      },
                                      "timeContext": {
                                        "durationMs": 2592000000
                                      },
                                      "queryType": 0,
                                      "resourceType": "microsoft.insights/components",
                                      "value": "config"
                                    }
                                  ],
                                  "style": "pills",
                                  "queryType": 0,
                                  "resourceType": "microsoft.insights/components"
                                },
                                "name": "parameters - 18"
                              },
                              {
                                "type": 3,
                                "content": {
                                  "version": "KqlItem/1.0",
                                  "query": "requests\n| project\n    timestamp,\n    id,\n    operation_Name,\n    success,\n    resultCode,\n    duration,\n    operation_Id,\n    cloud_RoleName,\n    invocationId=customDimensions['InvocationId']\n| where operation_Name =~ '{FunctionApp}'\n| order by timestamp desc\n| take 20",
                                  "size": 0,
                                  "title": "Invocations",
                                  "timeContextFromParameter": "appInsightsTimeframe",
                                  "exportedParameters": [
                                    {
                                      "fieldName": "invocationId",
                                      "parameterName": "invocationid",
                                      "parameterType": 1
                                    },
                                    {
                                      "fieldName": "operation_Id",
                                      "parameterName": "operationid",
                                      "parameterType": 1
                                    }
                                  ],
                                  "queryType": 0,
                                  "resourceType": "microsoft.insights/components",
                                  "crossComponentResources": [
                                    "{appInsightsName}"
                                  ],
                                  "gridSettings": {
                                    "formatters": [
                                      {
                                        "columnMatch": "id",
                                        "formatter": 5
                                      }
                                    ]
                                  }
                                },
                                "customWidth": "30",
                                "name": "queryInvocations"
                              },
                              {
                                "type": 3,
                                "content": {
                                  "version": "KqlItem/1.0",
                                  "query": "union traces\n| union exceptions\n| where operation_Id == '{operationid}'\n| where customDimensions['InvocationId'] == '{invocationid}'\n| order by timestamp asc\n| project\n    timestamp,\n    message = iff(message != '', message, iff(innermostMessage != '', innermostMessage, customDimensions.[strcat('prop__{','OriginalFormat}')])),\n    logLevel = customDimensions.['LogLevel']",
                                  "size": 0,
                                  "title": "Invocation Details",
                                  "noDataMessage": "No Invocation Selected",
                                  "timeContextFromParameter": "appInsightsTimeframe",
                                  "exportFieldName": "invocationId",
                                  "exportParameterName": "invocationid",
                                  "queryType": 0,
                                  "resourceType": "microsoft.insights/components",
                                  "crossComponentResources": [
                                    "{appInsightsName}"
                                  ]
                                },
                                "customWidth": "70",
                                "name": "queryInvocationDetails"
                              }
                            ]
                          },
                          "conditionalVisibility": {
                            "parameterName": "tabSelection",
                            "comparison": "isEqualTo",
                            "value": "logs"
                          },
                          "name": "groupLogs"
                        },
                        {
                          "type": 3,
                          "content": {
                            "version": "KqlItem/1.0",
                            "query": "{\"version\":\"CustomEndpoint/1.0\",\"data\":null,\"headers\":[{\"key\":\"x-functions-key\",\"value\":\"{configKey}\"}],\"method\":\"GET\",\"url\":\"https://{FunctionApps:name}.azurewebsites.net/api/config?Action=getdiscoveryresults\",\"contentType\":\"text/plain\",\"urlParams\":[{\"key\":\"WSId\",\"value\":\"{Workspace}\"}],\"transformers\":null}",
                            "size": 0,
                            "exportedParameters": [
                              {
                                "parameterName": "vmsDiscoveryTag",
                                "parameterType": 1
                              },
                              {
                                "fieldName": "tag",
                                "parameterName": "vmsDiscoveryTagValue",
                                "parameterType": 1
                              }
                            ],
                            "queryType": 10,
                            "gridSettings": {
                              "formatters": [
                                {
                                  "columnMatch": "tag",
                                  "formatter": 1,
                                  "formatOptions": {
                                    "linkTarget": "ArmAction",
                                    "linkIsContextBlade": true,
                                    "armActionContext": {
                                      "path": "{logicAppResource}/triggers/manual/run?api-version=2016-06-01",
                                      "headers": [],
                                      "params": [],
                                      "body": "{ \n  \"function\": \"packmgmt\",\n  \"functionBody\" : {\n    \"Action\":\"AddPack\",\n    \"Resources\": [{vmsDiscoveryTag}],\n    \"Pack\": \"{vmsDiscoveryTagValue}\"\n  }\n}",
                                      "httpMethod": "POST",
                                      "title": "Enable Monitoring",
                                      "description": "# Adding Tag(s) To VMs\n\n\"Resources\": {vmsDiscoveryTag:$.Computer}\n\n\"Pack\": \"{vmsDiscoveryTagValue}\"",
                                      "runLabel": "Enable"
                                    }
                                  }
                                }
                              ]
                            }
                          },
                          "conditionalVisibility": {
                            "parameterName": "discTab",
                            "comparison": "isEqualTo",
                            "value": "discResults"
                          },
                          "name": "query - discovery Results"
                        }
                      ],
                      "fallbackResourceIds": [
                        ""
                      ],
                      "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
                    },
                    "wbConfig": "[string(variables('$fxv#0'))]"
                  },
                  "resources": [
                    {
                      "type": "Microsoft.Insights/workbooks",
                      "apiVersion": "2022-04-01",
                      "name": "[guid('Azure Monitor Starter Packs V2')]",
                      "location": "[parameters('location')]",
                      "tags": "[parameters('Tags')]",
                      "kind": "shared",
                      "properties": {
                        "displayName": "Azure Monitor Starter Packs Extended",
                        "serializedData": "[variables('wbConfig')]",
                        "category": "workbook",
                        "sourceId": "[parameters('lawresourceid')]"
                      }
                    }
                  ]
                }
              }
            },
            {
              "type": "Microsoft.Resources/deployments",
              "apiVersion": "2022-09-01",
              "name": "[format('AMP-{0}-DCE-{1}', parameters('instanceName'), parameters('location'))]",
              "subscriptionId": "[parameters('subscriptionId')]",
              "resourceGroup": "[parameters('resourceGroupName')]",
              "properties": {
                "expressionEvaluationOptions": {
                  "scope": "inner"
                },
                "mode": "Incremental",
                "parameters": {
                  "location": {
                    "value": "[parameters('location')]"
                  },
                  "Tags": {
                    "value": "[parameters('Tags')]"
                  },
                  "dceName": {
                    "value": "[format('AMP-{0}-DCE-{1}', parameters('instanceName'), parameters('location'))]"
                  }
                },
                "template": {
                  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                  "contentVersion": "1.0.0.0",
                  "metadata": {
                    "_generator": {
                      "name": "bicep",
                      "version": "0.32.4.45862",
                      "templateHash": "3784354634483652394"
                    }
                  },
                  "parameters": {
                    "dceName": {
                      "type": "string"
                    },
                    "location": {
                      "type": "string"
                    },
                    "Tags": {
                      "type": "object"
                    }
                  },
                  "resources": [
                    {
                      "type": "Microsoft.Insights/dataCollectionEndpoints",
                      "apiVersion": "2021-09-01-preview",
                      "name": "[parameters('dceName')]",
                      "location": "[parameters('location')]",
                      "tags": "[parameters('Tags')]",
                      "properties": {
                        "networkAcls": {
                          "publicNetworkAccess": "Enabled"
                        }
                      }
                    }
                  ],
                  "outputs": {
                    "dceId": {
                      "type": "string",
                      "value": "[resourceId('Microsoft.Insights/dataCollectionEndpoints', parameters('dceName'))]"
                    }
                  }
                }
              }
            },
            {
              "type": "Microsoft.Resources/deployments",
              "apiVersion": "2022-09-01",
              "name": "[format('AMP-{0}-UMI-Packs-{1}', parameters('instanceName'), parameters('location'))]",
              "location": "[deployment().location]",
              "properties": {
                "expressionEvaluationOptions": {
                  "scope": "inner"
                },
                "mode": "Incremental",
                "parameters": {
                  "location": {
                    "value": "[parameters('location')]"
                  },
                  "Tags": {
                    "value": "[parameters('Tags')]"
                  },
                  "roleDefinitionIds": {
                    "value": "[variables('packPolicyRoleDefinitionIds')]"
                  },
                  "userIdentityName": {
                    "value": "[format('AMP-{0}-UMI-Packs', parameters('instanceName'))]"
                  },
                  "resourceGroupName": {
                    "value": "[parameters('resourceGroupName')]"
                  },
                  "subscriptionId": {
                    "value": "[parameters('subscriptionId')]"
                  },
                  "addRGRoleAssignments": {
                    "value": true
                  },
                  "solutionTag": {
                    "value": "[parameters('solutionTag')]"
                  },
                  "instanceName": {
                    "value": "[parameters('instanceName')]"
                  }
                },
                "template": {
                  "$schema": "https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#",
                  "contentVersion": "1.0.0.0",
                  "metadata": {
                    "_generator": {
                      "name": "bicep",
                      "version": "0.32.4.45862",
                      "templateHash": "17842332302260083262"
                    }
                  },
                  "parameters": {
                    "location": {
                      "type": "string"
                    },
                    "Tags": {
                      "type": "object"
                    },
                    "roleDefinitionIds": {
                      "type": "array"
                    },
                    "userIdentityName": {
                      "type": "string"
                    },
                    "subscriptionId": {
                      "type": "string"
                    },
                    "resourceGroupName": {
                      "type": "string"
                    },
                    "addRGRoleAssignments": {
                      "type": "bool",
                      "defaultValue": false
                    },
                    "solutionTag": {
                      "type": "string"
                    },
                    "instanceName": {
                      "type": "string"
                    }
                  },
                  "variables": {
                    "RGroleDefinitionIds": [
                      "b24988ac-6180-42a0-ab88-20f7382dd24c",
                      "22926164-76b3-42b3-bc55-97df8dab3e41"
                    ]
                  },
                  "resources": [
                    {
                      "type": "Microsoft.Resources/deployments",
                      "apiVersion": "2022-09-01",
                      "name": "[format('{0}-{1}', parameters('userIdentityName'), parameters('location'))]",
                      "subscriptionId": "[parameters('subscriptionId')]",
                      "resourceGroup": "[parameters('resourceGroupName')]",
                      "properties": {
                        "expressionEvaluationOptions": {
                          "scope": "inner"
                        },
                        "mode": "Incremental",
                        "parameters": {
                          "location": {
                            "value": "[parameters('location')]"
                          },
                          "Tags": {
                            "value": "[parameters('Tags')]"
                          },
                          "userIdentityName": {
                            "value": "[parameters('userIdentityName')]"
                          }
                        },
                        "template": {
                          "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                          "contentVersion": "1.0.0.0",
                          "metadata": {
                            "_generator": {
                              "name": "bicep",
                              "version": "0.32.4.45862",
                              "templateHash": "1567859393178125257"
                            }
                          },
                          "parameters": {
                            "location": {
                              "type": "string"
                            },
                            "Tags": {
                              "type": "object"
                            },
                            "userIdentityName": {
                              "type": "string"
                            }
                          },
                          "resources": [
                            {
                              "type": "Microsoft.ManagedIdentity/userAssignedIdentities",
                              "apiVersion": "2023-01-31",
                              "name": "[parameters('userIdentityName')]",
                              "location": "[parameters('location')]",
                              "tags": "[parameters('Tags')]"
                            }
                          ],
                          "outputs": {
                            "userManagedIdentityPrincipalId": {
                              "type": "string",
                              "value": "[reference(resourceId('Microsoft.ManagedIdentity/userAssignedIdentities', parameters('userIdentityName')), '2023-01-31').principalId]"
                            },
                            "userManagedIdentityClientId": {
                              "type": "string",
                              "value": "[reference(resourceId('Microsoft.ManagedIdentity/userAssignedIdentities', parameters('userIdentityName')), '2023-01-31').clientId]"
                            },
                            "userManagedIdentityResourceId": {
                              "type": "string",
                              "value": "[resourceId('Microsoft.ManagedIdentity/userAssignedIdentities', parameters('userIdentityName'))]"
                            }
                          }
                        }
                      }
                    },
                    {
                      "copy": {
                        "name": "userIdentityRoleAssignments",
                        "count": "[length(parameters('roleDefinitionIds'))]"
                      },
                      "type": "Microsoft.Resources/deployments",
                      "apiVersion": "2022-09-01",
                      "name": "[format('{0}-{1}-{2}', parameters('userIdentityName'), copyIndex(), parameters('location'))]",
                      "location": "[deployment().location]",
                      "properties": {
                        "expressionEvaluationOptions": {
                          "scope": "inner"
                        },
                        "mode": "Incremental",
                        "parameters": {
                          "resourcename": {
                            "value": "[parameters('userIdentityName')]"
                          },
                          "principalId": {
                            "value": "[reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('{0}-{1}', parameters('userIdentityName'), parameters('location'))), '2022-09-01').outputs.userManagedIdentityPrincipalId.value]"
                          },
                          "solutionTag": {
                            "value": "[parameters('solutionTag')]"
                          },
                          "roleDefinitionId": {
                            "value": "[parameters('roleDefinitionIds')[copyIndex()]]"
                          },
                          "roleShortName": {
                            "value": "[parameters('roleDefinitionIds')[copyIndex()]]"
                          },
                          "instanceName": {
                            "value": "[parameters('instanceName')]"
                          }
                        },
                        "template": {
                          "$schema": "https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#",
                          "contentVersion": "1.0.0.0",
                          "metadata": {
                            "_generator": {
                              "name": "bicep",
                              "version": "0.32.4.45862",
                              "templateHash": "12046791720435112264"
                            }
                          },
                          "parameters": {
                            "resourcename": {
                              "type": "string"
                            },
                            "solutionTag": {
                              "type": "string"
                            },
                            "principalId": {
                              "type": "string"
                            },
                            "roleDefinitionId": {
                              "type": "string"
                            },
                            "roleShortName": {
                              "type": "string"
                            },
                            "utcValue": {
                              "type": "string",
                              "defaultValue": "[utcNow()]"
                            },
                            "instanceName": {
                              "type": "string"
                            }
                          },
                          "variables": {
                            "roleIdtoUse": "[subscriptionResourceId('Microsoft.Authorization/roleDefinitions', parameters('roleDefinitionId'))]"
                          },
                          "resources": [
                            {
                              "type": "Microsoft.Authorization/roleAssignments",
                              "apiVersion": "2022-04-01",
                              "name": "[guid(subscription().id, parameters('principalId'), parameters('roleDefinitionId'), parameters('instanceName'))]",
                              "properties": {
                                "description": "[format('{0}-{1}-{2}-{3}', parameters('solutionTag'), parameters('roleShortName'), parameters('resourcename'), parameters('utcValue'))]",
                                "principalId": "[parameters('principalId')]",
                                "principalType": "ServicePrincipal",
                                "roleDefinitionId": "[variables('roleIdtoUse')]"
                              }
                            }
                          ],
                          "outputs": {
                            "roleassignmentname": {
                              "type": "string",
                              "value": "[guid(subscription().id, parameters('principalId'), parameters('roleDefinitionId'), parameters('instanceName'))]"
                            }
                          }
                        }
                      },
                      "dependsOn": [
                        "[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('{0}-{1}', parameters('userIdentityName'), parameters('location')))]"
                      ]
                    },
                    {
                      "copy": {
                        "name": "userIdentityRoleAssignmentRG",
                        "count": "[length(variables('RGroleDefinitionIds'))]"
                      },
                      "condition": "[parameters('addRGRoleAssignments')]",
                      "type": "Microsoft.Resources/deployments",
                      "apiVersion": "2022-09-01",
                      "name": "[format('{0}-{1}-RG', parameters('userIdentityName'), copyIndex())]",
                      "subscriptionId": "[parameters('subscriptionId')]",
                      "resourceGroup": "[parameters('resourceGroupName')]",
                      "properties": {
                        "expressionEvaluationOptions": {
                          "scope": "inner"
                        },
                        "mode": "Incremental",
                        "parameters": {
                          "resourcename": {
                            "value": "[parameters('userIdentityName')]"
                          },
                          "principalId": {
                            "value": "[reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('{0}-{1}', parameters('userIdentityName'), parameters('location'))), '2022-09-01').outputs.userManagedIdentityPrincipalId.value]"
                          },
                          "solutionTag": {
                            "value": "[parameters('solutionTag')]"
                          },
                          "roleDefinitionId": {
                            "value": "[variables('RGroleDefinitionIds')[copyIndex()]]"
                          },
                          "roleShortName": {
                            "value": "[variables('RGroleDefinitionIds')[copyIndex()]]"
                          }
                        },
                        "template": {
                          "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                          "contentVersion": "1.0.0.0",
                          "metadata": {
                            "_generator": {
                              "name": "bicep",
                              "version": "0.32.4.45862",
                              "templateHash": "18441567381332934980"
                            }
                          },
                          "parameters": {
                            "resourcename": {
                              "type": "string"
                            },
                            "solutionTag": {
                              "type": "string"
                            },
                            "principalId": {
                              "type": "string"
                            },
                            "roleDefinitionId": {
                              "type": "string"
                            },
                            "roleShortName": {
                              "type": "string"
                            },
                            "utcValue": {
                              "type": "string",
                              "defaultValue": "[utcNow()]"
                            }
                          },
                          "variables": {
                            "roleIdtoUse": "[subscriptionResourceId('Microsoft.Authorization/roleDefinitions', parameters('roleDefinitionId'))]"
                          },
                          "resources": [
                            {
                              "type": "Microsoft.Authorization/roleAssignments",
                              "apiVersion": "2022-04-01",
                              "name": "[guid(subscription().id, parameters('principalId'), parameters('roleDefinitionId'))]",
                              "properties": {
                                "description": "[format('{0}-{1}-{2}-{3}', parameters('solutionTag'), parameters('roleShortName'), parameters('resourcename'), parameters('utcValue'))]",
                                "principalId": "[parameters('principalId')]",
                                "principalType": "ServicePrincipal",
                                "roleDefinitionId": "[variables('roleIdtoUse')]"
                              }
                            }
                          ],
                          "outputs": {
                            "roleassignmentname": {
                              "type": "string",
                              "value": "[guid(subscription().id, parameters('principalId'), parameters('roleDefinitionId'))]"
                            }
                          }
                        }
                      },
                      "dependsOn": [
                        "[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('{0}-{1}', parameters('userIdentityName'), parameters('location')))]"
                      ]
                    }
                  ],
                  "outputs": {
                    "userManagedIdentityPrincipalId": {
                      "type": "string",
                      "value": "[reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('{0}-{1}', parameters('userIdentityName'), parameters('location'))), '2022-09-01').outputs.userManagedIdentityPrincipalId.value]"
                    },
                    "userManagedIdentityClientId": {
                      "type": "string",
                      "value": "[reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('{0}-{1}', parameters('userIdentityName'), parameters('location'))), '2022-09-01').outputs.userManagedIdentityClientId.value]"
                    },
                    "userManagedIdentityResourceId": {
                      "type": "string",
                      "value": "[reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('{0}-{1}', parameters('userIdentityName'), parameters('location'))), '2022-09-01').outputs.userManagedIdentityResourceId.value]"
                    }
                  }
                }
              }
            },
            {
              "type": "Microsoft.Resources/deployments",
              "apiVersion": "2022-09-01",
              "name": "[format('AMP-{0}-UMI-AzFun-{1}', parameters('instanceName'), parameters('location'))]",
              "location": "[deployment().location]",
              "properties": {
                "expressionEvaluationOptions": {
                  "scope": "inner"
                },
                "mode": "Incremental",
                "parameters": {
                  "location": {
                    "value": "[parameters('location')]"
                  },
                  "Tags": {
                    "value": "[parameters('Tags')]"
                  },
                  "roleDefinitionIds": {
                    "value": "[variables('backendFunctionRoleDefinitionIds')]"
                  },
                  "userIdentityName": {
                    "value": "[format('AMP-{0}-UMI-Function', parameters('instanceName'))]"
                  },
                  "resourceGroupName": {
                    "value": "[parameters('resourceGroupName')]"
                  },
                  "subscriptionId": {
                    "value": "[parameters('subscriptionId')]"
                  },
                  "solutionTag": {
                    "value": "[parameters('solutionTag')]"
                  },
                  "instanceName": {
                    "value": "[parameters('instanceName')]"
                  }
                },
                "template": {
                  "$schema": "https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#",
                  "contentVersion": "1.0.0.0",
                  "metadata": {
                    "_generator": {
                      "name": "bicep",
                      "version": "0.32.4.45862",
                      "templateHash": "17842332302260083262"
                    }
                  },
                  "parameters": {
                    "location": {
                      "type": "string"
                    },
                    "Tags": {
                      "type": "object"
                    },
                    "roleDefinitionIds": {
                      "type": "array"
                    },
                    "userIdentityName": {
                      "type": "string"
                    },
                    "subscriptionId": {
                      "type": "string"
                    },
                    "resourceGroupName": {
                      "type": "string"
                    },
                    "addRGRoleAssignments": {
                      "type": "bool",
                      "defaultValue": false
                    },
                    "solutionTag": {
                      "type": "string"
                    },
                    "instanceName": {
                      "type": "string"
                    }
                  },
                  "variables": {
                    "RGroleDefinitionIds": [
                      "b24988ac-6180-42a0-ab88-20f7382dd24c",
                      "22926164-76b3-42b3-bc55-97df8dab3e41"
                    ]
                  },
                  "resources": [
                    {
                      "type": "Microsoft.Resources/deployments",
                      "apiVersion": "2022-09-01",
                      "name": "[format('{0}-{1}', parameters('userIdentityName'), parameters('location'))]",
                      "subscriptionId": "[parameters('subscriptionId')]",
                      "resourceGroup": "[parameters('resourceGroupName')]",
                      "properties": {
                        "expressionEvaluationOptions": {
                          "scope": "inner"
                        },
                        "mode": "Incremental",
                        "parameters": {
                          "location": {
                            "value": "[parameters('location')]"
                          },
                          "Tags": {
                            "value": "[parameters('Tags')]"
                          },
                          "userIdentityName": {
                            "value": "[parameters('userIdentityName')]"
                          }
                        },
                        "template": {
                          "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                          "contentVersion": "1.0.0.0",
                          "metadata": {
                            "_generator": {
                              "name": "bicep",
                              "version": "0.32.4.45862",
                              "templateHash": "1567859393178125257"
                            }
                          },
                          "parameters": {
                            "location": {
                              "type": "string"
                            },
                            "Tags": {
                              "type": "object"
                            },
                            "userIdentityName": {
                              "type": "string"
                            }
                          },
                          "resources": [
                            {
                              "type": "Microsoft.ManagedIdentity/userAssignedIdentities",
                              "apiVersion": "2023-01-31",
                              "name": "[parameters('userIdentityName')]",
                              "location": "[parameters('location')]",
                              "tags": "[parameters('Tags')]"
                            }
                          ],
                          "outputs": {
                            "userManagedIdentityPrincipalId": {
                              "type": "string",
                              "value": "[reference(resourceId('Microsoft.ManagedIdentity/userAssignedIdentities', parameters('userIdentityName')), '2023-01-31').principalId]"
                            },
                            "userManagedIdentityClientId": {
                              "type": "string",
                              "value": "[reference(resourceId('Microsoft.ManagedIdentity/userAssignedIdentities', parameters('userIdentityName')), '2023-01-31').clientId]"
                            },
                            "userManagedIdentityResourceId": {
                              "type": "string",
                              "value": "[resourceId('Microsoft.ManagedIdentity/userAssignedIdentities', parameters('userIdentityName'))]"
                            }
                          }
                        }
                      }
                    },
                    {
                      "copy": {
                        "name": "userIdentityRoleAssignments",
                        "count": "[length(parameters('roleDefinitionIds'))]"
                      },
                      "type": "Microsoft.Resources/deployments",
                      "apiVersion": "2022-09-01",
                      "name": "[format('{0}-{1}-{2}', parameters('userIdentityName'), copyIndex(), parameters('location'))]",
                      "location": "[deployment().location]",
                      "properties": {
                        "expressionEvaluationOptions": {
                          "scope": "inner"
                        },
                        "mode": "Incremental",
                        "parameters": {
                          "resourcename": {
                            "value": "[parameters('userIdentityName')]"
                          },
                          "principalId": {
                            "value": "[reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('{0}-{1}', parameters('userIdentityName'), parameters('location'))), '2022-09-01').outputs.userManagedIdentityPrincipalId.value]"
                          },
                          "solutionTag": {
                            "value": "[parameters('solutionTag')]"
                          },
                          "roleDefinitionId": {
                            "value": "[parameters('roleDefinitionIds')[copyIndex()]]"
                          },
                          "roleShortName": {
                            "value": "[parameters('roleDefinitionIds')[copyIndex()]]"
                          },
                          "instanceName": {
                            "value": "[parameters('instanceName')]"
                          }
                        },
                        "template": {
                          "$schema": "https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#",
                          "contentVersion": "1.0.0.0",
                          "metadata": {
                            "_generator": {
                              "name": "bicep",
                              "version": "0.32.4.45862",
                              "templateHash": "12046791720435112264"
                            }
                          },
                          "parameters": {
                            "resourcename": {
                              "type": "string"
                            },
                            "solutionTag": {
                              "type": "string"
                            },
                            "principalId": {
                              "type": "string"
                            },
                            "roleDefinitionId": {
                              "type": "string"
                            },
                            "roleShortName": {
                              "type": "string"
                            },
                            "utcValue": {
                              "type": "string",
                              "defaultValue": "[utcNow()]"
                            },
                            "instanceName": {
                              "type": "string"
                            }
                          },
                          "variables": {
                            "roleIdtoUse": "[subscriptionResourceId('Microsoft.Authorization/roleDefinitions', parameters('roleDefinitionId'))]"
                          },
                          "resources": [
                            {
                              "type": "Microsoft.Authorization/roleAssignments",
                              "apiVersion": "2022-04-01",
                              "name": "[guid(subscription().id, parameters('principalId'), parameters('roleDefinitionId'), parameters('instanceName'))]",
                              "properties": {
                                "description": "[format('{0}-{1}-{2}-{3}', parameters('solutionTag'), parameters('roleShortName'), parameters('resourcename'), parameters('utcValue'))]",
                                "principalId": "[parameters('principalId')]",
                                "principalType": "ServicePrincipal",
                                "roleDefinitionId": "[variables('roleIdtoUse')]"
                              }
                            }
                          ],
                          "outputs": {
                            "roleassignmentname": {
                              "type": "string",
                              "value": "[guid(subscription().id, parameters('principalId'), parameters('roleDefinitionId'), parameters('instanceName'))]"
                            }
                          }
                        }
                      },
                      "dependsOn": [
                        "[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('{0}-{1}', parameters('userIdentityName'), parameters('location')))]"
                      ]
                    },
                    {
                      "copy": {
                        "name": "userIdentityRoleAssignmentRG",
                        "count": "[length(variables('RGroleDefinitionIds'))]"
                      },
                      "condition": "[parameters('addRGRoleAssignments')]",
                      "type": "Microsoft.Resources/deployments",
                      "apiVersion": "2022-09-01",
                      "name": "[format('{0}-{1}-RG', parameters('userIdentityName'), copyIndex())]",
                      "subscriptionId": "[parameters('subscriptionId')]",
                      "resourceGroup": "[parameters('resourceGroupName')]",
                      "properties": {
                        "expressionEvaluationOptions": {
                          "scope": "inner"
                        },
                        "mode": "Incremental",
                        "parameters": {
                          "resourcename": {
                            "value": "[parameters('userIdentityName')]"
                          },
                          "principalId": {
                            "value": "[reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('{0}-{1}', parameters('userIdentityName'), parameters('location'))), '2022-09-01').outputs.userManagedIdentityPrincipalId.value]"
                          },
                          "solutionTag": {
                            "value": "[parameters('solutionTag')]"
                          },
                          "roleDefinitionId": {
                            "value": "[variables('RGroleDefinitionIds')[copyIndex()]]"
                          },
                          "roleShortName": {
                            "value": "[variables('RGroleDefinitionIds')[copyIndex()]]"
                          }
                        },
                        "template": {
                          "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                          "contentVersion": "1.0.0.0",
                          "metadata": {
                            "_generator": {
                              "name": "bicep",
                              "version": "0.32.4.45862",
                              "templateHash": "18441567381332934980"
                            }
                          },
                          "parameters": {
                            "resourcename": {
                              "type": "string"
                            },
                            "solutionTag": {
                              "type": "string"
                            },
                            "principalId": {
                              "type": "string"
                            },
                            "roleDefinitionId": {
                              "type": "string"
                            },
                            "roleShortName": {
                              "type": "string"
                            },
                            "utcValue": {
                              "type": "string",
                              "defaultValue": "[utcNow()]"
                            }
                          },
                          "variables": {
                            "roleIdtoUse": "[subscriptionResourceId('Microsoft.Authorization/roleDefinitions', parameters('roleDefinitionId'))]"
                          },
                          "resources": [
                            {
                              "type": "Microsoft.Authorization/roleAssignments",
                              "apiVersion": "2022-04-01",
                              "name": "[guid(subscription().id, parameters('principalId'), parameters('roleDefinitionId'))]",
                              "properties": {
                                "description": "[format('{0}-{1}-{2}-{3}', parameters('solutionTag'), parameters('roleShortName'), parameters('resourcename'), parameters('utcValue'))]",
                                "principalId": "[parameters('principalId')]",
                                "principalType": "ServicePrincipal",
                                "roleDefinitionId": "[variables('roleIdtoUse')]"
                              }
                            }
                          ],
                          "outputs": {
                            "roleassignmentname": {
                              "type": "string",
                              "value": "[guid(subscription().id, parameters('principalId'), parameters('roleDefinitionId'))]"
                            }
                          }
                        }
                      },
                      "dependsOn": [
                        "[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('{0}-{1}', parameters('userIdentityName'), parameters('location')))]"
                      ]
                    }
                  ],
                  "outputs": {
                    "userManagedIdentityPrincipalId": {
                      "type": "string",
                      "value": "[reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('{0}-{1}', parameters('userIdentityName'), parameters('location'))), '2022-09-01').outputs.userManagedIdentityPrincipalId.value]"
                    },
                    "userManagedIdentityClientId": {
                      "type": "string",
                      "value": "[reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('{0}-{1}', parameters('userIdentityName'), parameters('location'))), '2022-09-01').outputs.userManagedIdentityClientId.value]"
                    },
                    "userManagedIdentityResourceId": {
                      "type": "string",
                      "value": "[reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('{0}-{1}', parameters('userIdentityName'), parameters('location'))), '2022-09-01').outputs.userManagedIdentityResourceId.value]"
                    }
                  }
                }
              }
            },
            {
              "type": "Microsoft.Resources/deployments",
              "apiVersion": "2022-09-01",
              "name": "[format('amp-{0}-kv-{1}', parameters('instanceName'), substring(uniqueString(parameters('subscriptionId'), parameters('resourceGroupName'), 'keyvault'), 0, 6))]",
              "subscriptionId": "[parameters('subscriptionId')]",
              "resourceGroup": "[parameters('resourceGroupName')]",
              "properties": {
                "expressionEvaluationOptions": {
                  "scope": "inner"
                },
                "mode": "Incremental",
                "parameters": {
                  "kvName": {
                    "value": "[format('amp-{0}-kv-{1}', parameters('instanceName'), substring(uniqueString(parameters('subscriptionId'), parameters('resourceGroupName'), 'keyvault'), 0, 6))]"
                  },
                  "location": {
                    "value": "[parameters('location')]"
                  },
                  "Tags": {
                    "value": "[parameters('Tags')]"
                  },
                  "functionName": {
                    "value": "[parameters('functionname')]"
                  }
                },
                "template": {
                  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                  "contentVersion": "1.0.0.0",
                  "metadata": {
                    "_generator": {
                      "name": "bicep",
                      "version": "0.32.4.45862",
                      "templateHash": "8871134978585325884"
                    }
                  },
                  "parameters": {
                    "kvName": {
                      "type": "string"
                    },
                    "location": {
                      "type": "string"
                    },
                    "Tags": {
                      "type": "object"
                    },
                    "functionName": {
                      "type": "string"
                    }
                  },
                  "resources": [
                    {
                      "type": "Microsoft.KeyVault/vaults",
                      "apiVersion": "2024-12-01-preview",
                      "name": "[parameters('kvName')]",
                      "location": "[parameters('location')]",
                      "tags": "[parameters('Tags')]",
                      "properties": {
                        "sku": {
                          "family": "A",
                          "name": "standard"
                        },
                        "tenantId": "[subscription().tenantId]",
                        "enabledForDeployment": false,
                        "enabledForDiskEncryption": false,
                        "enabledForTemplateDeployment": false,
                        "enableSoftDelete": true,
                        "softDeleteRetentionInDays": 90,
                        "enableRbacAuthorization": true,
                        "provisioningState": "Succeeded",
                        "publicNetworkAccess": "Enabled",
                        "enablePurgeProtection": true
                      }
                    },
                    {
                      "type": "Microsoft.KeyVault/vaults/secrets",
                      "apiVersion": "2021-11-01-preview",
                      "name": "[format('{0}/{1}', parameters('kvName'), 'FunctionKey')]",
                      "tags": "[parameters('Tags')]",
                      "properties": {
                        "attributes": {
                          "enabled": true
                        },
                        "contentType": "string",
                        "value": "[listKeys(resourceId('Microsoft.Web/sites/host', parameters('functionName'), 'default'), '2022-09-01').functionKeys.monitoringKey]"
                      },
                      "dependsOn": [
                        "[resourceId('Microsoft.KeyVault/vaults', parameters('kvName'))]"
                      ]
                    }
                  ],
                  "outputs": {
                    "kvResourceId": {
                      "type": "string",
                      "value": "[resourceId('Microsoft.KeyVault/vaults', parameters('kvName'))]"
                    }
                  }
                }
              },
              "dependsOn": [
                "[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', parameters('functionname'))]"
              ]
            },
            {
              "copy": {
                "name": "userIdentityRoleAssignments",
                "count": "[length(variables('logicappRequiredRoleassignments'))]"
              },
              "type": "Microsoft.Resources/deployments",
              "apiVersion": "2022-09-01",
              "name": "[format('logiapprbac-{0}', copyIndex())]",
              "location": "[deployment().location]",
              "properties": {
                "expressionEvaluationOptions": {
                  "scope": "inner"
                },
                "mode": "Incremental",
                "parameters": {
                  "resourcename": {
                    "value": "[reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('amp-{0}-kv-{1}', parameters('instanceName'), substring(uniqueString(parameters('subscriptionId'), parameters('resourceGroupName'), 'keyvault'), 0, 6))), '2022-09-01').outputs.kvResourceId.value]"
                  },
                  "principalId": {
                    "value": "[reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', parameters('logicappname')), '2022-09-01').outputs.logicAppPrincipalId.value]"
                  },
                  "solutionTag": {
                    "value": "[parameters('solutionTag')]"
                  },
                  "roleDefinitionId": {
                    "value": "[variables('logicappRequiredRoleassignments')[copyIndex()]]"
                  },
                  "roleShortName": {
                    "value": "[variables('logicappRequiredRoleassignments')[copyIndex()]]"
                  },
                  "instanceName": {
                    "value": "[parameters('instanceName')]"
                  }
                },
                "template": {
                  "$schema": "https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#",
                  "contentVersion": "1.0.0.0",
                  "metadata": {
                    "_generator": {
                      "name": "bicep",
                      "version": "0.32.4.45862",
                      "templateHash": "12046791720435112264"
                    }
                  },
                  "parameters": {
                    "resourcename": {
                      "type": "string"
                    },
                    "solutionTag": {
                      "type": "string"
                    },
                    "principalId": {
                      "type": "string"
                    },
                    "roleDefinitionId": {
                      "type": "string"
                    },
                    "roleShortName": {
                      "type": "string"
                    },
                    "utcValue": {
                      "type": "string",
                      "defaultValue": "[utcNow()]"
                    },
                    "instanceName": {
                      "type": "string"
                    }
                  },
                  "variables": {
                    "roleIdtoUse": "[subscriptionResourceId('Microsoft.Authorization/roleDefinitions', parameters('roleDefinitionId'))]"
                  },
                  "resources": [
                    {
                      "type": "Microsoft.Authorization/roleAssignments",
                      "apiVersion": "2022-04-01",
                      "name": "[guid(subscription().id, parameters('principalId'), parameters('roleDefinitionId'), parameters('instanceName'))]",
                      "properties": {
                        "description": "[format('{0}-{1}-{2}-{3}', parameters('solutionTag'), parameters('roleShortName'), parameters('resourcename'), parameters('utcValue'))]",
                        "principalId": "[parameters('principalId')]",
                        "principalType": "ServicePrincipal",
                        "roleDefinitionId": "[variables('roleIdtoUse')]"
                      }
                    }
                  ],
                  "outputs": {
                    "roleassignmentname": {
                      "type": "string",
                      "value": "[guid(subscription().id, parameters('principalId'), parameters('roleDefinitionId'), parameters('instanceName'))]"
                    }
                  }
                }
              },
              "dependsOn": [
                "[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('amp-{0}-kv-{1}', parameters('instanceName'), substring(uniqueString(parameters('subscriptionId'), parameters('resourceGroupName'), 'keyvault'), 0, 6)))]",
                "[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', parameters('logicappname'))]"
              ]
            },
            {
              "type": "Microsoft.Resources/deployments",
              "apiVersion": "2022-09-01",
              "name": "PacksDefStorage",
              "subscriptionId": "[parameters('subscriptionId')]",
              "resourceGroup": "[parameters('resourceGroupName')]",
              "properties": {
                "expressionEvaluationOptions": {
                  "scope": "inner"
                },
                "mode": "Incremental",
                "parameters": {
                  "storageAccountName": {
                    "value": "[parameters('storageAccountName')]"
                  },
                  "location": {
                    "value": "[parameters('location')]"
                  },
                  "containerName": {
                    "value": "amba"
                  },
                  "filename": {
                    "value": "PacksDef.json"
                  },
                  "tags": {
                    "value": "[parameters('Tags')]"
                  },
                  "sasExpiry": {
                    "value": "PT1H"
                  }
                },
                "template": {
                  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                  "contentVersion": "1.0.0.0",
                  "metadata": {
                    "_generator": {
                      "name": "bicep",
                      "version": "0.32.4.45862",
                      "templateHash": "1045842812588093509"
                    }
                  },
                  "parameters": {
                    "location": {
                      "type": "string"
                    },
                    "storageAccountName": {
                      "type": "string"
                    },
                    "sasExpiry": {
                      "type": "string",
                      "defaultValue": "[dateTimeAdd(utcNow(), 'PT2H')]"
                    },
                    "filename": {
                      "type": "string"
                    },
                    "containerName": {
                      "type": "string"
                    },
                    "tags": {
                      "type": "object"
                    }
                  },
                  "variables": {
                    "$fxv#0": "ew0KICAgICJQYWNrcyI6IFsNCiAgICAgICAgew0KICAgICAgICAgICAgIk5hbWUiOiAiV2luZG93cyBGYWlsb3ZlciBDbHVzdGVyIDIwMTYiLA0KICAgICAgICAgICAgIlRhZyI6ICJXU0ZDMjAxNiIsDQogICAgICAgICAgICAiRGVzY3JpcHRpb24iOiAiV2luZG93cyBGYWlsb3ZlciBDbHVzdGVyIDIwMTYiLA0KICAgICAgICAgICAgIk9TIjogIldpbmRvd3MiLA0KICAgICAgICAgICAgIlJ1bGVzIjogWw0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgIlJ1bGVuYW1lIjogIldTRkMyMDE2IiwNCiAgICAgICAgICAgICAgICAgICAgIlJ1bGVUeXBlIjogIkV2ZW50UGVyZm9ybWFuY2UiLA0KICAgICAgICAgICAgICAgICAgICAiUnVsZU5hbWVQYXRoIjogImRjci1iYXNpY1dpblZNLmJpY2VwIiwNCiAgICAgICAgICAgICAgICAgICAgInhQYXRoUXVlcmllcyI6IFsNCiAgICAgICAgICAgICAgICAgICAgICAgICJTeXN0ZW0hKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9XFwnTWljcm9zb2Z0LVdpbmRvd3MtRmFpbG92ZXJDbHVzdGVyaW5nXFwnXSBhbmQgKEV2ZW50SUQ9MTU4MyldXSINCiAgICAgICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICAgICAgInBlcmZvcm1hbmNlQ291bnRlcnMiIDpbDQogICAgICAgICAgICAgICAgICAgIF0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgIkFsZXJ0cyI6IFsNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJBbiBhdHRlbXB0IHRvIGRpc2FibGUgY29ubmVjdGlvbiBzZWN1cml0eSBmYWlsZWQiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiQW4gYXR0ZW1wdCB0byBkaXNhYmxlIGNvbm5lY3Rpb24gc2VjdXJpdHkgZmFpbGVkIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLVdpbmRvd3MtQ2x1c3Rlci0yMDE2LTEiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAxLA0KICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFR5cGUiOiAicm93cyIsDQogICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlIEV2ZW50SUQgaW4gKDE1ODMpIGFuZCBFdmVudExvZyA9PSAnU3lzdGVtJyBhbmQgU291cmNlID09ICdNaWNyb3NvZnQtV2luZG93cy1GYWlsb3ZlckNsdXN0ZXJpbmcnIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiQ2x1c3RlciBuZXR3b3JrIG5hbWUgcmVzb3VyY2UgZmFpbGVkIHRvIHJlZ2lzdGVyIGR5bmFtaWMgdXBkYXRlcyIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJDbHVzdGVyIG5ldHdvcmsgbmFtZSByZXNvdXJjZSBmYWlsZWQgdG8gcmVnaXN0ZXIgZHluYW1pYyB1cGRhdGVzIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLVdpbmRvd3MtQ2x1c3Rlci0yMDE2LTIiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAxLA0KICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFR5cGUiOiAicm93cyIsDQogICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICgxNTc4KSBhbmQgRXZlbnRMb2cgPT0gJ1N5c3RlbScgYW5kIFNvdXJjZSA9PSAnTWljcm9zb2Z0LVdpbmRvd3MtRmFpbG92ZXJDbHVzdGVyaW5nJyINCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIkNsdXN0ZXIgbmV0d29yayBuYW1lIHJlc291cmNlIGZhaWxlZCB0byByZWdpc3RlciBpbiBzZWN1cmUgRE5TIHpvbmUgYmVjYXVzZSByZWNvcmQgd2FzIGFscmVhZHkgcmVnaXN0ZXJlZCBhbmQgb3duZWQiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiQ2x1c3RlciBuZXR3b3JrIG5hbWUgcmVzb3VyY2UgZmFpbGVkIHRvIHJlZ2lzdGVyIGluIHNlY3VyZSBETlMgem9uZSBiZWNhdXNlIHJlY29yZCB3YXMgYWxyZWFkeSByZWdpc3RlcmVkIGFuZCBvd25lZCIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIkFsZXJ0UnVsZS1XaW5kb3dzLUNsdXN0ZXItMjAxNi0zIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMSwNCiAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICJldmFsdWF0aW9uRnJlcXVlbmN5IjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiRXZlbnQgfCB3aGVyZSAgRXZlbnRJRCBpbiAoMTU3NikgYW5kIEV2ZW50TG9nID09ICdTeXN0ZW0nIGFuZCBTb3VyY2UgPT0gJ01pY3Jvc29mdC1XaW5kb3dzLUZhaWxvdmVyQ2x1c3RlcmluZyciDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJDbHVzdGVyIG5ldHdvcmsgbmFtZSByZXNvdXJjZSBmYWlsZWQgdG8gcmVnaXN0ZXIgaW4gc2VjdXJlIEROUyB6b25lIGJlY2F1c2UgcmVnaXN0cmF0aW9uIHdhcyByZWZ1c2VkIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIkNsdXN0ZXIgbmV0d29yayBuYW1lIHJlc291cmNlIGZhaWxlZCB0byByZWdpc3RlciBpbiBzZWN1cmUgRE5TIHpvbmUgYmVjYXVzZSByZWdpc3RyYXRpb24gd2FzIHJlZnVzZWQiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlTmFtZSI6ICJBbGVydFJ1bGUtV2luZG93cy1DbHVzdGVyLTIwMTYtNCIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVTZXZlcml0eSI6IDIsDQogICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDE1ODApIGFuZCBFdmVudExvZyA9PSAnU3lzdGVtJyBhbmQgU291cmNlID09ICdNaWNyb3NvZnQtV2luZG93cy1GYWlsb3ZlckNsdXN0ZXJpbmcnIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiQ2x1c3RlciBuZXR3b3JrIG5hbWUgcmVzb3VyY2UgZmFpbGVkIHRvIHVwZGF0ZSBETlMgQSByZWNvcmQiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiQ2x1c3RlciBuZXR3b3JrIG5hbWUgcmVzb3VyY2UgZmFpbGVkIHRvIHVwZGF0ZSBETlMgQSByZWNvcmQiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlTmFtZSI6ICJBbGVydFJ1bGUtV2luZG93cy1DbHVzdGVyLTIwMTYtNSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVTZXZlcml0eSI6IDEsDQogICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDE1NzkpIGFuZCBFdmVudExvZyA9PSAnU3lzdGVtJyBhbmQgU291cmNlID09ICdNaWNyb3NvZnQtV2luZG93cy1GYWlsb3ZlckNsdXN0ZXJpbmcnIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiQ2x1c3RlciBzZXJ2aWNlIGhhcyBkZXRlcm1pbmVkIHRoYXQgdGhpcyBub2RlIGRvZXMgbm90IGhhdmUgdGhlIGxhdGVzdCBjb3B5IG9mIGNsdXN0ZXIgY29uZmlndXJhdGlvbiBkYXRhIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIkNsdXN0ZXIgc2VydmljZSBoYXMgZGV0ZXJtaW5lZCB0aGF0IHRoaXMgbm9kZSBkb2VzIG5vdCBoYXZlIHRoZSBsYXRlc3QgY29weSBvZiBjbHVzdGVyIGNvbmZpZ3VyYXRpb24gZGF0YSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIkFsZXJ0UnVsZS1XaW5kb3dzLUNsdXN0ZXItMjAxNi02IiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMSwNCiAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICJldmFsdWF0aW9uRnJlcXVlbmN5IjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiRXZlbnQgfCB3aGVyZSAgRXZlbnRJRCBpbiAoMTU2MSkgYW5kIEV2ZW50TG9nID09ICdTeXN0ZW0nIGFuZCBTb3VyY2UgPT0gJ01pY3Jvc29mdC1XaW5kb3dzLUZhaWxvdmVyQ2x1c3RlcmluZyciDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgXQ0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgICAiTmFtZSI6ICJBenVyZSBNb25pdG9yIFZNIEluc2lnaHRzIiwNCiAgICAgICAgICAgICJUYWciOiAiVk1JIiwNCiAgICAgICAgICAgICJEZXNjcmlwdGlvbiI6ICJBenVyZSBNb25pdG9yIFZNIEluc2lnaHRzIiwNCiAgICAgICAgICAgICJPUyI6ICJBbGwiLA0KICAgICAgICAgICAgIlJ1bGVzIjogWw0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgIlJ1bGVuYW1lIjogIlZNSSIsDQogICAgICAgICAgICAgICAgICAgICJSdWxlVHlwZSI6ICJWTUluc2lnaHRzIiwNCiAgICAgICAgICAgICAgICAgICAgIlJ1bGVOYW1lUGF0aCI6ICJEZWZhdWx0Vk1JLXJ1bGUuYmljZXAiLA0KICAgICAgICAgICAgICAgICAgICAieFBhdGhRdWVyaWVzIjogW10sDQogICAgICAgICAgICAgICAgICAgICJwZXJmb3JtYW5jZUNvdW50ZXJzIiA6W10NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgIkFsZXJ0cyI6IFsNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJMb2cgQWxlcnQgZm9yIFZpcnR1YWwgTWFjaGluZSBEYXRhIERpc2sgUmVhZCBMYXRlbmN5IChtcykiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiRGF0YSBEaXNrIFJlYWQgTGF0ZW5jeSAobXMpIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiRGF0YURpc2tSZWFkTGF0ZW5jeShtcykiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAyLA0KICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQ1TSIsDQogICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJBZ2dyZWdhdGVkIiwNCiAgICAgICAgICAgICAgICAgICAgIm1ldHJpY01lYXN1cmVDb2x1bW4iOiAiQWdncmVnYXRlZFZhbHVlIiwNCiAgICAgICAgICAgICAgICAgICAgIm9wZXJhdG9yIjogIkdyZWF0ZXJUaGFuIiwNCiAgICAgICAgICAgICAgICAgICAgInRocmVzaG9sZCI6IDMwLA0KICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiSW5zaWdodHNNZXRyaWNzXG58IHdoZXJlIE9yaWdpbiA9PSBcInZtLmF6bS5tc1wiXG58IHdoZXJlIE5hbWVzcGFjZSA9PSBcIkxvZ2ljYWxEaXNrXCIgYW5kIE5hbWUgPT0gXCJSZWFkTGF0ZW5jeU1zXCJcbnwgZXh0ZW5kIERpc2s9dG9zdHJpbmcodG9keW5hbWljKFRhZ3MpW1widm0uYXptLm1zL21vdW50SWRcIl0pXG58IHdoZXJlIERpc2sgIWluICgnQzonLCcvJylcbnwgc3VtbWFyaXplIEFnZ3JlZ2F0ZWRWYWx1ZSA9IGF2ZyhWYWwpIGJ5IGJpbihUaW1lR2VuZXJhdGVkLDE1bSksIENvbXB1dGVyLCBfUmVzb3VyY2VJZCwgRGlzayINCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIkxvZyBBbGVydCBmb3IgVmlydHVhbCBNYWNoaW5lIERhdGEgRGlzayBGcmVlIFNwYWNlIFBlcmNlbnRhZ2UiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiRGF0YSBEaXNrIEZyZWUgU3BhY2UgUGVyY2VudGFnZSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIkRhdGFEaXNrRnJlZVNwYWNlUGVyY2VudGFnZSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVTZXZlcml0eSI6IDIsDQogICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDVNIiwNCiAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogIkFnZ3JlZ2F0ZWQiLA0KICAgICAgICAgICAgICAgICAgICAibWV0cmljTWVhc3VyZUNvbHVtbiI6ICJBZ2dyZWdhdGVkVmFsdWUiLA0KICAgICAgICAgICAgICAgICAgICAib3BlcmF0b3IiOiAiTGVzc1RoYW4iLA0KICAgICAgICAgICAgICAgICAgICAidGhyZXNob2xkIjogMTAsDQogICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJJbnNpZ2h0c01ldHJpY3Ncbnwgd2hlcmUgT3JpZ2luID09IFwidm0uYXptLm1zXCJcbnwgd2hlcmUgTmFtZXNwYWNlID09IFwiTG9naWNhbERpc2tcIiBhbmQgTmFtZSA9PSBcIkZyZWVTcGFjZVBlcmNlbnRhZ2VcIlxufCBleHRlbmQgRGlzaz10b3N0cmluZyh0b2R5bmFtaWMoVGFncylbXCJ2bS5hem0ubXMvbW91bnRJZFwiXSlcbnwgd2hlcmUgRGlzayAhaW4gKCdDOicsJy8nKVxufCBzdW1tYXJpemUgQWdncmVnYXRlZFZhbHVlID0gYXZnKFZhbCkgYnkgYmluKFRpbWVHZW5lcmF0ZWQsMTVtKSwgQ29tcHV0ZXIsIF9SZXNvdXJjZUlkLCBEaXNrIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiTG9nIEFsZXJ0IGZvciBWaXJ0dWFsIE1hY2hpbmUgRGF0YSBEaXNrIFdyaXRlIExhdGVuY3kgKG1zKSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJEYXRhIERpc2sgV3JpdGUgTGF0ZW5jeSAobXMpIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiRGF0YURpc2tXcml0ZUxhdGVuY3kobXMpIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMiwNCiAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICJldmFsdWF0aW9uRnJlcXVlbmN5IjogIlBUNU0iLA0KICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFR5cGUiOiAiQWdncmVnYXRlZCIsDQogICAgICAgICAgICAgICAgICAgICJtZXRyaWNNZWFzdXJlQ29sdW1uIjogIkFnZ3JlZ2F0ZWRWYWx1ZSIsDQogICAgICAgICAgICAgICAgICAgICJvcGVyYXRvciI6ICJHcmVhdGVyVGhhbiIsDQogICAgICAgICAgICAgICAgICAgICJ0aHJlc2hvbGQiOiAzMCwNCiAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkluc2lnaHRzTWV0cmljc1xufCB3aGVyZSBPcmlnaW4gPT0gXCJ2bS5hem0ubXNcIlxufCB3aGVyZSBOYW1lc3BhY2UgPT0gXCJMb2dpY2FsRGlza1wiIGFuZCBOYW1lID09IFwiV3JpdGVMYXRlbmN5TXNcIlxufCBleHRlbmQgRGlzaz10b3N0cmluZyh0b2R5bmFtaWMoVGFncylbXCJ2bS5hem0ubXMvbW91bnRJZFwiXSlcbnwgd2hlcmUgRGlzayAhaW4gKCdDOicsJy8nKVxufCBzdW1tYXJpemUgQWdncmVnYXRlZFZhbHVlID0gYXZnKFZhbCkgYnkgYmluKFRpbWVHZW5lcmF0ZWQsMTVtKSwgQ29tcHV0ZXIsIF9SZXNvdXJjZUlkLCBEaXNrIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiTG9nIEFsZXJ0IGZvciBWaXJ0dWFsIE1hY2hpbmUgTmV0d29yayBSZWFkIChieXRlcy1zZWMpIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIk5ldHdvcmsgUmVhZCAoYnl0ZXMtc2VjKSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIk5ldHdvcmtSZWFkKGJ5dGVzLXNlYykiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAyLA0KICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQ1TSIsDQogICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJBZ2dyZWdhdGVkIiwNCiAgICAgICAgICAgICAgICAgICAgIm1ldHJpY01lYXN1cmVDb2x1bW4iOiAiQWdncmVnYXRlZFZhbHVlIiwNCiAgICAgICAgICAgICAgICAgICAgIm9wZXJhdG9yIjogIkdyZWF0ZXJUaGFuIiwNCiAgICAgICAgICAgICAgICAgICAgInRocmVzaG9sZCI6IDEwMDAwMDAwLA0KICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiSW5zaWdodHNNZXRyaWNzXG58IHdoZXJlIE9yaWdpbiA9PSBcInZtLmF6bS5tc1wiXG58IHdoZXJlIE5hbWVzcGFjZSA9PSBcIk5ldHdvcmtcIiBhbmQgTmFtZSA9PSBcIlJlYWRCeXRlc1BlclNlY29uZFwiXG58IGV4dGVuZCBOZXR3b3JrSW50ZXJmYWNlPXRvc3RyaW5nKHRvZHluYW1pYyhUYWdzKVtcInZtLmF6bS5tcy9uZXR3b3JrRGV2aWNlSWRcIl0pXG58IHN1bW1hcml6ZSBBZ2dyZWdhdGVkVmFsdWUgPSBhdmcoVmFsKSBieSBiaW4oVGltZUdlbmVyYXRlZCwgMTVtKSwgQ29tcHV0ZXIsIF9SZXNvdXJjZUlkLCBOZXR3b3JrSW50ZXJmYWNlIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiTG9nIEFsZXJ0IGZvciBWaXJ0dWFsIE1hY2hpbmUgTmV0d29yayBXcml0ZSAoYnl0ZXMtc2VjKSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJOZXR3b3JrIFdyaXRlIChieXRlcy1zZWMpIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiTmV0d29ya1dyaXRlKGJ5dGVzLXNlYykiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAyLA0KICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQ1TSIsDQogICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJBZ2dyZWdhdGVkIiwNCiAgICAgICAgICAgICAgICAgICAgIm1ldHJpY01lYXN1cmVDb2x1bW4iOiAiQWdncmVnYXRlZFZhbHVlIiwNCiAgICAgICAgICAgICAgICAgICAgIm9wZXJhdG9yIjogIkdyZWF0ZXJUaGFuIiwNCiAgICAgICAgICAgICAgICAgICAgInRocmVzaG9sZCI6IDEwMDAwMDAwLA0KICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiSW5zaWdodHNNZXRyaWNzXG58IHdoZXJlIE9yaWdpbiA9PSBcInZtLmF6bS5tc1wiXG58IHdoZXJlIE5hbWVzcGFjZSA9PSBcIk5ldHdvcmtcIiBhbmQgTmFtZSA9PSBcIldyaXRlQnl0ZXNQZXJTZWNvbmRcIlxufCBleHRlbmQgTmV0d29ya0ludGVyZmFjZT10b3N0cmluZyh0b2R5bmFtaWMoVGFncylbXCJ2bS5hem0ubXMvbmV0d29ya0RldmljZUlkXCJdKVxufCBzdW1tYXJpemUgQWdncmVnYXRlZFZhbHVlID0gYXZnKFZhbCkgYnkgYmluKFRpbWVHZW5lcmF0ZWQsIDE1bSksIENvbXB1dGVyLCBfUmVzb3VyY2VJZCwgTmV0d29ya0ludGVyZmFjZSINCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIkxvZyBBbGVydCBmb3IgVmlydHVhbCBNYWNoaW5lIERhdGEgT1MgUmVhZCBMYXRlbmN5IChtcykiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiT1MgRGlzayBSZWFkIExhdGVuY3kgKG1zKSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIk9TRGlza1JlYWRMYXRlbmN5KG1zKSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVTZXZlcml0eSI6IDIsDQogICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDVNIiwNCiAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogIkFnZ3JlZ2F0ZWQiLA0KICAgICAgICAgICAgICAgICAgICAibWV0cmljTWVhc3VyZUNvbHVtbiI6ICJBZ2dyZWdhdGVkVmFsdWUiLA0KICAgICAgICAgICAgICAgICAgICAib3BlcmF0b3IiOiAiR3JlYXRlclRoYW4iLA0KICAgICAgICAgICAgICAgICAgICAidGhyZXNob2xkIjogMzAsDQogICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJJbnNpZ2h0c01ldHJpY3Ncbnwgd2hlcmUgT3JpZ2luID09IFwidm0uYXptLm1zXCJcbnwgd2hlcmUgTmFtZXNwYWNlID09IFwiTG9naWNhbERpc2tcIiBhbmQgTmFtZSA9PSBcIlJlYWRMYXRlbmN5TXNcIlxufCBleHRlbmQgRGlzaz10b3N0cmluZyh0b2R5bmFtaWMoVGFncylbXCJ2bS5hem0ubXMvbW91bnRJZFwiXSlcbnwgc3VtbWFyaXplIEFnZ3JlZ2F0ZWRWYWx1ZSA9IGF2ZyhWYWwpIGJ5IGJpbihUaW1lR2VuZXJhdGVkLCAxNW0pLCBDb21wdXRlciwgX1Jlc291cmNlSWQsIERpc2siDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJMb2cgQWxlcnQgZm9yIFZpcnR1YWwgTWFjaGluZSBPUyBEaXNrIEZyZWUgU3BhY2UgUGVyY2VudGFnZSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJPUyBEaXNrIEZyZWUgU3BhY2UgUGVyY2VudGFnZSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIk9TRGlza0ZyZWVTcGFjZVBlcmNlbnRhZ2UiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAyLA0KICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQ1TSIsDQogICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJBZ2dyZWdhdGVkIiwNCiAgICAgICAgICAgICAgICAgICAgIm1ldHJpY01lYXN1cmVDb2x1bW4iOiAiQWdncmVnYXRlZFZhbHVlIiwNCiAgICAgICAgICAgICAgICAgICAgIm9wZXJhdG9yIjogIkxlc3NUaGFuIiwNCiAgICAgICAgICAgICAgICAgICAgInRocmVzaG9sZCI6IDEwLA0KICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiSW5zaWdodHNNZXRyaWNzXG58IHdoZXJlIE9yaWdpbiA9PSBcInZtLmF6bS5tc1wiXG58IHdoZXJlIE5hbWVzcGFjZSA9PSBcIkxvZ2ljYWxEaXNrXCIgYW5kIE5hbWUgPT0gXCJGcmVlU3BhY2VQZXJjZW50YWdlXCJcbnwgZXh0ZW5kIERpc2s9dG9zdHJpbmcodG9keW5hbWljKFRhZ3MpW1widm0uYXptLm1zL21vdW50SWRcIl0pXG58IHN1bW1hcml6ZSBBZ2dyZWdhdGVkVmFsdWUgPSBhdmcoVmFsKSBieSBiaW4oVGltZUdlbmVyYXRlZCwgMTVtKSwgQ29tcHV0ZXIsIF9SZXNvdXJjZUlkLCBEaXNrIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiTG9nIEFsZXJ0IGZvciBWaXJ0dWFsIE1hY2hpbmUgT1MgRGlzayBXcml0ZSBMYXRlbmN5IChtcykiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiT1MgRGlzayBXcml0ZSBMYXRlbmN5IChtcykiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlTmFtZSI6ICJPU0Rpc2tXcml0ZUxhdGVuY3kobXMpIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMiwNCiAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICJldmFsdWF0aW9uRnJlcXVlbmN5IjogIlBUNU0iLA0KICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFR5cGUiOiAiQWdncmVnYXRlZCIsDQogICAgICAgICAgICAgICAgICAgICJtZXRyaWNNZWFzdXJlQ29sdW1uIjogIkFnZ3JlZ2F0ZWRWYWx1ZSIsDQogICAgICAgICAgICAgICAgICAgICJvcGVyYXRvciI6ICJHcmVhdGVyVGhhbiIsDQogICAgICAgICAgICAgICAgICAgICJ0aHJlc2hvbGQiOiA1MCwNCiAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkluc2lnaHRzTWV0cmljc3wgd2hlcmUgT3JpZ2luID09IFwidm0uYXptLm1zXCJcbnwgd2hlcmUgTmFtZXNwYWNlID09IFwiTG9naWNhbERpc2tcIiBhbmQgTmFtZSA9PSBcIldyaXRlTGF0ZW5jeU1zXCJcbnwgZXh0ZW5kIERpc2s9dG9zdHJpbmcodG9keW5hbWljKFRhZ3MpW1widm0uYXptLm1zL21vdW50SWRcIl0pXG58IHN1bW1hcml6ZSBBZ2dyZWdhdGVkVmFsdWUgPSBhdmcoVmFsKSBieSBiaW4oVGltZUdlbmVyYXRlZCwgMTVtKSwgQ29tcHV0ZXIsIF9SZXNvdXJjZUlkLCBEaXNrIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiTG9nIEFsZXJ0IGZvciBWaXJ0dWFsIE1hY2hpbmUgUHJvY2Vzc29yIFV0aWxpemF0aW9uIFBlcmNlbnRhZ2UiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiUHJvY2Vzc29yIFV0aWxpemF0aW9uIFBlcmNlbnRhZ2UiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlTmFtZSI6ICJQcm9jZXNzb3JVdGlsaXphdGlvblBlcmNlbnRhZ2UiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAyLA0KICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQ1TSIsDQogICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJBZ2dyZWdhdGVkIiwNCiAgICAgICAgICAgICAgICAgICAgIm1ldHJpY01lYXN1cmVDb2x1bW4iOiAiQWdncmVnYXRlZFZhbHVlIiwNCiAgICAgICAgICAgICAgICAgICAgIm9wZXJhdG9yIjogIkdyZWF0ZXJUaGFuIiwNCiAgICAgICAgICAgICAgICAgICAgInRocmVzaG9sZCI6IDg1LA0KICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiSW5zaWdodHNNZXRyaWNzXG58IHdoZXJlIE9yaWdpbiA9PSBcInZtLmF6bS5tc1wiXG58IHdoZXJlIE5hbWVzcGFjZSA9PSBcIlByb2Nlc3NvclwiIGFuZCBOYW1lID09IFwiVXRpbGl6YXRpb25QZXJjZW50YWdlXCJcbnwgc3VtbWFyaXplIEFnZ3JlZ2F0ZWRWYWx1ZSA9IGF2ZyhWYWwpIGJ5IGJpbihUaW1lR2VuZXJhdGVkLCAxNW0pLCBDb21wdXRlciwgX1Jlc291cmNlSWQiDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJMb2cgQWxlcnQgZm9yIFZpcnR1YWwgTWFjaGluZSBBdmFpbGFibGUgTWVtb3J5IFBlcmNlbnRhZ2UiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiQXZhaWxhYmxlIE1lbW9yeSBQZXJjZW50YWdlIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQXZhaWxhYmxlTWVtb3J5UGVyY2VudGFnZSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVTZXZlcml0eSI6IDIsDQogICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDVNIiwNCiAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogIkFnZ3JlZ2F0ZWQiLA0KICAgICAgICAgICAgICAgICAgICAibWV0cmljTWVhc3VyZUNvbHVtbiI6ICJBZ2dyZWdhdGVkVmFsdWUiLA0KICAgICAgICAgICAgICAgICAgICAib3BlcmF0b3IiOiAiTGVzc1RoYW4iLA0KICAgICAgICAgICAgICAgICAgICAidGhyZXNob2xkIjogMTAsDQogICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJJbnNpZ2h0c01ldHJpY3Ncbnwgd2hlcmUgT3JpZ2luID09IFwidm0uYXptLm1zXCJcbnwgd2hlcmUgTmFtZXNwYWNlID09IFwiTWVtb3J5XCIgYW5kIE5hbWUgPT0gXCJBdmFpbGFibGVNQlwiXG58IGV4dGVuZCBUb3RhbE1lbW9yeSA9IHRvcmVhbCh0b2R5bmFtaWMoVGFncylbXCJ2bS5hem0ubXMvbWVtb3J5U2l6ZU1CXCJdKVxufCBleHRlbmQgQXZhaWxhYmxlTWVtb3J5UGVyY2VudGFnZSA9ICh0b3JlYWwoVmFsKSAvIFRvdGFsTWVtb3J5KSAqIDEwMC4wXG58IHN1bW1hcml6ZSBBZ2dyZWdhdGVkVmFsdWUgPSBhdmcoQXZhaWxhYmxlTWVtb3J5UGVyY2VudGFnZSkgYnkgYmluKFRpbWVHZW5lcmF0ZWQsIDE1bSksIENvbXB1dGVyLCBfUmVzb3VyY2VJZCINCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICBdDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICAgICJOYW1lIjogIklJUyAyMDEyICIsDQogICAgICAgICAgICAiVGFnIjogIklJUyIsDQogICAgICAgICAgICAiRGVzY3JpcHRpb24iOiAiSUlTIDIwMTIgTWFuZ2VtZW50IFBhY2siLA0KICAgICAgICAgICAgIk9TIjogIldpbmRvd3MiLA0KICAgICAgICAgICAgIlJ1bGVzIjogWw0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgIlJ1bGVuYW1lIjogIklJUyIsDQogICAgICAgICAgICAgICAgICAgICJSdWxlVHlwZSI6ICJFdmVudFBlcmZvcm1hbmNlIiwNCiAgICAgICAgICAgICAgICAgICAgIlJ1bGVOYW1lUGF0aCI6ICJkY3ItYmFzaWNXaW5WTS5iaWNlcCIsDQogICAgICAgICAgICAgICAgICAgICJ4UGF0aFF1ZXJpZXMiOiBbXSwNCiAgICAgICAgICAgICAgICAgICAgInBlcmZvcm1hbmNlQ291bnRlcnMiIDpbXQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiUnVsZW5hbWUiOiAiSUlTTG9ncyIsDQogICAgICAgICAgICAgICAgICAgICJSdWxlVHlwZSI6ICJJSVNMb2dzIiwNCiAgICAgICAgICAgICAgICAgICAgIlJ1bGVOYW1lUGF0aCI6ICJmaWxlY29sbGVjdGlvbldpbklJUy5iaWNlcCIsDQogICAgICAgICAgICAgICAgICAgICJ4UGF0aFF1ZXJpZXMiOiBbICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAiU3lzdGVtISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPVxcJ01pY3Jvc29mdC1XaW5kb3dzLUlJUy1XM1NWQ1xcJ10gYW5kIChFdmVudElEPTEwNzEgb3IgRXZlbnRJRD0xMDczKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTeXN0ZW0hKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9XFwnTWljcm9zb2Z0LVdpbmRvd3MtSUlTLVczU1ZDXFwnXSBhbmQgKEV2ZW50SUQ9MTEzNSBvciBFdmVudElEPTExMzQpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkFwcGxpY2F0aW9uISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPVxcJ01pY3Jvc29mdC1XaW5kb3dzLUlJUy1XM1NWQy1XUFxcJ10gYW5kIChFdmVudElEPTIyMjYgb3IgRXZlbnRJRD0yMjMwIG9yIEV2ZW50SUQ9MjIzMSBvciBFdmVudElEPTIyMzIpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkFwcGxpY2F0aW9uISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPVxcJ01pY3Jvc29mdC1XaW5kb3dzLUlJUy1XM1NWQy1XUFxcJ10gYW5kIChFdmVudElEPTIyNzQgb3IgRXZlbnRJRD0yMjY4IG9yIEV2ZW50SUQ9MjIyMCBvciBFdmVudElEPTIyMTkgb3IgRXZlbnRJRD0yMjE0KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTeXN0ZW0hKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9XFwnTWljcm9zb2Z0LVdpbmRvd3MtV0FTXFwnXSBhbmQgKEV2ZW50SUQ9NTE3MiBvciBFdmVudElEPTUxNzMpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1XQVNcXCddIGFuZCAoRXZlbnRJRD01MTc0IG9yIEV2ZW50SUQ9NTE3OSBvciBFdmVudElEPTUxODApXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1XQVNcXCddIGFuZCAoRXZlbnRJRD01MTUyKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTeXN0ZW0hKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9XFwnTWljcm9zb2Z0LVdpbmRvd3MtSUlTLVczU1ZDXFwnXSBhbmQgKEV2ZW50SUQ9MTAzNyldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiU3lzdGVtISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPVxcJ01pY3Jvc29mdC1XaW5kb3dzLUlJUy1XM1NWQ1xcJ10gYW5kIChFdmVudElEPTEwNjIpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkNcXCddIGFuZCAoRXZlbnRJRD0xMTI2KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTeXN0ZW0hKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9XFwnTWljcm9zb2Z0LVdpbmRvd3MtSUlTLVczU1ZDXFwnXSBhbmQgKEV2ZW50SUQ9MTEzMyldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiU3lzdGVtISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPVxcJ01pY3Jvc29mdC1XaW5kb3dzLUlJUy1XM1NWQ1xcJ10gYW5kIChFdmVudElEPTExNzMpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkNcXCddIGFuZCAoRXZlbnRJRD0xMTc1KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJBcHBsaWNhdGlvbiEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1BcXCddIGFuZCAoRXZlbnRJRD0yMjAxKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJBcHBsaWNhdGlvbiEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1BcXCddIGFuZCAoRXZlbnRJRD0yMjAzKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJBcHBsaWNhdGlvbiEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1BcXCddIGFuZCAoRXZlbnRJRD0yMjA0KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJBcHBsaWNhdGlvbiEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1BcXCddIGFuZCAoRXZlbnRJRD0yMjA2KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJBcHBsaWNhdGlvbiEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1BcXCddIGFuZCAoRXZlbnRJRD0yMjA4KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJBcHBsaWNhdGlvbiEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1BcXCddIGFuZCAoRXZlbnRJRD0yMjE4KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJBcHBsaWNhdGlvbiEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1BcXCddIGFuZCAoRXZlbnRJRD0yMjI3KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJBcHBsaWNhdGlvbiEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1BcXCddIGFuZCAoRXZlbnRJRD0yMjMzKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJBcHBsaWNhdGlvbiEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1BcXCddIGFuZCAoRXZlbnRJRD0yMjU4KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJBcHBsaWNhdGlvbiEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1BcXCddIGFuZCAoRXZlbnRJRD0yMjYxKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJBcHBsaWNhdGlvbiEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1BcXCddIGFuZCAoRXZlbnRJRD0yMjY0KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJBcHBsaWNhdGlvbiEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1BcXCddIGFuZCAoRXZlbnRJRD0yMjgxKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJBcHBsaWNhdGlvbiEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1BcXCddIGFuZCAoRXZlbnRJRD0yMjkzKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJBcHBsaWNhdGlvbiEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1BcXCddIGFuZCAoRXZlbnRJRD0yMjk1KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJBcHBsaWNhdGlvbiEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1BcXCddIGFuZCAoRXZlbnRJRD0yMjk2KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJBcHBsaWNhdGlvbiEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1BcXCddIGFuZCAoRXZlbnRJRD0yMjk4KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTeXN0ZW0hKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9XFwnTWljcm9zb2Z0LVdpbmRvd3MtV0FTXFwnXSBhbmQgKEV2ZW50SUQ9NTAwNSldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiU3lzdGVtISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPVxcJ01pY3Jvc29mdC1XaW5kb3dzLVdBU1xcJ10gYW5kIChFdmVudElEPTUwMzApXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1XQVNcXCddIGFuZCAoRXZlbnRJRD01MDM2KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTeXN0ZW0hKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9XFwnTWljcm9zb2Z0LVdpbmRvd3MtV0FTXFwnXSBhbmQgKEV2ZW50SUQ9NTA1MyldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiU3lzdGVtISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPVxcJ01pY3Jvc29mdC1XaW5kb3dzLVdBU1xcJ10gYW5kIChFdmVudElEPTUwNjMpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1XQVNcXCddIGFuZCAoRXZlbnRJRD01MDY2KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTeXN0ZW0hKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9XFwnTWljcm9zb2Z0LVdpbmRvd3MtV0FTXFwnXSBhbmQgKEV2ZW50SUQ9NTA2NyldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiU3lzdGVtISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPVxcJ01pY3Jvc29mdC1XaW5kb3dzLVdBU1xcJ10gYW5kIChFdmVudElEPTUxNTMpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1XM0xPR1NWQ1xcJ10gYW5kIChFdmVudElEPTYwMDEpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1XM0xPR1NWQ1xcJ10gYW5kIChFdmVudElEPTYwMDIpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1XM0xPR1NWQ1xcJ10gYW5kIChFdmVudElEPTYwMDMpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1XM0xPR1NWQ1xcJ10gYW5kIChFdmVudElEPTYwMDQpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1XM0xPR1NWQ1xcJ10gYW5kIChFdmVudElEPTYwMDUpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1XM0xPR1NWQ1xcJ10gYW5kIChFdmVudElEPTYwMDYpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1XM0xPR1NWQ1xcJ10gYW5kIChFdmVudElEPTYwMDcpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1XM0xPR1NWQ1xcJ10gYW5kIChFdmVudElEPTYwMDgpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1XM0xPR1NWQ1xcJ10gYW5kIChFdmVudElEPTYwMDkpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1XM0xPR1NWQ1xcJ10gYW5kIChFdmVudElEPTYwMTApXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdNaWNyb3NvZnQtV2luZG93cy1XM0xPR1NWQ1xcJ10gYW5kIChFdmVudElEPTYwMTEpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSEqW1N5c3RlbVtQcm92aWRlcltATmFtZT1cXCdTZXJ2aWNlIENvbnRyb2wgTWFuYWdlclxcJ10gYW5kIChFdmVudElEPTcwMjMgb3IgRXZlbnRJRD03MDI0KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTeXN0ZW0hKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9XFwnU2VydmljZSBDb250cm9sIE1hbmFnZXJcXCddIGFuZCAoRXZlbnRJRD03MDMxKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTeXN0ZW0hKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9XFwnU2VydmljZSBDb250cm9sIE1hbmFnZXJcXCddIGFuZCAoRXZlbnRJRD03MDM0KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTeXN0ZW0hKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9XFwnU2VydmljZSBDb250cm9sIE1hbmFnZXJcXCddIGFuZCAoRXZlbnRJRD03MDQzKV1dIg0KICAgICAgICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICAgICAgICAicGVyZm9ybWFuY2VDb3VudGVycyIgOlsNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXFdlYiBTZXJ2aWNlKF9Ub3RhbClcXEJ5dGVzIFJlY2VpdmVkL3NlYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxXZWIgU2VydmljZShfVG90YWwpXFxCeXRlcyBTZW50L3NlYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxXZWIgU2VydmljZShfVG90YWwpXFxCeXRlcyBUb3RhbC9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcV2ViIFNlcnZpY2UoX1RvdGFsKVxcQ29ubmVjdGlvbiBBdHRlbXB0cy9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcV2ViIFNlcnZpY2UoX1RvdGFsKVxcQ3VycmVudCBDb25uZWN0aW9ucyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxXZWIgU2VydmljZShfVG90YWwpXFxUb3RhbCBNZXRob2QgUmVxdWVzdHMvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXE1pY3Jvc29mdCBGVFAgU2VydmljZShfVG90YWwpXFxCeXRlcyBUb3RhbC9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcTWljcm9zb2Z0IEZUUCBTZXJ2aWNlKF9Ub3RhbClcXEN1cnJlbnQgQ29ubmVjdGlvbnMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcU01UUCBTZXJ2ZXIoX1RvdGFsKVxcQnl0ZXMgUmVjZWl2ZWQvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXFNNVFAgU2VydmVyKF9Ub3RhbClcXEJ5dGVzIFNlbnQvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXFNNVFAgU2VydmVyKF9Ub3RhbClcXEJ5dGVzIFRvdGFsL3NlYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxTTVRQIFNlcnZlcihfVG90YWwpXFxJbmJvdW5kIENvbm5lY3Rpb25zIEN1cnJlbnQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcU01UUCBTZXJ2ZXIoX1RvdGFsKVxcTWVzc2FnZSBCeXRlcyBSZWNlaXZlZC9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcU01UUCBTZXJ2ZXIoX1RvdGFsKVxcTWVzc2FnZSBCeXRlcyBTZW50L3NlYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxTTVRQIFNlcnZlcihfVG90YWwpXFxNZXNzYWdlcyBEZWxpdmVyZWQvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXFNNVFAgU2VydmVyKF9Ub3RhbClcXE1lc3NhZ2VzIFJlY2VpdmVkL3NlYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxTTVRQIFNlcnZlcihfVG90YWwpXFxNZXNzYWdlcyBTZW50L3NlYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxTTVRQIFNlcnZlcihfVG90YWwpXFxPdXRib3VuZCBDb25uZWN0aW9ucyBDdXJyZW50IiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXFNNVFAgU2VydmVyKF9Ub3RhbClcXFRvdGFsIE1lc3NhZ2VzIFN1Ym1pdHRlZCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxTTVRQIFNlcnZlcihTTVRQIDEpXFxCeXRlcyBSZWNlaXZlZC9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcU01UUCBTZXJ2ZXIoU01UUCAxKVxcQnl0ZXMgU2VudC9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcU01UUCBTZXJ2ZXIoU01UUCAxKVxcQnl0ZXMgVG90YWwvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXFNNVFAgU2VydmVyKFNNVFAgMSlcXEluYm91bmQgQ29ubmVjdGlvbnMgQ3VycmVudCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxTTVRQIFNlcnZlcihTTVRQIDEpXFxNZXNzYWdlIEJ5dGVzIFJlY2VpdmVkL3NlYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxTTVRQIFNlcnZlcihTTVRQIDEpXFxNZXNzYWdlIEJ5dGVzIFNlbnQvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXFNNVFAgU2VydmVyKFNNVFAgMSlcXE1lc3NhZ2VzIERlbGl2ZXJlZC9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcU01UUCBTZXJ2ZXIoU01UUCAxKVxcTWVzc2FnZXMgUmVjZWl2ZWQvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXFNNVFAgU2VydmVyKFNNVFAgMSlcXE1lc3NhZ2VzIFNlbnQvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXFNNVFAgU2VydmVyKFNNVFAgMSlcXE91dGJvdW5kIENvbm5lY3Rpb25zIEN1cnJlbnQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcU01UUCBTZXJ2ZXIoU01UUCAxKVxcVG90YWwgTWVzc2FnZXMgU3VibWl0dGVkIg0KICAgICAgICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICAgICAgICAiZmlsZUNvbGxlY3Rpb24iOiBbDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgImZpbGVQYXRoIjogIkM6XFxpbmV0cHViXFxsb2dzXFxMb2dGaWxlc1xcVzNTVkMqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZmlsZU5hbWVQYXR0ZXJuIjogIioubG9nIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZmlsZVR5cGUiOiAiSUlTTG9ncyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgImZpbGVUeXBlTmFtZSI6ICJJSVNMb2dzIg0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBdDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICJBbGVydHMiOiBbDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiQSBzZXJ2ZXIgc2lkZSBpbmNsdWRlIGZpbGUgaGFzIGluY2x1ZGVkIGl0c2VsZiBvciB0aGUgbWF4aW11bSBkZXB0aCBvZiBzZXJ2ZXIgc2lkZSBpbmNsdWRlcyBoYXMgYmVlbiBleGNlZWRlZCIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJBIHNlcnZlciBzaWRlIGluY2x1ZGUgZmlsZSBoYXMgaW5jbHVkZWQgaXRzZWxmIG9yIHRoZSBtYXhpbXVtIGRlcHRoIG9mIHNlcnZlciBzaWRlIGluY2x1ZGVzIGhhcyBiZWVuIGV4Y2VlZGVkIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLUlJUy0yMDEyLTEiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAxLA0KICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFR5cGUiOiAicm93cyIsDQogICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICgyMjIxKSBhbmQgRXZlbnRMb2cgPT0gJ0FwcGxpY2F0aW9uJyBhbmQgU291cmNlID09ICdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1AnIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiQXBwbGljYXRpb24gUG9vbCBoYXMgYW4gSWRsZVRpbWVvdXQgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuIHRoZSBQZXJpb2RpY1Jlc3RhcnQgdGltZSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJBcHBsaWNhdGlvbiBQb29sIGhhcyBhbiBJZGxlVGltZW91dCBlcXVhbCB0byBvciBncmVhdGVyIHRoYW4gdGhlIFBlcmlvZGljUmVzdGFydCB0aW1lIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLUlJUy0yMDEyLTIiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAxLA0KICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFR5cGUiOiAicm93cyIsDQogICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICg1MTUyKSBhbmQgRXZlbnRMb2cgPT0gJ1N5c3RlbScgYW5kIFNvdXJjZSA9PSAnTWljcm9zb2Z0LVdpbmRvd3MtV0FTJyINCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIkFwcGxpY2F0aW9uIFBvb2wgd29ya2VyIHByb2Nlc3MgaXMgdW5yZXNwb25zaXZlIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIkFwcGxpY2F0aW9uIFBvb2wgd29ya2VyIHByb2Nlc3MgaXMgdW5yZXNwb25zaXZlIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLUlJUy0yMDEyLTMiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAxLA0KICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFR5cGUiOiAicm93cyIsDQogICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICg1MDEwLDUwMTEsNTAxMiw1MDEzKSBhbmQgRXZlbnRMb2cgPT0gJ1N5c3RlbScgYW5kIFNvdXJjZSA9PSAnTWljcm9zb2Z0LVdpbmRvd3MtV0FTJyINCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIkFwcGxpY2F0aW9uIFBvb2wgd29ya2VyIHByb2Nlc3MgdGVybWluYXRlZCB1bmV4cGVjdGVkbHkiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiQXBwbGljYXRpb24gUG9vbCB3b3JrZXIgcHJvY2VzcyB0ZXJtaW5hdGVkIHVuZXhwZWN0ZWRseSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIkFsZXJ0UnVsZS1JSVMtMjAxMi00IiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMSwNCiAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICJldmFsdWF0aW9uRnJlcXVlbmN5IjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiRXZlbnQgfCB3aGVyZSAgRXZlbnRJRCBpbiAoNTAwOSkgYW5kIEV2ZW50TG9nID09ICdTeXN0ZW0nIGFuZCBTb3VyY2UgPT0gJ01pY3Jvc29mdC1XaW5kb3dzLVdBUyciDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJBU1AgYXBwbGljYXRpb24gZXJyb3Igb2NjdXJyZWQiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiQVNQIGFwcGxpY2F0aW9uIGVycm9yIG9jY3VycmVkIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLUlJUy0yMDEyLTUiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAxLA0KICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFR5cGUiOiAicm93cyIsDQogICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICg1MDAsNDk5LDIzLDIyLDIxLDIwLDE5LDE4LDE3LDE2LDksOCw3LDYsNSkgYW5kIEV2ZW50TG9nID09ICdBcHBsaWNhdGlvbicgYW5kIFNvdXJjZSA9PSAnQWN0aXZlIFNlcnZlciBQYWdlcyciDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJIVFRQIGNvbnRyb2wgY2hhbm5lbCBmb3IgdGhlIFdXVyBTZXJ2aWNlIGRpZCBub3Qgb3BlbiIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJIVFRQIGNvbnRyb2wgY2hhbm5lbCBmb3IgdGhlIFdXVyBTZXJ2aWNlIGRpZCBub3Qgb3BlbiIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIkFsZXJ0UnVsZS1JSVMtMjAxMi02IiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMSwNCiAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICJldmFsdWF0aW9uRnJlcXVlbmN5IjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiRXZlbnQgfCB3aGVyZSAgRXZlbnRJRCBpbiAoMTAzNykgYW5kIEV2ZW50TG9nID09ICdTeXN0ZW0nIGFuZCBTb3VyY2UgPT0gJ01pY3Jvc29mdC1XaW5kb3dzLUlJUy1XM1NWQyciDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJIVFRQIFNlcnZlciBjb3VsZCBub3QgY3JlYXRlIGEgY2xpZW50IGNvbm5lY3Rpb24gb2JqZWN0IGZvciB1c2VyIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIkhUVFAgU2VydmVyIGNvdWxkIG5vdCBjcmVhdGUgYSBjbGllbnQgY29ubmVjdGlvbiBvYmplY3QgZm9yIHVzZXIiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlTmFtZSI6ICJBbGVydFJ1bGUtSUlTLTIwMTItNyIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVTZXZlcml0eSI6IDEsDQogICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDIyMDgpIGFuZCBFdmVudExvZyA9PSAnQXBwbGljYXRpb24nIGFuZCBTb3VyY2UgPT0gJ01pY3Jvc29mdC1XaW5kb3dzLUlJUy1XM1NWQy1XUCciDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJIVFRQIFNlcnZlciBjb3VsZCBub3QgY3JlYXRlIHRoZSBtYWluIGNvbm5lY3Rpb24gc29ja2V0IiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIkhUVFAgU2VydmVyIGNvdWxkIG5vdCBjcmVhdGUgdGhlIG1haW4gY29ubmVjdGlvbiBzb2NrZXQiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlTmFtZSI6ICJBbGVydFJ1bGUtSUlTLTIwMTItOCIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVTZXZlcml0eSI6IDEsDQogICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDIyMDYpIGFuZCBFdmVudExvZyA9PSAnQXBwbGljYXRpb24nIGFuZCBTb3VyY2UgPT0gJ01pY3Jvc29mdC1XaW5kb3dzLUlJUy1XM1NWQy1XUCciDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJIVFRQIFNlcnZlciBjb3VsZCBub3QgaW5pdGlhbGl6ZSBpdHMgc2VjdXJpdHkiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiSFRUUCBTZXJ2ZXIgY291bGQgbm90IGluaXRpYWxpemUgaXRzIHNlY3VyaXR5IiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLUlJUy0yMDEyLTkiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAxLA0KICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFR5cGUiOiAicm93cyIsDQogICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICgyMjAxKSBhbmQgRXZlbnRMb2cgPT0gJ0FwcGxpY2F0aW9uJyBhbmQgU291cmNlID09ICdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1AnIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiSFRUUCBTZXJ2ZXIgY291bGQgbm90IGluaXRpYWxpemUgdGhlIHNvY2tldCBsaWJyYXJ5IiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIkhUVFAgU2VydmVyIGNvdWxkIG5vdCBpbml0aWFsaXplIHRoZSBzb2NrZXQgbGlicmFyeSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIkFsZXJ0UnVsZS1JSVMtMjAxMi0xMCIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVTZXZlcml0eSI6IDEsDQogICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDIyMDMpIGFuZCBFdmVudExvZyA9PSAnQXBwbGljYXRpb24nIGFuZCBTb3VyY2UgPT0gJ01pY3Jvc29mdC1XaW5kb3dzLUlJUy1XM1NWQy1XUCciDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJIVFRQIFNlcnZlciB3YXMgdW5hYmxlIHRvIGluaXRpYWxpemUgZHVlIHRvIGEgc2hvcnRhZ2Ugb2YgYXZhaWxhYmxlIG1lbW9yeSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJIVFRQIFNlcnZlciB3YXMgdW5hYmxlIHRvIGluaXRpYWxpemUgZHVlIHRvIGEgc2hvcnRhZ2Ugb2YgYXZhaWxhYmxlIG1lbW9yeSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIkFsZXJ0UnVsZS1JSVMtMjAxMi0xMSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVTZXZlcml0eSI6IDEsDQogICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDIyMDQpIGFuZCBFdmVudExvZyA9PSAnQXBwbGljYXRpb24nIGFuZCBTb3VyY2UgPT0gJ01pY3Jvc29mdC1XaW5kb3dzLUlJUy1XM1NWQy1XUCciDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJJU0FQSSBhcHBsaWNhdGlvbiBlcnJvciBkZXRlY3RlZCIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJJU0FQSSBhcHBsaWNhdGlvbiBlcnJvciBkZXRlY3RlZCIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIkFsZXJ0UnVsZS1JSVMtMjAxMi0xMiIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVTZXZlcml0eSI6IDEsDQogICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDIyNzQsMjI2OCwyMjIwLDIyMTksMjIxNCkgYW5kIEV2ZW50TG9nID09ICdBcHBsaWNhdGlvbicgYW5kIFNvdXJjZSA9PSAnTWljcm9zb2Z0LVdpbmRvd3MtSUlTLVczU1ZDLVdQJyINCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIkpvYiBvYmplY3QgYXNzb2NpYXRlZCB3aXRoIHRoZSBhcHBsaWNhdGlvbiBwb29sIGVuY291bnRlcmVkIGFuIGVycm9yIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIkpvYiBvYmplY3QgYXNzb2NpYXRlZCB3aXRoIHRoZSBhcHBsaWNhdGlvbiBwb29sIGVuY291bnRlcmVkIGFuIGVycm9yIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLUlJUy0yMDEyLTEzIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMSwNCiAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICJldmFsdWF0aW9uRnJlcXVlbmN5IjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiRXZlbnQgfCB3aGVyZSAgRXZlbnRJRCBpbiAoNTA4OCw1MDYxLDUwNjApIGFuZCBFdmVudExvZyA9PSAnU3lzdGVtJyBhbmQgU291cmNlID09ICdNaWNyb3NvZnQtV2luZG93cy1XQVMnIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiTW9kdWxlIGhhcyBhbiBpbnZhbGlkIHByZWNvbmRpdGlvbiIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJNb2R1bGUgaGFzIGFuIGludmFsaWQgcHJlY29uZGl0aW9uIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLUlJUy0yMDEyLTE0IiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMSwNCiAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICJldmFsdWF0aW9uRnJlcXVlbmN5IjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiRXZlbnQgfCB3aGVyZSAgRXZlbnRJRCBpbiAoMjI5NikgYW5kIEV2ZW50TG9nID09ICdBcHBsaWNhdGlvbicgYW5kIFNvdXJjZSA9PSAnTWljcm9zb2Z0LVdpbmRvd3MtSUlTLVczU1ZDLVdQJyINCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIk1vZHVsZSByZWdpc3RyYXRpb24gZXJyb3IgZGV0ZWN0ZWQgKGZhaWxlZCB0byBmaW5kIFJlZ2lzdGVyTW9kdWxlIGVudHJ5cG9pbnQpIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIk1vZHVsZSByZWdpc3RyYXRpb24gZXJyb3IgZGV0ZWN0ZWQgKGZhaWxlZCB0byBmaW5kIFJlZ2lzdGVyTW9kdWxlIGVudHJ5cG9pbnQpIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLUlJUy0yMDEyLTE1IiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMSwNCiAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICJldmFsdWF0aW9uRnJlcXVlbmN5IjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiRXZlbnQgfCB3aGVyZSAgRXZlbnRJRCBpbiAoMjI5NSkgYW5kIEV2ZW50TG9nID09ICdBcHBsaWNhdGlvbicgYW5kIFNvdXJjZSA9PSAnTWljcm9zb2Z0LVdpbmRvd3MtSUlTLVczU1ZDLVdQJyINCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIk1vZHVsZSByZWdpc3RyYXRpb24gZXJyb3IgZGV0ZWN0ZWQgKG1vZHVsZSByZXR1cm5lZCBhbiBlcnJvciBkdXJpbmcgcmVnaXN0cmF0aW9uKSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJNb2R1bGUgcmVnaXN0cmF0aW9uIGVycm9yIGRldGVjdGVkIChtb2R1bGUgcmV0dXJuZWQgYW4gZXJyb3IgZHVyaW5nIHJlZ2lzdHJhdGlvbikiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlTmFtZSI6ICJBbGVydFJ1bGUtSUlTLTIwMTItMTYiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAxLA0KICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFR5cGUiOiAicm93cyIsDQogICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICgyMjkzKSBhbmQgRXZlbnRMb2cgPT0gJ0FwcGxpY2F0aW9uJyBhbmQgU291cmNlID09ICdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1AnIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiT25seSBvbmUgdHlwZSBvZiBsb2dnaW5nIGNhbiBiZSBlbmFibGVkIGF0IGEgdGltZSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJPbmx5IG9uZSB0eXBlIG9mIGxvZ2dpbmcgY2FuIGJlIGVuYWJsZWQgYXQgYSB0aW1lIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLUlJUy0yMDEyLTE3IiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMSwNCiAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICJldmFsdWF0aW9uRnJlcXVlbmN5IjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiRXZlbnQgfCB3aGVyZSAgRXZlbnRJRCBpbiAoMTEzMykgYW5kIEV2ZW50TG9nID09ICdTeXN0ZW0nIGFuZCBTb3VyY2UgPT0gJ01pY3Jvc29mdC1XaW5kb3dzLUlJUy1XM1NWQyciDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJTRl9OT1RJRllfUkVBRF9SQVdfREFUQSBmaWx0ZXIgbm90aWZpY2F0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gSUlTIDgiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiU0ZfTk9USUZZX1JFQURfUkFXX0RBVEEgZmlsdGVyIG5vdGlmaWNhdGlvbiBpcyBub3Qgc3VwcG9ydGVkIGluIElJUyA4IiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLUlJUy0yMDEyLTE4IiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMSwNCiAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICJldmFsdWF0aW9uRnJlcXVlbmN5IjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiRXZlbnQgfCB3aGVyZSAgRXZlbnRJRCBpbiAoMjI2MSkgYW5kIEV2ZW50TG9nID09ICdBcHBsaWNhdGlvbicgYW5kIFNvdXJjZSA9PSAnTWljcm9zb2Z0LVdpbmRvd3MtSUlTLVczU1ZDLVdQJyINCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIlRoZSBjb25maWd1cmF0aW9uIG1hbmFnZXIgZm9yIFdBUyBkaWQgbm90IGluaXRpYWxpemUiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiVGhlIGNvbmZpZ3VyYXRpb24gbWFuYWdlciBmb3IgV0FTIGRpZCBub3QgaW5pdGlhbGl6ZSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIkFsZXJ0UnVsZS1JSVMtMjAxMi0xOSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVTZXZlcml0eSI6IDIsDQogICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDUwMzYpIGFuZCBFdmVudExvZyA9PSAnU3lzdGVtJyBhbmQgU291cmNlID09ICdNaWNyb3NvZnQtV2luZG93cy1XQVMnIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiVGhlIGRpcmVjdG9yeSBzcGVjaWZpZWQgZm9yIGNhY2hpbmcgY29tcHJlc3NlZCBjb250ZW50IGlzIGludmFsaWQiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiVGhlIGRpcmVjdG9yeSBzcGVjaWZpZWQgZm9yIGNhY2hpbmcgY29tcHJlc3NlZCBjb250ZW50IGlzIGludmFsaWQiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlTmFtZSI6ICJBbGVydFJ1bGUtSUlTLTIwMTItMjAiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAxLA0KICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFR5cGUiOiAicm93cyIsDQogICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICgyMjY0KSBhbmQgRXZlbnRMb2cgPT0gJ0FwcGxpY2F0aW9uJyBhbmQgU291cmNlID09ICdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1AnIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiVGhlIEdsb2JhbCBNb2R1bGVzIGxpc3QgaXMgZW1wdHkiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiVGhlIEdsb2JhbCBNb2R1bGVzIGxpc3QgaXMgZW1wdHkiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlTmFtZSI6ICJBbGVydFJ1bGUtSUlTLTIwMTItMjEiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAxLA0KICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFR5cGUiOiAicm93cyIsDQogICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICgyMjk4KSBhbmQgRXZlbnRMb2cgPT0gJ0FwcGxpY2F0aW9uJyBhbmQgU291cmNlID09ICdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1AnIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiVGhlIEhUVFAgc2VydmVyIGVuY291bnRlcmVkIGFuIGVycm9yIHByb2Nlc3NpbmcgdGhlIHNlcnZlciBzaWRlIGluY2x1ZGUgZmlsZSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJUaGUgSFRUUCBzZXJ2ZXIgZW5jb3VudGVyZWQgYW4gZXJyb3IgcHJvY2Vzc2luZyB0aGUgc2VydmVyIHNpZGUgaW5jbHVkZSBmaWxlIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLUlJUy0yMDEyLTIyIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMSwNCiAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICJldmFsdWF0aW9uRnJlcXVlbmN5IjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiRXZlbnQgfCB3aGVyZSAgRXZlbnRJRCBpbiAoMjIxOCkgYW5kIEV2ZW50TG9nID09ICdBcHBsaWNhdGlvbicgYW5kIFNvdXJjZSA9PSAnTWljcm9zb2Z0LVdpbmRvd3MtSUlTLVczU1ZDLVdQJyINCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIlRoZSBzZXJ2ZXIgZmFpbGVkIHRvIGNsb3NlIGNsaWVudCBjb25uZWN0aW9ucyB0byBVUkxzIGR1cmluZyBzaHV0ZG93biIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJUaGUgc2VydmVyIGZhaWxlZCB0byBjbG9zZSBjbGllbnQgY29ubmVjdGlvbnMgdG8gVVJMcyBkdXJpbmcgc2h1dGRvd24iLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlTmFtZSI6ICJBbGVydFJ1bGUtSUlTLTIwMTItMjMiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAxLA0KICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFR5cGUiOiAicm93cyIsDQogICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICgyMjU4KSBhbmQgRXZlbnRMb2cgPT0gJ0FwcGxpY2F0aW9uJyBhbmQgU291cmNlID09ICdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1AnIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiVGhlIHNlcnZlciB3YXMgdW5hYmxlIHRvIGFjcXVpcmUgYSBsaWNlbnNlIGZvciBhIFNTTCBjb25uZWN0aW9uIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIlRoZSBzZXJ2ZXIgd2FzIHVuYWJsZSB0byBhY3F1aXJlIGEgbGljZW5zZSBmb3IgYSBTU0wgY29ubmVjdGlvbiIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIkFsZXJ0UnVsZS1JSVMtMjAxMi0yNCIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVTZXZlcml0eSI6IDEsDQogICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDIyMjcpIGFuZCBFdmVudExvZyA9PSAnQXBwbGljYXRpb24nIGFuZCBTb3VyY2UgPT0gJ01pY3Jvc29mdC1XaW5kb3dzLUlJUy1XM1NWQy1XUCciDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJUaGUgc2VydmVyIHdhcyB1bmFibGUgdG8gYWxsb2NhdGUgYSBidWZmZXIgdG8gcmVhZCBhIGZpbGUiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiVGhlIHNlcnZlciB3YXMgdW5hYmxlIHRvIGFsbG9jYXRlIGEgYnVmZmVyIHRvIHJlYWQgYSBmaWxlIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLUlJUy0yMDEyLTI1IiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMSwNCiAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICJldmFsdWF0aW9uRnJlcXVlbmN5IjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiRXZlbnQgfCB3aGVyZSAgRXZlbnRJRCBpbiAoMjIzMykgYW5kIEV2ZW50TG9nID09ICdBcHBsaWNhdGlvbicgYW5kIFNvdXJjZSA9PSAnTWljcm9zb2Z0LVdpbmRvd3MtSUlTLVczU1ZDLVdQJyINCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIlRoZSBzZXJ2ZXIgd2FzIHVuYWJsZSB0byByZWFkIGEgZmlsZSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJUaGUgc2VydmVyIHdhcyB1bmFibGUgdG8gcmVhZCBhIGZpbGUiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlTmFtZSI6ICJBbGVydFJ1bGUtSUlTLTIwMTItMjYiLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAxLA0KICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFR5cGUiOiAicm93cyIsDQogICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICgyMjI2LDIyMzAsMjIzMSwyMjMyKSBhbmQgRXZlbnRMb2cgPT0gJ0FwcGxpY2F0aW9uJyBhbmQgU291cmNlID09ICdNaWNyb3NvZnQtV2luZG93cy1JSVMtVzNTVkMtV1AnIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiV0FTIGRldGVjdGVkIGludmFsaWQgY29uZmlndXJhdGlvbiBkYXRhIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIldBUyBkZXRlY3RlZCBpbnZhbGlkIGNvbmZpZ3VyYXRpb24gZGF0YSIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIkFsZXJ0UnVsZS1JSVMtMjAxMi0yNyIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVTZXZlcml0eSI6IDEsDQogICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDUxNzQsNTE3OSw1MTgwKSBhbmQgRXZlbnRMb2cgPT0gJ1N5c3RlbScgYW5kIFNvdXJjZSA9PSAnTWljcm9zb2Z0LVdpbmRvd3MtV0FTJyINCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQoNCiAgICAgICAgICAgIF0NCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgICAgIk5hbWUiOiAiUHJpbnQgU2VydmVyIDIwMTYiLA0KICAgICAgICAgICAgIlRhZyI6ICJQUzIwMTYiLA0KICAgICAgICAgICAgIkRlc2NyaXB0aW9uIjogIlByaW50IHNlcnZlciAyMDE2IG1vbml0b3JpbmcgcGFjay4iLA0KICAgICAgICAgICAgIk9TIjogIldpbmRvd3MiLA0KICAgICAgICAgICAgIlJ1bGVzIjogWw0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgIlJ1bGVuYW1lIjogIlBTMjAxNiIsDQogICAgICAgICAgICAgICAgICAgICJSdWxlVHlwZSI6ICJFdmVudFBlcmZvcm1hbmNlIiwNCiAgICAgICAgICAgICAgICAgICAgIlJ1bGVOYW1lUGF0aCI6ICJkY3ItYmFzaWNXaW5WTS5iaWNlcCIsDQogICAgICAgICAgICAgICAgICAgICJ4UGF0aFF1ZXJpZXMiOiBbDQogICAgICAgICAgICAgICAgICAgICAgICAiTWljcm9zb2Z0LVdpbmRvd3MtUHJpbnRTZXJ2aWNlL0FkbWluISpbU3lzdGVtWyhFdmVudElEPTgzKSBhbmQgKFByb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1QcmludEJSTScgb3IgQE5hbWU9J1ByaW50QnJtJ10pXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIk1pY3Jvc29mdC1XaW5kb3dzLVByaW50U2VydmljZS9BZG1pbiEqW1N5c3RlbVsoRXZlbnRJRD0zNjApIGFuZCAoUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLVByaW50U2VydmljZSddKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJNaWNyb3NvZnQtV2luZG93cy1QcmludFNlcnZpY2UvT3BlcmF0aW9uYWwhKltTeXN0ZW1bKEV2ZW50SUQ9NzAxIG9yIEV2ZW50SUQ9NzAyIG9yIEV2ZW50SUQ9NzAzIG9yIEV2ZW50SUQ9NzA0KSBhbmQgKFByb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1QcmludFNlcnZpY2UnXSldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiTWljcm9zb2Z0LVdpbmRvd3MtUHJpbnRTZXJ2aWNlL0FkbWluISpbU3lzdGVtWyhFdmVudElEPTM2NCBvciBFdmVudElEPTM2NSBvciBFdmVudElEPTM2NykgYW5kIChQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtUHJpbnRTZXJ2aWNlJ10pXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIk1pY3Jvc29mdC1XaW5kb3dzLVByaW50U2VydmljZS9BZG1pbiEqW1N5c3RlbVsoRXZlbnRJRD0zMTUpIGFuZCAoUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLVByaW50U2VydmljZSddKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJNaWNyb3NvZnQtV2luZG93cy1QcmludFNlcnZpY2UvQWRtaW4hKltTeXN0ZW1bKEV2ZW50SUQ9MzcxKSBhbmQgKFByb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1QcmludFNlcnZpY2UnXSldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiTWljcm9zb2Z0LVdpbmRvd3MtUHJpbnRTZXJ2aWNlL0FkbWluISpbU3lzdGVtWyhFdmVudElEPTM1NikgYW5kIChQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtUHJpbnRTZXJ2aWNlJ10pXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIk1pY3Jvc29mdC1XaW5kb3dzLVByaW50U2VydmljZS9BZG1pbiEqW1N5c3RlbVsoRXZlbnRJRD01MTMgb3IgRXZlbnRJRD01MTQpIGFuZCAoUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLVByaW50U2VydmljZSddKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJNaWNyb3NvZnQtV2luZG93cy1QcmludFNlcnZpY2UvQWRtaW4hKltTeXN0ZW1bKEV2ZW50SUQ9NjAwIG9yIEV2ZW50SUQ9NjAxKSBhbmQgKFByb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1QcmludFNlcnZpY2UnXSldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiTWljcm9zb2Z0LVdpbmRvd3MtUHJpbnRTZXJ2aWNlL0FkbWluISpbU3lzdGVtWyhFdmVudElEPTUxNSBvciBFdmVudElEPTUxNiBvciBFdmVudElEPTUxNyBvciBFdmVudElEPTUxOCBvciBFdmVudElEPTUxOSBvciBFdmVudElEPTUyMCkgYW5kIChQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtUHJpbnRTZXJ2aWNlJ10pXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIk1pY3Jvc29mdC1XaW5kb3dzLVByaW50U2VydmljZS9BZG1pbiEqW1N5c3RlbVsoRXZlbnRJRD01MDIgb3IgRXZlbnRJRD01MDMgb3IgRXZlbnRJRD01MDQgb3IgRXZlbnRJRD01MDUgb3IgRXZlbnRJRD01MDYgb3IgRXZlbnRJRD01MDcgb3IgRXZlbnRJRD01MDggb3IgRXZlbnRJRD01MDkgb3IgRXZlbnRJRD01MTAgb3IgRXZlbnRJRD01MTEgb3IgRXZlbnRJRD01MTIpIGFuZCAoUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLVByaW50U2VydmljZSddKV1dIg0KICAgICAgICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICAgICAgICAicGVyZm9ybWFuY2VDb3VudGVycyIgOlsNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXFByaW50IFF1ZXVlKF9Ub3RhbClcXEpvYnMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcUHJpbnQgUXVldWUoX1RvdGFsKVxcSm9icyBTcG9vbGluZyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxQcmludCBRdWV1ZShfVG90YWwpXFxUb3RhbCBKb2JzIFByaW50ZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcUHJpbnQgUXVldWUoX1RvdGFsKVxcVG90YWwgUGFnZXMgUHJpbnRlZCINCiAgICAgICAgICAgICAgICAgICAgXQ0KDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICJBbGVydHMiOiBbDQogICAgICAgICAgICAgICAgWw0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiRW5zdXJlIHRoZSBzZXJ2ZXIgaXMgYWNjZXNzaWJsZS4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIkVuc3VyZSB0aGUgc2VydmVyIGlzIGFjY2Vzc2libGUuIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIkFsZXJ0UnVsZS1QUy0yMDE2LTEiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICg4MykgYW5kIEV2ZW50TG9nID09ICdNaWNyb3NvZnQtV2luZG93cy1QcmludFNlcnZpY2UvQWRtaW4nIGFuZCAoU291cmNlID09ICdNaWNyb3NvZnQtV2luZG93cy1QcmludEJSTScgb3IgU291cmNlID09ICdQcmludEJybScpIg0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiTWFudWFsbHkgaW5zdGFsbCB0aGUgY29sb3IgcHJvZmlsZS4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIk1hbnVhbGx5IGluc3RhbGwgdGhlIGNvbG9yIHByb2ZpbGUuIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIkFsZXJ0UnVsZS1QUy0yMDE2LTIiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICgzNjApIGFuZCBFdmVudExvZyA9PSAnTWljcm9zb2Z0LVdpbmRvd3MtUHJpbnRTZXJ2aWNlL0FkbWluJyBhbmQgU291cmNlID09ICdNaWNyb3NvZnQtV2luZG93cy1QcmludFNlcnZpY2UnIg0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiUmV0cnkgcHJpbnRpbmcgb3IgcmVzdGFydCB0aGUgcHJpbnQgc2VydmVyLiIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiUmV0cnkgcHJpbnRpbmcgb3IgcmVzdGFydCB0aGUgcHJpbnQgc2VydmVyLiIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlTmFtZSI6ICJBbGVydFJ1bGUtUFMtMjAxNi0zIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVTZXZlcml0eSI6IDIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJldmFsdWF0aW9uRnJlcXVlbmN5IjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFR5cGUiOiAicm93cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiRXZlbnQgfCB3aGVyZSAgRXZlbnRJRCBpbiAoNzAxLDcwMiw3MDMsNzA0KSBhbmQgRXZlbnRMb2cgPT0gJ01pY3Jvc29mdC1XaW5kb3dzLVByaW50U2VydmljZS9PcGVyYXRpb25hbCEqJyBhbmQgU291cmNlID09ICdNaWNyb3NvZnQtV2luZG93cy1QcmludFNlcnZpY2UnIg0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiSW5zdGFsbCB0aGUgUHJpbnRlciBEcml2ZXIuIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJJbnN0YWxsIHRoZSBQcmludGVyIERyaXZlci4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLVBTLTIwMTYtNCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAyLA0KICAgICAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDM2NCwzNjUsMzY3KSBhbmQgRXZlbnRMb2cgPT0gJ01pY3Jvc29mdC1XaW5kb3dzLVByaW50U2VydmljZS9BZG1pbicgYW5kIFNvdXJjZSA9PSAnTWljcm9zb2Z0LVdpbmRvd3MtUHJpbnRTZXJ2aWNlJyINCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIlJlc3RhcnQgdGhlIHByaW50IHNwb29sZXIgZml4IHNoYXJpbmcgcHJvYmxlbXMgYW5kIGNoZWNrIEdyb3VwIFBvbGljeS4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIlJlc3RhcnQgdGhlIHByaW50IHNwb29sZXIgZml4IHNoYXJpbmcgcHJvYmxlbXMgYW5kIGNoZWNrIEdyb3VwIFBvbGljeS4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLVBTLTIwMTYtNSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAyLA0KICAgICAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDMxNSkgYW5kIEV2ZW50TG9nID09ICdNaWNyb3NvZnQtV2luZG93cy1QcmludFNlcnZpY2UvQWRtaW4nIGFuZCBTb3VyY2UgPT0gJ01pY3Jvc29mdC1XaW5kb3dzLVByaW50U2VydmljZSciDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJSZXN0YXJ0IHRoZSBwcmludCBzcG9vbGVyIGFuZCB1bnNoYXJlIHRoZSBwcmludGVyLiIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiUmVzdGFydCB0aGUgcHJpbnQgc3Bvb2xlciBhbmQgdW5zaGFyZSB0aGUgcHJpbnRlci4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLVBTLTIwMTYtNiIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAyLA0KICAgICAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDM3MSkgYW5kIEV2ZW50TG9nID09ICdNaWNyb3NvZnQtV2luZG93cy1QcmludFNlcnZpY2UvQWRtaW4nIGFuZCBTb3VyY2UgPT0gJ01pY3Jvc29mdC1XaW5kb3dzLVByaW50U2VydmljZSciDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJVcGRhdGUgdGhlIHByaW50ZXIgZHJpdmVyLiIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiVXBkYXRlIHRoZSBwcmludGVyIGRyaXZlci4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLVBTLTIwMTYtNyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAyLA0KICAgICAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDM1NikgYW5kIEV2ZW50TG9nID09ICdNaWNyb3NvZnQtV2luZG93cy1QcmludFNlcnZpY2UvQWRtaW4nIGFuZCBTb3VyY2UgPT0gJ01pY3Jvc29mdC1XaW5kb3dzLVByaW50U2VydmljZSciDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJDaGVjayBHcm91cCBQb2xpY3kgYW5kIG5ldHdvcmsgY29ubmVjdGl2aXR5LiIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiQ2hlY2sgR3JvdXAgUG9saWN5IGFuZCBuZXR3b3JrIGNvbm5lY3Rpdml0eS4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLVBTLTIwMTYtOCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAyLA0KICAgICAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDUxMyw1MTQpIGFuZCBFdmVudExvZyA9PSAnTWljcm9zb2Z0LVdpbmRvd3MtUHJpbnRTZXJ2aWNlL0FkbWluJyBhbmQgU291cmNlID09ICdNaWNyb3NvZnQtV2luZG93cy1QcmludFNlcnZpY2UnIg0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiVHJ5IGFnYWluIG9yIGluc3RhbGwgYW4gdXBkYXRlZCBwcmludGVyIGRyaXZlci4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIlRyeSBhZ2FpbiBvciBpbnN0YWxsIGFuIHVwZGF0ZWQgcHJpbnRlciBkcml2ZXIuIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIkFsZXJ0UnVsZS1QUy0yMDE2LTkiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICg2MDAsNjAxKSBhbmQgRXZlbnRMb2cgPT0gJ01pY3Jvc29mdC1XaW5kb3dzLVByaW50U2VydmljZS9BZG1pbicgYW5kIFNvdXJjZSA9PSAnTWljcm9zb2Z0LVdpbmRvd3MtUHJpbnRTZXJ2aWNlJyINCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIkNoZWNrIG5ldHdvcmsgY29ubmVjdGl2aXR5IGFuZCBHcm91cCBQb2xpY3kuIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJDaGVjayBuZXR3b3JrIGNvbm5lY3Rpdml0eSBhbmQgR3JvdXAgUG9saWN5LiIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlTmFtZSI6ICJBbGVydFJ1bGUtUFMtMjAxNi0xMCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAyLA0KICAgICAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDUxNSw1MTYsNTE3LDUxOCw1MTksNTIwKSBhbmQgRXZlbnRMb2cgPT0gJ01pY3Jvc29mdC1XaW5kb3dzLVByaW50U2VydmljZS9BZG1pbicgYW5kIFNvdXJjZSA9PSAnTWljcm9zb2Z0LVdpbmRvd3MtUHJpbnRTZXJ2aWNlJyINCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIkNoZWNrIHJlc291cmNlIGF2YWlsYWJpbGl0eS4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIkNoZWNrIHJlc291cmNlIGF2YWlsYWJpbGl0eS4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLVBTLTIwMTYtMTEiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICg1MDIsNTAzLDUwNCw1MDUsNTA2LDUwNyw1MDgsNTA5LDUxMCw1MTEsNTEyKSBhbmQgRXZlbnRMb2cgPT0gJ01pY3Jvc29mdC1XaW5kb3dzLVByaW50U2VydmljZS9BZG1pbicgYW5kIFNvdXJjZSA9PSAnTWljcm9zb2Z0LVdpbmRvd3MtUHJpbnRTZXJ2aWNlJyINCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIF0NCiAgICAgICAgICAgIF0NCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgICAgIk5hbWUiOiAiRE5TIFNlcnZlciAyMDE2IiwNCiAgICAgICAgICAgICJUYWciOiAiRE5TMjAxNiIsDQogICAgICAgICAgICAiRGVzY3JpcHRpb24iOiAiRE5TIFNlcnZlciAyMDE2IG1vbml0b3JpbmcgcGFjay4iLA0KICAgICAgICAgICAgIk9TIjogIldpbmRvd3MiLA0KICAgICAgICAgICAgIlJ1bGVzIjogWw0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgIlJ1bGVuYW1lIjogIkROUzIwMTYiLA0KICAgICAgICAgICAgICAgICAgICAiUnVsZVR5cGUiOiAiRXZlbnRQZXJmb3JtYW5jZSIsDQogICAgICAgICAgICAgICAgICAgICJSdWxlTmFtZVBhdGgiOiAiZGNyLWJhc2ljV2luVk0uYmljZXAiLA0KICAgICAgICAgICAgICAgICAgICAieFBhdGhRdWVyaWVzIjogWyAgDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTEwKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJETlMgU2VydmVyISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1ETlMtU2VydmVyLVNlcnZpY2UnXSBhbmQgKEV2ZW50SUQ9MTAwMCldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTEwMDQpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkROUyBTZXJ2ZXIhKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLUROUy1TZXJ2ZXItU2VydmljZSddIGFuZCAoRXZlbnRJRD0xMjAwKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJETlMgU2VydmVyISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1ETlMtU2VydmVyLVNlcnZpY2UnXSBhbmQgKEV2ZW50SUQ9MTIwMSldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTEyMDMpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkROUyBTZXJ2ZXIhKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLUROUy1TZXJ2ZXItU2VydmljZSddIGFuZCAoRXZlbnRJRD0xMzEpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkROUyBTZXJ2ZXIhKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLUROUy1TZXJ2ZXItU2VydmljZSddIGFuZCAoRXZlbnRJRD0xNDApXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkROUyBTZXJ2ZXIhKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLUROUy1TZXJ2ZXItU2VydmljZSddIGFuZCAoRXZlbnRJRD0xNTApXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkROUyBTZXJ2ZXIhKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLUROUy1TZXJ2ZXItU2VydmljZSddIGFuZCAoRXZlbnRJRD0xNTQwKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJETlMgU2VydmVyISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1ETlMtU2VydmVyLVNlcnZpY2UnXSBhbmQgKEV2ZW50SUQ9NDAwMCldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTQwMDYpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkROUyBTZXJ2ZXIhKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLUROUy1TZXJ2ZXItU2VydmljZSddIGFuZCAoRXZlbnRJRD00MDA3KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJETlMgU2VydmVyISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1ETlMtU2VydmVyLVNlcnZpY2UnXSBhbmQgKEV2ZW50SUQ9NDAxMCldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTQwMTEpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkROUyBTZXJ2ZXIhKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLUROUy1TZXJ2ZXItU2VydmljZSddIGFuZCAoRXZlbnRJRD00MDEyKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJETlMgU2VydmVyISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1ETlMtU2VydmVyLVNlcnZpY2UnXSBhbmQgKEV2ZW50SUQ9NDAxNCldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTQwMTUpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkROUyBTZXJ2ZXIhKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLUROUy1TZXJ2ZXItU2VydmljZSddIGFuZCAoRXZlbnRJRD00MDE2KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJETlMgU2VydmVyISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1ETlMtU2VydmVyLVNlcnZpY2UnXSBhbmQgKEV2ZW50SUQ9NDAxNyldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTQwOCldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTQwOSldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTQxMCldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTQxNCldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTQ1MTApXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkROUyBTZXJ2ZXIhKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLUROUy1TZXJ2ZXItU2VydmljZSddIGFuZCAoRXZlbnRJRD00NTExKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJETlMgU2VydmVyISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1ETlMtU2VydmVyLVNlcnZpY2UnXSBhbmQgKEV2ZW50SUQ9NDUxMildXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTUwMSldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTUwMildXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTUwMyldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTUwNCldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTUwNTEpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkROUyBTZXJ2ZXIhKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLUROUy1TZXJ2ZXItU2VydmljZSddIGFuZCAoRXZlbnRJRD02NTI3KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJETlMgU2VydmVyISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1ETlMtU2VydmVyLVNlcnZpY2UnXSBhbmQgKEV2ZW50SUQ9NjcwMildXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTcwNildXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTcwNjApXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkROUyBTZXJ2ZXIhKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLUROUy1TZXJ2ZXItU2VydmljZSddIGFuZCAoRXZlbnRJRD03NjE2KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJETlMgU2VydmVyISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1ETlMtU2VydmVyLVNlcnZpY2UnXSBhbmQgKEV2ZW50SUQ9NzYzNildXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTc2NDIpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkROUyBTZXJ2ZXIhKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLUROUy1TZXJ2ZXItU2VydmljZSddIGFuZCAoRXZlbnRJRD03NjQ0KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJETlMgU2VydmVyISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1ETlMtU2VydmVyLVNlcnZpY2UnXSBhbmQgKEV2ZW50SUQ9Nzc3KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJETlMgU2VydmVyISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1ETlMtU2VydmVyLVNlcnZpY2UnXSBhbmQgKEV2ZW50SUQ9MTExIG9yIEV2ZW50SUQ9NjUzMyldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTQwMTggb3IgRXZlbnRJRD00MDE5KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJETlMgU2VydmVyISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1ETlMtU2VydmVyLVNlcnZpY2UnXSBhbmQgKEV2ZW50SUQ9NDUxMyBvciBFdmVudElEPTQ1MTQpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkROUyBTZXJ2ZXIhKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLUROUy1TZXJ2ZXItU2VydmljZSddIGFuZCAoRXZlbnRJRD00NTIwIG9yIEV2ZW50SUQ9NDUyMSldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRE5TIFNlcnZlciEqW1N5c3RlbVtQcm92aWRlcltATmFtZT0nTWljcm9zb2Z0LVdpbmRvd3MtRE5TLVNlcnZlci1TZXJ2aWNlJ10gYW5kIChFdmVudElEPTcwNyBvciBFdmVudElEPTEwMDMpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkROUyBTZXJ2ZXIhKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLUROUy1TZXJ2ZXItU2VydmljZSddIGFuZCAoRXZlbnRJRD03NjkyIG9yIEV2ZW50SUQ9NzkwKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJETlMgU2VydmVyISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1ETlMtU2VydmVyLVNlcnZpY2UnXSBhbmQgKEV2ZW50SUQ9Nzk2IG9yIEV2ZW50SUQ9Nzk5KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJETlMgU2VydmVyISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1ETlMtU2VydmVyLVNlcnZpY2UnXSBhbmQgKEV2ZW50SUQ9MjIwMCBvciBFdmVudElEPTIyMDIgb3IgRXZlbnRJRD0yMjAzKV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJETlMgU2VydmVyISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1ETlMtU2VydmVyLVNlcnZpY2UnXSBhbmQgKEV2ZW50SUQ9NzUwMiBvciBFdmVudElEPTc1MDMgb3IgRXZlbnRJRD03NTA0KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJETlMgU2VydmVyISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1ETlMtU2VydmVyLVNlcnZpY2UnXSBhbmQgKEV2ZW50SUQ9NzkyIG9yIEV2ZW50SUQ9Nzk1IG9yIEV2ZW50SUQ9Nzk3KV1dIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJETlMgU2VydmVyISpbU3lzdGVtW1Byb3ZpZGVyW0BOYW1lPSdNaWNyb3NvZnQtV2luZG93cy1ETlMtU2VydmVyLVNlcnZpY2UnXSBhbmQgKEV2ZW50SUQ9MTAwMSBvciBFdmVudElEPTEwMDggb3IgRXZlbnRJRD0zMTUxIG9yIEV2ZW50SUQ9MzE1MiBvciBFdmVudElEPTMxNTMpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkROUyBTZXJ2ZXIhKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLUROUy1TZXJ2ZXItU2VydmljZSddIGFuZCAoRXZlbnRJRD00MDMgb3IgRXZlbnRJRD00MDQgb3IgRXZlbnRJRD00MDUgb3IgRXZlbnRJRD00MDYgb3IgRXZlbnRJRD00MDcpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkROUyBTZXJ2ZXIhKltTeXN0ZW1bUHJvdmlkZXJbQE5hbWU9J01pY3Jvc29mdC1XaW5kb3dzLUROUy1TZXJ2ZXItU2VydmljZSddIGFuZCAoRXZlbnRJRD01MDAgb3IgRXZlbnRJRD01MDUgb3IgRXZlbnRJRD01MDYgb3IgRXZlbnRJRD01MDcgb3IgRXZlbnRJRD0yMjA0KV1dIg0KICAgICAgICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICAgICAgICAicGVyZm9ybWFuY2VDb3VudGVycyIgOlsNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcQVhGUiBSZXF1ZXN0IFJlY2VpdmVkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcQVhGUiBSZXF1ZXN0IFNlbnQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxBWEZSIFJlc3BvbnNlIFJlY2VpdmVkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcQVhGUiBTdWNjZXNzIFJlY2VpdmVkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcQVhGUiBTdWNjZXNzIFNlbnQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxDYWNoaW5nIE1lbW9yeSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXERhdGEgRmx1c2ggUGFnZXMvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcRGF0YSBGbHVzaGVzL3NlYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXERhdGFiYXNlIE5vZGUgTWVtb3J5IiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcRHluYW1pYyBVcGRhdGUgTm9PcGVyYXRpb24iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxEeW5hbWljIFVwZGF0ZSBOb09wZXJhdGlvbi9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxEeW5hbWljIFVwZGF0ZSBRdWV1ZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxEeW5hbWljIFVwZGF0ZSBSZWNlaXZlZCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXER5bmFtaWMgVXBkYXRlIFJlY2VpdmVkL3NlYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXER5bmFtaWMgVXBkYXRlIFJlamVjdGVkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcRHluYW1pYyBVcGRhdGUgVGltZU91dHMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxEeW5hbWljIFVwZGF0ZSBXcml0dGVuIHRvIERhdGFiYXNlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcRHluYW1pYyBVcGRhdGUgV3JpdHRlbiB0byBEYXRhYmFzZS9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxJWEZSIFJlcXVlc3QgUmVjZWl2ZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxJWEZSIFJlcXVlc3QgU2VudCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXElYRlIgUmVzcG9uc2UgUmVjZWl2ZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxJWEZSIFN1Y2Nlc3MgUmVjZWl2ZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxJWEZSIFN1Y2Nlc3MgU2VudCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXElYRlIgVENQIFN1Y2Nlc3MgUmVjZWl2ZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxJWEZSIFVEUCBTdWNjZXNzIFJlY2VpdmVkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcTmJzdGF0IE1lbW9yeSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXE5vdGlmeSBSZWNlaXZlZCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXE5vdGlmeSBTZW50IiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcUXVlcnkgRHJvcHBlZCBCYWQgU29ja2V0IiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcUXVlcnkgRHJvcHBlZCBCYWQgU29ja2V0L3NlYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXFF1ZXJ5IERyb3BwZWQgQnkgUG9saWN5IiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcUXVlcnkgRHJvcHBlZCBCeSBQb2xpY3kvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcUXVlcnkgRHJvcHBlZCBCeSBSZXNwb25zZSBSYXRlIExpbWl0aW5nIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcUXVlcnkgRHJvcHBlZCBCeSBSZXNwb25zZSBSYXRlIExpbWl0aW5nL3NlYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXFF1ZXJ5IERyb3BwZWQgU2VuZCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXFF1ZXJ5IERyb3BwZWQgU2VuZC9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxRdWVyeSBEcm9wcGVkIFRvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcUXVlcnkgRHJvcHBlZCBUb3RhbC9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxSZWNvcmQgRmxvdyBNZW1vcnkiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxSZWN1cnNpdmUgUXVlcmllcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXFJlY3Vyc2l2ZSBRdWVyaWVzL3NlYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXFJlY3Vyc2l2ZSBRdWVyeSBGYWlsdXJlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcUmVjdXJzaXZlIFF1ZXJ5IEZhaWx1cmUvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcUmVjdXJzaXZlIFNlbmQgVGltZU91dHMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxSZWN1cnNpdmUgVGltZU91dC9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxSZXNwb25zZXMgU3VwcHJlc3NlZCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXFJlc3BvbnNlcyBTdXBwcmVzc2VkL3NlYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXFNlY3VyZSBVcGRhdGUgRmFpbHVyZSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXFNlY3VyZSBVcGRhdGUgUmVjZWl2ZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxTZWN1cmUgVXBkYXRlIFJlY2VpdmVkL3NlYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXFRDUCBNZXNzYWdlIE1lbW9yeSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXFRDUCBRdWVyeSBSZWNlaXZlZCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXFRDUCBRdWVyeSBSZWNlaXZlZC9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxUQ1AgUmVzcG9uc2UgU2VudCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXFRDUCBSZXNwb25zZSBTZW50L3NlYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXFRvdGFsIFF1ZXJ5IFJlY2VpdmVkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcVG90YWwgUXVlcnkgUmVjZWl2ZWQvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcVG90YWwgUmVtb3RlIEluZmxpZ2h0IFF1ZXJpZXMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxUb3RhbCBSZXNwb25zZSBTZW50IiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcVG90YWwgUmVzcG9uc2UgU2VudC9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxVRFAgTWVzc2FnZSBNZW1vcnkiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxVRFAgUXVlcnkgUmVjZWl2ZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxVRFAgUXVlcnkgUmVjZWl2ZWQvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcVURQIFJlc3BvbnNlIFNlbnQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxVRFAgUmVzcG9uc2UgU2VudC9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxVbm1hdGNoZWQgUmVzcG9uc2VzIFJlY2VpdmVkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcV0lOUyBMb29rdXAgUmVjZWl2ZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxXSU5TIExvb2t1cCBSZWNlaXZlZC9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxXSU5TIFJlc3BvbnNlIFNlbnQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxXSU5TIFJlc3BvbnNlIFNlbnQvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcV0lOUyBSZXZlcnNlIExvb2t1cCBSZWNlaXZlZCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxETlNcXFdJTlMgUmV2ZXJzZSBMb29rdXAgUmVjZWl2ZWQvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROU1xcV0lOUyBSZXZlcnNlIFJlc3BvbnNlIFNlbnQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxXSU5TIFJldmVyc2UgUmVzcG9uc2UgU2VudC9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxab25lIFRyYW5zZmVyIEZhaWx1cmUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxab25lIFRyYW5zZmVyIFJlcXVlc3QgUmVjZWl2ZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxab25lIFRyYW5zZmVyIFNPQSBSZXF1ZXN0IFNlbnQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRE5TXFxab25lIFRyYW5zZmVyIFN1Y2Nlc3MiDQogICAgICAgICAgICAgICAgICAgIF0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgIkFsZXJ0cyI6IFsNCiAgICAgICAgICAgICAgICBbDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJTZXJ2aWNlLkRlcGVuZGVuY3lGYWlsZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIk1pY3Jvc29mdC5XaW5kb3dzLkROU1NlcnZlci4yMDE2LlNlcnZpY2UuRGVwZW5kZW5jeUZhaWxlZCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlTmFtZSI6ICJBbGVydFJ1bGUtRG5zLTIwMTYtMTAiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICgxMCkgYW5kIEV2ZW50TG9nID09ICdETlMgU2VydmVyJyINCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIkNvbmZpZ3VyYXRpb24uRmlsZU9wZW5FcnJvciIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiTWljcm9zb2Z0LldpbmRvd3MuRE5TU2VydmVyLjIwMTYuQ29uZmlndXJhdGlvbi5GaWxlT3BlbkVycm9yIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIkFsZXJ0UnVsZS1EbnMtMjAxNi0xMDAwIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVTZXZlcml0eSI6IDIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJldmFsdWF0aW9uRnJlcXVlbmN5IjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFR5cGUiOiAicm93cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiRXZlbnQgfCB3aGVyZSAgRXZlbnRJRCBpbiAoMTAwMCkgYW5kIEV2ZW50TG9nID09ICdETlMgU2VydmVyJyINCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIkNvbmZpZ3VyYXRpb24uQ291bGROb3RPcGVuRGF0YWJhc2UiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIk1pY3Jvc29mdC5XaW5kb3dzLkROU1NlcnZlci4yMDE2LkNvbmZpZ3VyYXRpb24uQ291bGROb3RPcGVuRGF0YWJhc2UiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLURucy0yMDE2LTEwMDQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICgxMDA0KSBhbmQgRXZlbnRMb2cgPT0gJ0ROUyBTZXJ2ZXInIg0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiQ29uZmlndXJhdGlvbi5Cb290RmlsZU5vdEZvdW5kIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJNaWNyb3NvZnQuV2luZG93cy5ETlNTZXJ2ZXIuMjAxNi5Db25maWd1cmF0aW9uLkJvb3RGaWxlTm90Rm91bmQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLURucy0yMDE2LTEyMDAiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICgxMjAwKSBhbmQgRXZlbnRMb2cgPT0gJ0ROUyBTZXJ2ZXInIg0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiQ29uZmlndXJhdGlvbi5ab25lQ3JlYXRpb25GYWlsZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIk1pY3Jvc29mdC5XaW5kb3dzLkROU1NlcnZlci4yMDE2LkNvbmZpZ3VyYXRpb24uWm9uZUNyZWF0aW9uRmFpbGVkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIkFsZXJ0UnVsZS1EbnMtMjAxNi0xMjAxIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVTZXZlcml0eSI6IDIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJldmFsdWF0aW9uRnJlcXVlbmN5IjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFR5cGUiOiAicm93cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiRXZlbnQgfCB3aGVyZSAgRXZlbnRJRCBpbiAoMTIwMSkgYW5kIEV2ZW50TG9nID09ICdETlMgU2VydmVyJyINCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIkNvbmZpZ3VyYXRpb24uTm9Gb3J3YXJkaW5nQWRkcmVzc2VzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJNaWNyb3NvZnQuV2luZG93cy5ETlNTZXJ2ZXIuMjAxNi5Db25maWd1cmF0aW9uLk5vRm9yd2FyZGluZ0FkZHJlc3NlcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlTmFtZSI6ICJBbGVydFJ1bGUtRG5zLTIwMTYtMTIwMyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAyLA0KICAgICAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDEyMDMpIGFuZCBFdmVudExvZyA9PSAnRE5TIFNlcnZlciciDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJXSU5TQ29ubmVjdG9yLkluaXRpYWxpemUuRmFpbGVkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJNaWNyb3NvZnQuV2luZG93cy5ETlNTZXJ2ZXIuMjAxNi5XSU5TQ29ubmVjdG9yLkluaXRpYWxpemUuRmFpbGVkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIkFsZXJ0UnVsZS1EbnMtMjAxNi0xMzEiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICgxMzEpIGFuZCBFdmVudExvZyA9PSAnRE5TIFNlcnZlciciDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEZXNjcmlwdGlvbiI6ICJSUEMuSW5pdGlhbGl6ZS5GYWlsZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIk1pY3Jvc29mdC5XaW5kb3dzLkROU1NlcnZlci4yMDE2LlJQQy5Jbml0aWFsaXplLkZhaWxlZCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlTmFtZSI6ICJBbGVydFJ1bGUtRG5zLTIwMTYtMTQwIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVTZXZlcml0eSI6IDIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYXV0b01pdGlnYXRlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJldmFsdWF0aW9uRnJlcXVlbmN5IjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFR5cGUiOiAicm93cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAicXVlcnkiOiAiRXZlbnQgfCB3aGVyZSAgRXZlbnRJRCBpbiAoMTQwKSBhbmQgRXZlbnRMb2cgPT0gJ0ROUyBTZXJ2ZXInIg0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiQ29uZmlndXJhdGlvbi5QbHVnaW5Jbml0RmFpbGVkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVEaXNwbGF5TmFtZSI6ICJNaWNyb3NvZnQuV2luZG93cy5ETlNTZXJ2ZXIuMjAxNi5Db25maWd1cmF0aW9uLlBsdWdpbkluaXRGYWlsZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLURucy0yMDE2LTE1MCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlU2V2ZXJpdHkiOiAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgImF1dG9NaXRpZ2F0ZSI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICAgICAid2luZG93U2l6ZSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRUeXBlIjogInJvd3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDE1MCkgYW5kIEV2ZW50TG9nID09ICdETlMgU2VydmVyJyINCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIkNvbmZpZ3VyYXRpb24uRG9tYWluTm9kZUNyZWF0aW9uRXJyb3IiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIk1pY3Jvc29mdC5XaW5kb3dzLkROU1NlcnZlci4yMDE2LkNvbmZpZ3VyYXRpb24uRG9tYWluTm9kZUNyZWF0aW9uRXJyb3IiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLURucy0yMDE2LTE1NDAiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJFdmVudCB8IHdoZXJlICBFdmVudElEIGluICgxNTQwKSBhbmQgRXZlbnRMb2cgPT0gJ0ROUyBTZXJ2ZXInIg0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgXQ0KICAgICAgICAgICAgXQ0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgICAiTmFtZSI6ICJOZ2lueCIsDQogICAgICAgICAgICAiVGFnIjogIm5naW54IiwNCiAgICAgICAgICAgICJEZXNjcmlwdGlvbiI6ICJOZ2lueCBtb25pdG9yaW5nIHBhY2suIiwNCiAgICAgICAgICAgICJPUyI6ICJMaW51eCIsDQogICAgICAgICAgICAiUnVsZXMiOiBbDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiUnVsZW5hbWUiOiAibmdpbngiLA0KICAgICAgICAgICAgICAgICAgICAiUnVsZVR5cGUiOiAic3lzbG9nIiwNCiAgICAgICAgICAgICAgICAgICAgIlJ1bGVOYW1lUGF0aCI6ICJmaWxlY29sbGVjdGlvblN5c2xvZ0xpbnV4LmJpY2VwIiwNCiAgICAgICAgICAgICAgICAgICAgInN5c2xvZ0RhdGFTb3VyY2VOYW1lIjogInN5c0xvZ3NEYXRhU291cmNlLTE2ODg0MTk2NzIiLA0KICAgICAgICAgICAgICAgICAgICAiZmlsZXBhdHRlcm5zIjogWw0KICAgICAgICAgICAgICAgICAgICAgICAgIi92YXIvbG9nL25naW54L2FjY2Vzcy5sb2ciLA0KICAgICAgICAgICAgICAgICAgICAgICAgIi92YXIvbG9nL25naW54L2Vycm9yLmxvZyINCiAgICAgICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICAgICAgImZhY2lsaXR5bmFtZXMiOiBbDQogICAgICAgICAgICAgICAgICAgICAgICAiZGFlbW9uIg0KICAgICAgICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICAgICAgICAibG9nTGV2ZWxzIjogWw0KICAgICAgICAgICAgICAgICAgICAgICAgIkRlYnVnIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJJbmZvIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJOb3RpY2UiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIldhcm5pbmciLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkVycm9yIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJDcml0aWNhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiQWxlcnQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkVtZXJnZW5jeSINCiAgICAgICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICAgICAgImtxbFRyYW5zZm9ybWF0aW9uIjogInNvdXJjZSB8IHdoZXJlIFN5c2xvZ01lc3NhZ2UgPT0gXCJTdG9wcGVkIEEgaGlnaCBwZXJmb3JtYW5jZSB3ZWIgc2VydmVyIGFuZCBhIHJldmVyc2UgcHJveHkgc2VydmVyLlwiIG9yIFN5c2xvZ01lc3NhZ2UgPT0gXCJTdGFydGVkIEEgaGlnaCBwZXJmb3JtYW5jZSB3ZWIgc2VydmVyIGFuZCBhIHJldmVyc2UgcHJveHkgc2VydmVyLlwiIiwNCiAgICAgICAgICAgICAgICAgICAgImNyZWF0ZVRhYmxlIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgInRhYmxlTmFtZSI6ICJOZ2lueExvZ3MiDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICJBbGVydHMiOiBbDQogICAgICAgICAgICAgICAgWw0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGVzY3JpcHRpb24iOiAiTmdpbnggc3RvcHBlZC4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURpc3BsYXlOYW1lIjogIk5naW54IHNlcnZpY2Ugc3RvcHBlZC4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZU5hbWUiOiAiQWxlcnRSdWxlLU5naW54LTEiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZVNldmVyaXR5IjogMSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgImV2YWx1YXRpb25GcmVxdWVuY3kiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIndpbmRvd1NpemUiOiAiUFQxNU0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJxdWVyeSI6ICJTeXNsb2cgfCB3aGVyZSBTeXNsb2dNZXNzYWdlID09IFwiU3RvcHBlZCBBIGhpZ2ggcGVyZm9ybWFuY2Ugd2ViIHNlcnZlciBhbmQgYSByZXZlcnNlIHByb3h5IHNlcnZlci5cIiINCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIF0NCiAgICAgICAgICAgIF0NCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgICAgIk5hbWUiOiAiQUREUyIsDQogICAgICAgICAgICAiVGFnIjogIkFERFMiLA0KICAgICAgICAgICAgIkRlc2NyaXB0aW9uIjogIkFjdGl2ZSBEaXJlY3RvcnkgbW9uaXRvcmluZyBwYWNrLiIsDQogICAgICAgICAgICAiT1MiOiAiV2luZG93cyIsDQogICAgICAgICAgICAiUnVsZXMiOiBbDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiUnVsZW5hbWUiOiAiQUREUzEiLA0KICAgICAgICAgICAgICAgICAgICAiUnVsZVR5cGUiOiAiRXZlbnRQZXJmb3JtYW5jZSIsDQogICAgICAgICAgICAgICAgICAgICJSdWxlTmFtZVBhdGgiOiAiZGNyLWJhc2ljV2luVk0uYmljZXAiLA0KICAgICAgICAgICAgICAgICAgICAieFBhdGhRdWVyaWVzIjogWw0KICAgICAgICAgICAgICAgICAgICAgICAgIkRpcmVjdG9yeSBTZXJ2aWNlISpbU3lzdGVtWyhFdmVudGxldmVsPTEpXV0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkROUyBTZXJ2ZXIhKltTeXN0ZW1bKEV2ZW50bGV2ZWw9MSldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiQWN0aXZlIERpcmVjdG9yeSBXZWIgU2VydmljZXMhKltTeXN0ZW1bKEV2ZW50bGV2ZWw9MSldXSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiREZTIFJlcGxpY2F0aW9uISpbU3lzdGVtWyhFdmVudGxldmVsPTEpXV0iDQogICAgICAgICAgICAgICAgICAgIF0sICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgInBlcmZvcm1hbmNlQ291bnRlcnMiIDpbDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxNZW1vcnkoKVxcQXZhaWxhYmxlIEJ5dGVzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXE1lbW9yeSgpXFxDb21taXR0ZWQgQnl0ZXMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRGlyZWN0b3J5U2VydmljZXMoTlREUylcXERTIFNlYXJjaCBzdWItb3BlcmF0aW9ucy9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcU2VjdXJpdHkgU3lzdGVtLVdpZGUgU3RhdGlzdGljcygpXFxLREMgQVMgUmVxdWVzdHMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcU2VjdXJpdHkgU3lzdGVtLVdpZGUgU3RhdGlzdGljcygpXFxLREMgVEdTIFJlcXVlc3RzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXFNlY3VyaXR5IFN5c3RlbS1XaWRlIFN0YXRpc3RpY3MoKVxcS2VyYmVyb3MgQXV0aGVudGljYXRpb25zIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXERpcmVjdG9yeVNlcnZpY2VzKE5URFMpXFxMREFQIENsaWVudCBTZXNzaW9ucyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxEaXJlY3RvcnlTZXJ2aWNlcyhOVERTKVxcTERBUCBTZWFyY2hlcy9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRGlyZWN0b3J5U2VydmljZXMoTlREUylcXExEQVAgVURQIG9wZXJhdGlvbnMvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXERpcmVjdG9yeVNlcnZpY2VzKE5URFMpXFxMREFQIFdyaXRlcy9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcUHJvY2VzcyhMU0FTUylcXEhhbmRsZSBDb3VudCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxQcm9jZXNzKExTQVNTKVxcUHJpdmF0ZSBCeXRlcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxQcm9jZXNzKExTQVNTKVxcJSBQcm9jZXNzb3IgVGltZSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxTZWN1cml0eSBTeXN0ZW0tV2lkZSBTdGF0aXN0aWNzKClcXE5UTE0gQXV0aGVudGljYXRpb25zIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXE1lbW9yeSgpXFxQYWdlcy9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcUHJvY2Vzc29yKF9Ub3RhbClcXCUgUHJvY2Vzc29yIFRpbWUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcU2VydmVyKClcXFNlcnZlciBTZXNzaW9ucyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxTeXN0ZW0oKVxcU3lzdGVtIFVwIFRpbWUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcVENQdjQoKVxcQ29ubmVjdGlvbnMgRXN0YWJsaXNoZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcVENQdjYoKVxcQ29ubmVjdGlvbnMgRXN0YWJsaXNoZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRGlyZWN0b3J5U2VydmljZXMoTlREUylcXERSQSBJbmJvdW5kIEJ5dGVzIENvbXByZXNzZWQgKEJldHdlZW4gU2l0ZXMsIEJlZm9yZSBDb21wcmVzc2lvbikvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXERpcmVjdG9yeVNlcnZpY2VzKE5URFMpXFxEUkEgSW5ib3VuZCBCeXRlcyBDb21wcmVzc2VkIChCZXR3ZWVuIFNpdGVzLCBBZnRlciBDb21wcmVzc2lvbikvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXERpcmVjdG9yeVNlcnZpY2VzKE5URFMpXFxEUkEgSW5ib3VuZCBCeXRlcyBOb3QgQ29tcHJlc3NlZCAoV2l0aGluIFNpdGUpL3NlYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxEaXJlY3RvcnlTZXJ2aWNlcyhOVERTKVxcRFJBIEluYm91bmQgQnl0ZXMgVG90YWwvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXERpcmVjdG9yeVNlcnZpY2VzKE5URFMpXFxEUkEgT3V0Ym91bmQgQnl0ZXMgQ29tcHJlc3NlZCAoQmV0d2VlbiBTaXRlcywgQWZ0ZXIgQ29tcHJlc3Npb24pL3NlYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxEaXJlY3RvcnlTZXJ2aWNlcyhOVERTKVxcRFJBIE91dGJvdW5kIEJ5dGVzIENvbXByZXNzZWQgKEJldHdlZW4gU2l0ZXMsIEJlZm9yZSBDb21wcmVzc2lvbikvc2VjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXERpcmVjdG9yeVNlcnZpY2VzKE5URFMpXFxEUkEgT3V0Ym91bmQgQnl0ZXMgTm90IENvbXByZXNzZWQgKFdpdGhpbiBTaXRlKS9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcRGlyZWN0b3J5U2VydmljZXMoTlREUylcXERSQSBPdXRib3VuZCBCeXRlcyBUb3RhbC9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcUHJvY2VzcyhkbnMpXFwlIFByb2Nlc3NvciBUaW1lIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXEROUygpXFxUb3RhbCBRdWVyeSBSZWNlaXZlZC9zZWMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlxcUHJvY2VzcyhkbnMpXFxQcml2YXRlIEJ5dGVzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXERpcmVjdG9yeVNlcnZpY2VzKE5URFMpXFxBVFEgT3V0c3RhbmRpbmcgUXVldWVkIFJlcXVlc3RzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXERpcmVjdG9yeVNlcnZpY2VzKE5URFMpXFxBVFEgUmVxdWVzdCBMYXRlbmN5IiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJcXERpcmVjdG9yeVNlcnZpY2VzKE5URFMpXFxBVFEgVGhyZWFkcyBPdGhlciIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxEaXJlY3RvcnlTZXJ2aWNlcyhOVERTKVxcQVRRIFRocmVhZHMgTERBUCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiXFxEaXJlY3RvcnlTZXJ2aWNlcyhOVERTKVxcQVRRIFRocmVhZHMgVG90YWwiDQogICAgICAgICAgICAgICAgICAgIF0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgIlJ1bGVuYW1lIjogIkFERFMyIiwNCiAgICAgICAgICAgICAgICAgICAgIlJ1bGVUeXBlIjogIkN1c3RvbURhdGEiLA0KICAgICAgICAgICAgICAgICAgICAiUnVsZU5hbWVQYXRoIjogImN1c3RvbURhdGFEQ1IuYmljZXAiLA0KICAgICAgICAgICAgICAgICAgICAiZmlsZXBhdHRlcm5zIjogWw0KICAgICAgICAgICAgICAgICAgICAgICAgIkM6XFxXaW5kb3dzQXp1cmVcXEFERFNcXCouY3N2Ig0KICAgICAgICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICAgICAgICAidGFibGVOYW1lIjogImFkZHNtb25pdG9yaW5nIiwNCiAgICAgICAgICAgICAgICAgICAgImNsaWVudEFwcE5hbWUiIDogIkFERFNDb2xsZWN0aW9uIiwNCiAgICAgICAgICAgICAgICAgICAgImNsaWVudEFwcERlc2NyaXB0aW9uIjogIkN1c3RvbSBWTSBhcHBsaWNhdGlvbiB0byBjb2xsZWN0IEFEIERTIHJlbGF0ZWQgZGF0YS4iLA0KICAgICAgICAgICAgICAgICAgICAiY2xpZW50QXBwVmVyc2lvbiI6ICIxLjAuMCIsDQogICAgICAgICAgICAgICAgICAgICJjbGllbnRBcHBJbnN0YWxsQ29tbWFuZCIgOiAicG93ZXJzaGVsbCAtY29tbWFuZCBcInJlbiBhZGRzY29sbGVjdGlvbiBhZGRzY29sbGVjdGlvbi56aXA7IGV4cGFuZC1hcmNoaXZlIC4vYWRkc2NvbGxlY3Rpb24uemlwIC4gOyAuL2luc3RhbGwucHMxXCIiLA0KICAgICAgICAgICAgICAgICAgICAiY2xpZW50QXBwVW5pbnN0YWxsQ29tbWFuZCIgOiAicG93ZXJzaGVsbCAtY29tbWFuZCBcIlVucmVnaXN0ZXItU2NoZWR1bGVkVGFzayAtVGFza05hbWUgJ0FEIERTIENvbGxlY3Rpb24gVGFzaydcIiIsDQogICAgICAgICAgICAgICAgICAgICJjbGllbnRBcHBaSVBVUkwiIDogImh0dHBzOi8vZ2l0aHViLmNvbS9GZWhzZUNvcnAvQXp1cmVNb25pdG9yU3RhcnRlclBhY2tzL3Jhdy9yZWZzL2hlYWRzL1YzLVN1YkRlcC9QYWNrcy9JYWFTL0FERFMvYWRkc2NvbGxlY3Rpb24uemlwIg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICAiQWxlcnRzIjogWw0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0UnVsZURlc2NyaXB0aW9uIjogIldBUyBkZXRlY3RlZCBpbnZhbGlkIGNvbmZpZ3VyYXRpb24gZGF0YS4iLA0KICAgICAgICAgICAgICAgICAgICAiYWxlcnRSdWxlRGlzcGxheU5hbWUiOiAiV0FTIGRldGVjdGVkIGludmFsaWQgY29uZmlndXJhdGlvbiBkYXRhLiIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVOYW1lIjogIkFsZXJ0UnVsZS1JSVMtMjAxMi0yNyIsDQogICAgICAgICAgICAgICAgICAgICJhbGVydFJ1bGVTZXZlcml0eSI6IDEsDQogICAgICAgICAgICAgICAgICAgICJhdXRvTWl0aWdhdGUiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAiZXZhbHVhdGlvbkZyZXF1ZW5jeSI6ICJQVDE1TSIsDQogICAgICAgICAgICAgICAgICAgICJ3aW5kb3dTaXplIjogIlBUMTVNIiwNCiAgICAgICAgICAgICAgICAgICAgImFsZXJ0VHlwZSI6ICJyb3dzIiwNCiAgICAgICAgICAgICAgICAgICAgInF1ZXJ5IjogIkV2ZW50IHwgd2hlcmUgIEV2ZW50SUQgaW4gKDUxNzQsNTE3OSw1MTgwKSBhbmQgRXZlbnRMb2cgPT0gJ1N5c3RlbScgYW5kIFNvdXJjZSA9PSAnTWljcm9zb2Z0LVdpbmRvd3MtV0FTJyINCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICBdDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICAgICJOYW1lIjogIlN2Y01hcCIsDQogICAgICAgICAgICAiVGFnIjogIlN2Y01hcCIsDQogICAgICAgICAgICAiRGVzY3JpcHRpb24iOiAiU2VydmljZSBNYXAgbW9uaXRvcmluZyBwYWNrLiBEQ1Igb25seSIsDQogICAgICAgICAgICAiT1MiOiAiV2luZG93cyIsDQogICAgICAgICAgICAiUnVsZXMiOiBbDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiUnVsZW5hbWUiOiAiU3ZjTWFwIiwNCiAgICAgICAgICAgICAgICAgICAgIlJ1bGVUeXBlIjogIlNlcnZpY2VNYXAiLA0KICAgICAgICAgICAgICAgICAgICAiUnVsZU5hbWVQYXRoIjogIlNlcnZpY2VNYXAuYmljZXAiLA0KICAgICAgICAgICAgICAgICAgICAieFBhdGhRdWVyaWVzIjogW10sDQogICAgICAgICAgICAgICAgICAgICJwZXJmb3JtYW5jZUNvdW50ZXJzIiA6W10NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgIkFsZXJ0cyI6IFtdDQogICAgICAgIH0NCiAgICBdDQp9",
                    "tempfilename": "download.tmp"
                  },
                  "resources": [
                    {
                      "type": "Microsoft.Resources/deploymentScripts",
                      "apiVersion": "2023-08-01",
                      "name": "[format('deployscript-PacksDef-{0}', parameters('filename'))]",
                      "tags": "[parameters('tags')]",
                      "location": "[parameters('location')]",
                      "kind": "AzureCLI",
                      "properties": {
                        "azCliVersion": "2.42.0",
                        "timeout": "PT5M",
                        "retentionInterval": "PT1H",
                        "environmentVariables": [
                          {
                            "name": "AZURE_STORAGE_ACCOUNT",
                            "value": "[parameters('storageAccountName')]"
                          },
                          {
                            "name": "AZURE_STORAGE_KEY",
                            "secureValue": "[listKeys(resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccountName')), '2023-01-01').keys[0].value]"
                          },
                          {
                            "name": "CONTENT",
                            "value": "[variables('$fxv#0')]"
                          }
                        ],
                        "scriptContent": "[format('echo \"$CONTENT\" > {0} && cat {1} | base64 -d > {2} && az storage blob upload -f {3} -c {4} -n {5} --overwrite true', variables('tempfilename'), variables('tempfilename'), parameters('filename'), parameters('filename'), parameters('containerName'), parameters('filename'))]"
                      }
                    }
                  ],
                  "outputs": {
                    "fileURL": {
                      "type": "string",
                      "value": "[format('{0}{1}/{2}', reference(resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccountName')), '2023-01-01').primaryEndpoints.blob, parameters('containerName'), parameters('filename'))]"
                    }
                  }
                }
              }
            }
          ],
          "outputs": {
            "packsDefStorageURL": {
              "type": "string",
              "value": "[reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', 'PacksDefStorage'), '2022-09-01').outputs.fileURL.value]"
            },
            "packsUserManagedIdentityId": {
              "type": "string",
              "value": "[reference(subscriptionResourceId('Microsoft.Resources/deployments', format('AMP-{0}-UMI-Packs-{1}', parameters('instanceName'), parameters('location'))), '2022-09-01').outputs.userManagedIdentityPrincipalId.value]"
            },
            "packsUserManagedResourceId": {
              "type": "string",
              "value": "[reference(subscriptionResourceId('Microsoft.Resources/deployments', format('AMP-{0}-UMI-Packs-{1}', parameters('instanceName'), parameters('location'))), '2022-09-01').outputs.userManagedIdentityResourceId.value]"
            },
            "dceId": {
              "type": "string",
              "value": "[reference(extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('AMP-{0}-DCE-{1}', parameters('instanceName'), parameters('location'))), '2022-09-01').outputs.dceId.value]"
            }
          }
        }
      },
      "dependsOn": [
        "[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('logAnalytics-Deployment-{0}-{1}', parameters('location'), parameters('instanceName')))]",
        "[subscriptionResourceId(parameters('subscriptionId'), 'Microsoft.Resources/deployments', format('RGMonitoringPacks-{0}-{1}', parameters('location'), parameters('instanceName')))]",
        "[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}', parameters('subscriptionId'), parameters('resourceGroupName')), 'Microsoft.Resources/deployments', format('STOmonitoringPacks-{0}-{1}', parameters('location'), parameters('instanceName')))]"
      ]
    }
  ]
}