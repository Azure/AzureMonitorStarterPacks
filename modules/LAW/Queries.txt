// #Monstar Alerts - alerts generated by the MonStar Rules:
alertsmanagementresources
|project ruleId=tolower(tostring(properties.context.context.id)),description=properties.essentials.description, Server=properties.essentials.targetResourceName, ResourceGroup=properties.essentials.targetResourceGroup
| join (resources
        | where type == "microsoft.insights/scheduledqueryrules"
        | extend MP=tostring(['tags'].MonitorStarterPack)
        | extend Solution=tostring(['tags'].MonitoredBy)
        | where Solution=='Azure Monitor Starter Packs'
        | project ruleId=tolower(['id']),MP)
        on ruleId | project description, MP, Server,ResourceGroup,Rule=split(ruleId,"/")[8]

// Monstar packs, finds by tag
resources
| where type == "microsoft.insights/scheduledqueryrules"
| extend MP=tostring(['tags'].MonitorStarterPack)
| extend Solution=tostring(['tags'].MonitoredBy)
| where Solution=='Azure Monitor Starter Packs'
| summarize count() by MP
// Perf rule for Web Service
Perf
| where ObjectName == "Web Service"
| where $__timeFilter(TimeGenerated)
//| where CounterName == "Current Connections"
| summarize avg(CounterValue) by bin(TimeGenerated, 5m), Computer, CounterName
| order by TimeGenerated asc
