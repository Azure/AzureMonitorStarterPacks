{
  "CognitiveServices": {
    "accounts": [
      {
        "name": "TotalCalls",
        "description": "Total number of calls.",
        "type": "Metric",
        "verified": false,
        "visible": true,
        "kind": "OpenAI",
        "tags": [
          "auto-generated",
          "agc-1205"
        ],
        "properties": {
          "metricName": "TotalCalls",
          "metricNamespace": "Microsoft.CognitiveServices/accounts",
          "severity": 3,
          "windowSize": "PT5M",
          "evaluationFrequency": "PT1M",
          "timeAggregation": "Total",
          "operator": "GreaterThan",
          "criterionType": "StaticThresholdCriterion",
          "threshold": 5000.0
        }
      },
      {
        "name": "TotalErrors",
        "description": "Total number of calls with error response (HTTP response code 4xx or 5xx).",
        "type": "Metric",
        "verified": false,
        "visible": true,
        "tags": [
          "auto-generated",
          "agc-1052"
        ],
        "properties": {
          "metricName": "TotalErrors",
          "metricNamespace": "Microsoft.CognitiveServices/accounts",
          "severity": 2,
          "windowSize": "PT5M",
          "evaluationFrequency": "PT1M",
          "timeAggregation": "Total",
          "operator": "GreaterThan",
          "criterionType": "StaticThresholdCriterion",
          "threshold": 5.0
        }
      },
      {
        "name": "Latency",
        "description": "Latency in milliseconds.",
        "type": "Metric",
        "verified": false,
        "visible": true,
        "tags": [
          "auto-generated",
          "agc-882"
        ],
        "properties": {
          "metricName": "Latency",
          "metricNamespace": "Microsoft.CognitiveServices/accounts",
          "severity": 2,
          "windowSize": "PT5M",
          "evaluationFrequency": "PT1M",
          "timeAggregation": "Average",
          "operator": "GreaterThan",
          "criterionType": "StaticThresholdCriterion",
          "threshold": 90.0
        }
      },
      {
        "name": "SuccessRate",
        "description": "Availability percentage with the following calculation: (Total Calls - Server Errors)/Total Calls. Server Errors include any HTTP responses >=500.",
        "type": "Metric",
        "verified": false,
        "visible": true,
        "tags": [
          "auto-generated",
          "agc-852"
        ],
        "properties": {
          "metricName": "SuccessRate",
          "metricNamespace": "Microsoft.CognitiveServices/accounts",
          "severity": 3,
          "windowSize": "PT5M",
          "evaluationFrequency": "PT1M",
          "timeAggregation": "Average",
          "operator": "LessThan",
          "criterionType": "StaticThresholdCriterion",
          "threshold": 99.9
        }
      },
      {
        "name": "ServerErrors",
        "description": "Number of calls with service internal error (HTTP response code 5xx).",
        "type": "Metric",
        "verified": false,
        "visible": true,
        "tags": [
          "auto-generated",
          "agc-606"
        ],
        "properties": {
          "metricName": "ServerErrors",
          "metricNamespace": "Microsoft.CognitiveServices/accounts",
          "severity": 3,
          "windowSize": "PT5M",
          "evaluationFrequency": "PT1M",
          "timeAggregation": "Total",
          "operator": "GreaterThan",
          "criterionType": "StaticThresholdCriterion",
          "threshold": 0.0
        }
      },
      {
        "name": "TokenTransaction",
        "description": "Number of Inference Tokens Processed on an OpenAI Model",
        "type": "Metric",
        "verified": false,
        "visible": true,
        "tags": [
          "auto-generated",
          "agc-530"
        ],
        "properties": {
          "metricName": "TokenTransaction",
          "metricNamespace": "Microsoft.CognitiveServices/accounts",
          "severity": 2,
          "windowSize": "PT5M",
          "evaluationFrequency": "PT1M",
          "timeAggregation": "Total",
          "operator": "GreaterThan",
          "criterionType": "StaticThresholdCriterion",
          "threshold": 180000.0
        }
      },
      {
        "name": "BlockedCalls",
        "description": "Number of calls that exceeded rate or quota limit.",
        "type": "Metric",
        "verified": false,
        "visible": true,
        "tags": [
          "auto-generated",
          "agc-468"
        ],
        "properties": {
          "metricName": "BlockedCalls",
          "metricNamespace": "Microsoft.CognitiveServices/accounts",
          "severity": 2,
          "windowSize": "PT5M",
          "evaluationFrequency": "PT1M",
          "timeAggregation": "Total",
          "operator": "GreaterThan",
          "criterionType": "StaticThresholdCriterion",
          "threshold": 0.0
        }
      },
      {
        "name": "ClientErrors",
        "description": "Number of calls with client side error (HTTP response code 4xx).",
        "type": "Metric",
        "verified": false,
        "visible": true,
        "tags": [
          "auto-generated",
          "agc-420"
        ],
        "properties": {
          "metricName": "ClientErrors",
          "metricNamespace": "Microsoft.CognitiveServices/accounts",
          "severity": 1,
          "windowSize": "PT5M",
          "evaluationFrequency": "PT1M",
          "timeAggregation": "Total",
          "operator": "GreaterThan",
          "criterionType": "StaticThresholdCriterion",
          "threshold": 0.0
        }
      }
    ]
  },
  "Network": {
    "loadBalancers": [
      {
        "name": "Vip Availability",
        "description": "Average Load Balancer data path availability per time duration",
        "type": "Metric",
        "verified": true,
        "visible": true,
        "skus": [
          "Standard"
        ],
        "tags": [
          "alz"
        ],
        "properties": {
          "metricName": "VipAvailability",
          "metricNamespace": "Microsoft.Network/loadBalancers",
          "severity": 0,
          "windowSize": "PT5M",
          "evaluationFrequency": "PT1M",
          "timeAggregation": "Average",
          "operator": "LessThan",
          "threshold": 90,
          "criterionType": "StaticThresholdCriterion",
          "autoMitigate": false
        },
        "references": [
          {
            "name": "Azure Monitor supported metrics by resource type - Azure Load Balancer",
            "url": "https://learn.microsoft.com/en-us/azure/azure-monitor/reference/supported-metrics/microsoft-network-loadbalancers-metrics"
          },
          {
            "name": "Azure Load Balancer Multi-Demensional-Metrics",
            "url": "https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-standard-diagnostics#multi-dimensional-metrics"
          },
          {
            "name": "Is The Data Path Up and Available for My Load-Balancer",
            "url": "https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-standard-diagnostics#is-the-data-path-up-and-available-for-my-load-balancer-frontend"
          }
        ],
        "deployments": [
          {
            "name": "Deploy ALB Data Path Availability Alert",
            "template": "Deploy-LB-DatapathAvailability-Alert.json",
            "type": "Policy",
            "tags": [
              "alz"
            ],
            "properties": {
              "scope": "Resource",
              "multiResource": false
            }
          }
        ]
      },
      {
        "name": "Global Backend Availability",
        "description": "Metric Alert for Global Backend Availability",
        "type": "Metric",
        "verified": false,
        "visible": true,
        "tags": [
          "alz"
        ],
        "properties": {
          "metricName": "GlobalBackendAvailability",
          "metricNamespace": "Microsoft.Network/loadBalancers",
          "severity": 0,
          "windowSize": "PT5M",
          "evaluationFrequency": "PT1M",
          "timeAggregation": "Average",
          "operator": "LessThan",
          "threshold": 90,
          "criterionType": "StaticThresholdCriterion",
          "autoMitigate": false
        },
        "references": [
          {
            "name": "Azure Monitor supported metrics by resource type - Azure Load Balancer",
            "url": "https://learn.microsoft.com/en-us/azure/azure-monitor/reference/supported-metrics/microsoft-network-loadbalancers-metrics"
          }
        ],
        "deployments": [
          {
            "name": "Deploy ALB Global Backend Availability Alert",
            "template": "Deploy-LB-GlobalBackendAvailability-Alert.json",
            "type": "Policy",
            "tags": [
              "alz"
            ],
            "properties": {
              "scope": "Resource",
              "multiResource": false
            }
          }
        ]
      },
      {
        "name": "Dip Availability",
        "description": "Average Load Balancer health probe status per time duration",
        "type": "Metric",
        "verified": true,
        "visible": true,
        "tags": [
          "alz"
        ],
        "properties": {
          "metricName": "DipAvailability",
          "metricNamespace": "Microsoft.Network/loadBalancers",
          "severity": 0,
          "windowSize": "PT5M",
          "evaluationFrequency": "PT1M",
          "timeAggregation": "Average",
          "operator": "LessThan",
          "threshold": 90,
          "criterionType": "StaticThresholdCriterion",
          "autoMitigate": false
        },
        "references": [
          {
            "name": "Azure Monitor supported metrics by resource type - Azure Load Balancer",
            "url": "https://learn.microsoft.com/en-us/azure/azure-monitor/reference/supported-metrics/microsoft-network-loadbalancers-metrics"
          },
          {
            "name": "Are Backend Instances for my Load-Balancer Responding to Probes",
            "url": "https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-standard-diagnostics#are-the-backend-instances-for-my-load-balancer-responding-to-probes"
          }
        ],
        "deployments": [
          {
            "name": "Deploy ALB Health Probe Status Alert",
            "template": "Deploy-LB-HealthProbeStatus-Alert.json",
            "type": "Policy",
            "tags": [
              "alz"
            ],
            "properties": {
              "scope": "Resource",
              "multiResource": false
            }
          }
        ]
      },
      {
        "name": "Used SNAT Ports",
        "description": "Metric Alert for ALB Used SNAT Ports",
        "type": "Metric",
        "verified": true,
        "visible": true,
        "tags": [
          "alz"
        ],
        "properties": {
          "metricName": "UsedSNATPorts",
          "metricNamespace": "Microsoft.Network/loadBalancers",
          "severity": 1,
          "windowSize": "PT5M",
          "evaluationFrequency": "PT1M",
          "timeAggregation": "Average",
          "operator": "GreaterThan",
          "threshold": 900,
          "criterionType": "StaticThresholdCriterion",
          "autoMitigate": false
        },
        "references": [
          {
            "name": "Azure Monitor supported metrics by resource type - Azure Load Balancer",
            "url": "https://learn.microsoft.com/en-us/azure/azure-monitor/reference/supported-metrics/microsoft-network-loadbalancers-metrics"
          },
          {
            "name": "Load-Balancer Alerts",
            "url": "https://learn.microsoft.com/en-us/azure/load-balancer/monitor-load-balancer#alerts"
          },
          {
            "name": "Check My SNAT Port Usage and Allocation",
            "url": "https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-standard-diagnostics#how-do-i-check-my-snat-port-usage-and-allocation"
          }
        ],
        "deployments": [
          {
            "name": "Deploy ALB Used SNAT Ports Alert",
            "template": "Deploy-LB-UsedSNATPorts-Alert.json",
            "type": "Policy",
            "tags": [
              "alz"
            ],
            "properties": {
              "scope": "Resource",
              "multiResource": false
            }
          }
        ]
      },
      {
        "name": "SnatConnectionCount",
        "description": "Total number of new SNAT connections created within time period",
        "type": "Metric",
        "verified": false,
        "visible": true,
        "tags": [
          "auto-generated",
          "agc-3226"
        ],
        "properties": {
          "metricName": "SnatConnectionCount",
          "metricNamespace": "Microsoft.Network/loadBalancers",
          "severity": 1,
          "windowSize": "PT5M",
          "evaluationFrequency": "PT5M",
          "timeAggregation": "Total",
          "operator": "GreaterThan",
          "criterionType": "StaticThresholdCriterion",
          "dimensions": [
            {
              "operator": "include",
              "name": "connectionstate",
              "values": [
                "failed"
              ]
            }
          ],
          "threshold": 0.0,
          "autoMitigate": false
        }
      },
      {
        "name": "Byte Count",
        "description": "Total number of bytes passing through load balancer",
        "type": "Metric",
        "verified": false,
        "visible": true,
        "properties": {
          "metricName": "Bytecount",
          "metricNamespace": "Microsoft.Network/loadBalancers",
          "severity": 1,
          "windowSize": "PT5M",
          "evaluationFrequency": "PT1M",
          "timeAggregation": "Total",
          "criterionType": "StaticThresholdCriterion",
          "autoMitigate": false
        }
      },
      {
        "name": "Packet Count",
        "description": "total number of packet passing through load balancer",
        "type": "Metric",
        "verified": false,
        "visible": true,
        "properties": {
          "metricName": "PacketCount",
          "metricNamespace": "Microsoft.Network/loadBalancers",
          "severity": 1,
          "windowSize": "PT5M",
          "evaluationFrequency": "PT1M",
          "timeAggregation": "Total",
          "autoMitigate": false
        }
      },
      {
        "name": "Allocated Snat Ports",
        "description": "total number of port allocated for SNAT",
        "type": "Metric",
        "verified": false,
        "visible": true,
        "properties": {
          "metricName": "AllocatedSnartPorts",
          "metricNamespace": "Microsoft.Network/loadBalancers",
          "severity": 1,
          "windowSize": "PT5M",
          "evaluationFrequency": "PT1M",
          "timeAggregation": "Average",
          "criterionType": "StaticThresholdCriterion",
          "autoMitigate": false
        }
      },
      {
        "name": "SYN Count",
        "description": "number of syn packet which represent an attempt to establish tcp connection.",
        "type": "Metric",
        "verified": false,
        "visible": true,
        "properties": {
          "metricName": "SYNCount",
          "metricNamespace": "Microsoft.Network/loadBalancers",
          "severity": 1,
          "windowSize": "PT5M",
          "evaluationFrequency": "PT1M",
          "timeAggregation": "Total",
          "criterionType": "StaticThresholdCriterion",
          "autoMitigate": false
        }
      }
    ]
  }
}
